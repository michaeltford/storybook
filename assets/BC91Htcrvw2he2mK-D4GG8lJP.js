/**
 * @license @sheetxl/react - React - React components needed to build advanced grid and spreadsheet UIs. - v0.6.6
 *
 * (C) 2025-present SheetXL Inc. & Michael T. Ford
 * License: The license can be found at https://www.sheetxl.com/license.
 */function Pe(g,O){for(var j=0;j<O.length;j++){const o=O[j];if(typeof o!="string"&&!Array.isArray(o)){for(const i in o)if(i!=="default"&&!(i in g)){const s=Object.getOwnPropertyDescriptor(o,i);s&&Object.defineProperty(g,i,s.get?s:{enumerable:!0,get:()=>o[i]})}}}return Object.freeze(Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}))}var K,W={},G={},D={},X={},$,M={};function me(){if($)return M;$=1;var g=M&&M.__awaiter||function(o,i,s,n){return new(s||(s=Promise))(function(e,u){function h(P){try{_(n.next(P))}catch(f){u(f)}}function d(P){try{_(n.throw(P))}catch(f){u(f)}}function _(P){var f;P.done?e(P.value):(f=P.value,f instanceof s?f:new s(function(r){r(f)})).then(h,d)}_((n=n.apply(o,i||[])).next())})},O=M&&M.__generator||function(o,i){var s,n,e,u,h={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(_){return function(P){return function(f){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,n&&(e=2&f[0]?n.return:f[0]?n.throw||((e=n.return)&&e.call(n),0):n.next)&&!(e=e.call(n,f[1])).done)return e;switch(n=0,e&&(f=[2&f[0],e.value]),f[0]){case 0:case 1:e=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,n=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(e=h.trys,!((e=e.length>0&&e[e.length-1])||f[0]!==6&&f[0]!==2)){h=0;continue}if(f[0]===3&&(!e||f[1]>e[0]&&f[1]<e[3])){h.label=f[1];break}if(f[0]===6&&h.label<e[1]){h.label=e[1],e=f;break}if(e&&h.label<e[2]){h.label=e[2],h.ops.push(f);break}e[2]&&h.ops.pop(),h.trys.pop();continue}f=i.call(o,h)}catch(r){f=[6,r],n=0}finally{s=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([_,P])}}};Object.defineProperty(M,"__esModule",{value:!0}),M.JsDelivrSourceResolver=void 0;var j=function(){function o(){}return o.prototype.resolvePackageJson=function(i,s,n){return g(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.resolveFile("https://cdn.jsdelivr.net/npm/".concat(i).concat(s?"@".concat(s):"").concat(n?"/".concat(n):"","/package.json"))];case 1:return[2,e.sent()]}})})},o.prototype.resolveSourceFile=function(i,s,n){return g(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.resolveFile("https://cdn.jsdelivr.net/npm/".concat(i).concat(s?"@".concat(s):"","/").concat(n))];case 1:return[2,e.sent()]}})})},o.prototype.resolveFile=function(i){return g(this,void 0,void 0,function(){var s;return O(this,function(n){switch(n.label){case 0:return[4,fetch(i,{method:"GET"})];case 1:return(s=n.sent()).ok?[4,s.text()]:[3,3];case 2:return[2,n.sent()];case 3:if(s.status===404)return[2,""];throw Error("Error other than 404 while fetching from Unpkg at ".concat(i));case 4:return[2]}})})},o}();return M.JsDelivrSourceResolver=j,M}var H,Q,Y,S={},T={};function q(){if(Q)return H;function g(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function O(o,i){for(var s,n="",e=0,u=-1,h=0,d=0;d<=o.length;++d){if(d<o.length)s=o.charCodeAt(d);else{if(s===47)break;s=47}if(s===47){if(!(u===d-1||h===1))if(u!==d-1&&h===2){if(n.length<2||e!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var _=n.lastIndexOf("/");if(_!==n.length-1){_===-1?(n="",e=0):e=(n=n.slice(0,_)).length-1-n.lastIndexOf("/"),u=d,h=0;continue}}else if(n.length===2||n.length===1){n="",e=0,u=d,h=0;continue}}i&&(n.length>0?n+="/..":n="..",e=2)}else n.length>0?n+="/"+o.slice(u+1,d):n=o.slice(u+1,d),e=d-u-1;u=d,h=0}else s===46&&h!==-1?++h:h=-1}return n}Q=1;var j={resolve:function(){for(var o,i="",s=!1,n=arguments.length-1;n>=-1&&!s;n--){var e;n>=0?e=arguments[n]:(o===void 0&&(o=process.cwd()),e=o),g(e),e.length!==0&&(i=e+"/"+i,s=e.charCodeAt(0)===47)}return i=O(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(o){if(g(o),o.length===0)return".";var i=o.charCodeAt(0)===47,s=o.charCodeAt(o.length-1)===47;return(o=O(o,!i)).length!==0||i||(o="."),o.length>0&&s&&(o+="/"),i?"/"+o:o},isAbsolute:function(o){return g(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,i=0;i<arguments.length;++i){var s=arguments[i];g(s),s.length>0&&(o===void 0?o=s:o+="/"+s)}return o===void 0?".":j.normalize(o)},relative:function(o,i){if(g(o),g(i),o===i||(o=j.resolve(o))===(i=j.resolve(i)))return"";for(var s=1;s<o.length&&o.charCodeAt(s)===47;++s);for(var n=o.length,e=n-s,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var h=i.length-u,d=e<h?e:h,_=-1,P=0;P<=d;++P){if(P===d){if(h>d){if(i.charCodeAt(u+P)===47)return i.slice(u+P+1);if(P===0)return i.slice(u+P)}else e>d&&(o.charCodeAt(s+P)===47?_=P:P===0&&(_=0));break}var f=o.charCodeAt(s+P);if(f!==i.charCodeAt(u+P))break;f===47&&(_=P)}var r="";for(P=s+_+1;P<=n;++P)P!==n&&o.charCodeAt(P)!==47||(r.length===0?r+="..":r+="/..");return r.length>0?r+i.slice(u+_):(u+=_,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(o){return o},dirname:function(o){if(g(o),o.length===0)return".";for(var i=o.charCodeAt(0),s=i===47,n=-1,e=!0,u=o.length-1;u>=1;--u)if((i=o.charCodeAt(u))===47){if(!e){n=u;break}}else e=!1;return n===-1?s?"/":".":s&&n===1?"//":o.slice(0,n)},basename:function(o,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');g(o);var s,n=0,e=-1,u=!0;if(i!==void 0&&i.length>0&&i.length<=o.length){if(i.length===o.length&&i===o)return"";var h=i.length-1,d=-1;for(s=o.length-1;s>=0;--s){var _=o.charCodeAt(s);if(_===47){if(!u){n=s+1;break}}else d===-1&&(u=!1,d=s+1),h>=0&&(_===i.charCodeAt(h)?--h===-1&&(e=s):(h=-1,e=d))}return n===e?e=d:e===-1&&(e=o.length),o.slice(n,e)}for(s=o.length-1;s>=0;--s)if(o.charCodeAt(s)===47){if(!u){n=s+1;break}}else e===-1&&(u=!1,e=s+1);return e===-1?"":o.slice(n,e)},extname:function(o){g(o);for(var i=-1,s=0,n=-1,e=!0,u=0,h=o.length-1;h>=0;--h){var d=o.charCodeAt(h);if(d!==47)n===-1&&(e=!1,n=h+1),d===46?i===-1?i=h:u!==1&&(u=1):i!==-1&&(u=-1);else if(!e){s=h+1;break}}return i===-1||n===-1||u===0||u===1&&i===n-1&&i===s+1?"":o.slice(i,n)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return function(i,s){var n=s.dir||s.root,e=s.base||(s.name||"")+(s.ext||"");return n?n===s.root?n+e:n+i+e:e}("/",o)},parse:function(o){g(o);var i={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return i;var s,n=o.charCodeAt(0),e=n===47;e?(i.root="/",s=1):s=0;for(var u=-1,h=0,d=-1,_=!0,P=o.length-1,f=0;P>=s;--P)if((n=o.charCodeAt(P))!==47)d===-1&&(_=!1,d=P+1),n===46?u===-1?u=P:f!==1&&(f=1):u!==-1&&(f=-1);else if(!_){h=P+1;break}return u===-1||d===-1||f===0||f===1&&u===d-1&&u===h+1?d!==-1&&(i.base=i.name=h===0&&e?o.slice(1,d):o.slice(h,d)):(h===0&&e?(i.name=o.slice(1,u),i.base=o.slice(1,d)):(i.name=o.slice(h,u),i.base=o.slice(h,d)),i.ext=o.slice(u,d)),h>0?i.dir=o.slice(0,h-1):e&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};return j.posix=j,H=j}var Z,J={};function be(){if(Z)return J;Z=1;var g=J&&J.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(J,"__esModule",{value:!0}),J.importResourcePathToString=void 0;var O=g(q());return J.importResourcePathToString=function(j){var o;switch(j.kind){case"package":return O.default.join(j.packageName,(o=j.importPath)!==null&&o!==void 0?o:"","package.json");case"relative":return O.default.join(j.sourcePath,j.importPath);case"relative-in-package":return O.default.join(j.packageName,j.sourcePath,j.importPath)}},J}var ee,B={};function ke(){return ee||(ee=1,Object.defineProperty(B,"__esModule",{value:!0}),B.invokeUpdate=void 0,B.invokeUpdate=function(g,O){var j,o="".concat(g.type,": ");switch(g.type){case"CodeChanged":case"ResolveNewImports":o+="";break;case"LookedUpTypeFile":o+='"'.concat(g.path,'" was ').concat(g.success?"sucessfully":"not sucessfully"," looked up");break;case"AttemptedLookUpFile":o+='"'.concat(g.path,'" was ').concat(g.success?"sucessfully":"not sucessfully"," attempted to looked up");break;case"LookedUpPackage":o+='package.json for package "'.concat(g.package,'" was ').concat(g.success?"sucessfully":"not sucessfully"," looked up").concat(g.definitelyTyped?" (found in definitely typed repo)":"");break;case"LoadedFromCache":o+='"'.concat(g.importPath,'" was loaded from cache');break;case"StoredToCache":o+='"'.concat(g.importPath,'" was stored to cache')}o.endsWith(": ")&&(o=o.slice(void 0,-2)),(j=O.onUpdate)===null||j===void 0||j.call(O,g,o)}),B}var te,re,ne,oe,z={};function we(){if(te)return z;te=1,Object.defineProperty(z,"__esModule",{value:!0}),z.RecursionDepth=void 0;var g=function(){function O(j,o,i){o===void 0&&(o=0),i===void 0&&(i=0),this.options=j,this.fileRecursionDepth=o,this.packageRecursionDepth=i}return O.prototype.nextPackage=function(){return new O(this.options,this.fileRecursionDepth,this.packageRecursionDepth+1)},O.prototype.nextFile=function(){return new O(this.options,this.fileRecursionDepth+1,this.packageRecursionDepth)},O.prototype.same=function(){return new O(this.options,this.fileRecursionDepth,this.packageRecursionDepth)},O.prototype.shouldStop=function(){return this.options.fileRecursionDepth>0&&this.fileRecursionDepth>=this.options.fileRecursionDepth||this.options.packageRecursionDepth>0&&this.packageRecursionDepth>=this.options.packageRecursionDepth},O}();return z.RecursionDepth=g,z}function _e(){if(re)return S;re=1;var g=S&&S.__assign||function(){return g=Object.assign||function(r){for(var t,c=1,l=arguments.length;c<l;c++)for(var a in t=arguments[c])Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r},g.apply(this,arguments)},O=S&&S.__createBinding||(Object.create?function(r,t,c,l){l===void 0&&(l=c);var a=Object.getOwnPropertyDescriptor(t,c);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[c]}}),Object.defineProperty(r,l,a)}:function(r,t,c,l){l===void 0&&(l=c),r[l]=t[c]}),j=S&&S.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),o=S&&S.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var c in r)c!=="default"&&Object.prototype.hasOwnProperty.call(r,c)&&O(t,r,c);return j(t,r),t},i=S&&S.__awaiter||function(r,t,c,l){return new(c||(c=Promise))(function(a,m){function v(k){try{y(l.next(k))}catch(p){m(p)}}function b(k){try{y(l.throw(k))}catch(p){m(p)}}function y(k){var p;k.done?a(k.value):(p=k.value,p instanceof c?p:new c(function(w){w(p)})).then(v,b)}y((l=l.apply(r,t||[])).next())})},s=S&&S.__generator||function(r,t){var c,l,a,m,v={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(y){return function(k){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,l&&(a=2&p[0]?l.return:p[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,p[1])).done)return a;switch(l=0,a&&(p=[2&p[0],a.value]),p[0]){case 0:case 1:a=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,l=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(a=v.trys,!((a=a.length>0&&a[a.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){v.label=p[1];break}if(p[0]===6&&v.label<a[1]){v.label=a[1],a=p;break}if(a&&v.label<a[2]){v.label=a[2],v.ops.push(p);break}a[2]&&v.ops.pop(),v.trys.pop();continue}p=t.call(r,v)}catch(w){p=[6,w],l=0}finally{c=a=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([y,k])}}},n=S&&S.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,c=t&&r[t],l=0;if(c)return c.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&l>=r.length&&(r=void 0),{value:r&&r[l++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},e=S&&S.__read||function(r,t){var c=typeof Symbol=="function"&&r[Symbol.iterator];if(!c)return r;var l,a,m=c.call(r),v=[];try{for(;(t===void 0||t-- >0)&&!(l=m.next()).done;)v.push(l.value)}catch(b){a={error:b}}finally{try{l&&!l.done&&(c=m.return)&&c.call(m)}finally{if(a)throw a.error}}return v};Object.defineProperty(S,"__esModule",{value:!0}),S.ImportResolver=void 0;var u=function(){if(Y)return T;Y=1;var r=T&&T.__createBinding||(Object.create?function(b,y,k,p){p===void 0&&(p=k);var w=Object.getOwnPropertyDescriptor(y,k);w&&!("get"in w?!y.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return y[k]}}),Object.defineProperty(b,p,w)}:function(b,y,k,p){p===void 0&&(p=k),b[p]=y[k]}),t=T&&T.__setModuleDefault||(Object.create?function(b,y){Object.defineProperty(b,"default",{enumerable:!0,value:y})}:function(b,y){b.default=y}),c=T&&T.__importStar||function(b){if(b&&b.__esModule)return b;var y={};if(b!=null)for(var k in b)k!=="default"&&Object.prototype.hasOwnProperty.call(b,k)&&r(y,b,k);return t(y,b),y},l=T&&T.__read||function(b,y){var k=typeof Symbol=="function"&&b[Symbol.iterator];if(!k)return b;var p,w,C=k.call(b),A=[];try{for(;(y===void 0||y-- >0)&&!(p=C.next()).done;)A.push(p.value)}catch(x){w={error:x}}finally{try{p&&!p.done&&(k=C.return)&&k.call(C)}finally{if(w)throw w.error}}return A},a=T&&T.__spreadArray||function(b,y,k){if(k||arguments.length===2)for(var p,w=0,C=y.length;w<C;w++)!p&&w in y||(p||(p=Array.prototype.slice.call(y,0,w)),p[w]=y[w]);return b.concat(p||Array.prototype.slice.call(y))};Object.defineProperty(T,"__esModule",{value:!0}),T.DependencyParser=void 0;var m=c(q()),v=function(){function b(){this.REGEX_CLEAN=/[\n|\r]/g,this.REGEX_DETECT_IMPORT=/(?:(?:(?:import)|(?:export))(?:.)*?from\s+["']([^"']+)["'])|(?:((?:require|import))(?:\s+)?\(["']([^"']+)["']\))|(?:\/+\s+<reference\s+path=["']([^"']+)["']\s+\/>)/g,this.REGEX_NODE_MODULE=/^node:([\w\W\/]+)$/}return b.prototype.parseDependencies=function(y,k){var p=this;return a([],l(y.matchAll(this.REGEX_DETECT_IMPORT)),!1).map(function(w){var C,A;return(A=(C=w[1])!==null&&C!==void 0?C:w[2])!==null&&A!==void 0?A:w[3]}).filter(function(w){return!!w}).map(function(w){return p.resolvePath(w,k)})},b.prototype.resolvePath=function(y,k){var p=y.match(this.REGEX_NODE_MODULE);if(p)return{kind:"relative-in-package",packageName:"@types/node",importPath:"".concat(p[1],".d.ts"),sourcePath:""};if(typeof k=="string"){if(y.startsWith("."))return{kind:"relative",importPath:y,sourcePath:k};if(y.startsWith("@")){var w=y.split("/");return{kind:"package",packageName:"".concat(w[0],"/").concat(w[1]),importPath:w.slice(2).join("/")}}return{kind:"package",packageName:(w=y.split("/"))[0],importPath:w.slice(1).join("/")}}switch(k.kind){case"package":throw Error("TODO?");case"relative":throw Error("TODO2?");case"relative-in-package":return y.startsWith(".")?{kind:"relative-in-package",packageName:k.packageName,sourcePath:m.join(k.sourcePath,k.importPath),importPath:y}:y.startsWith("@")?(w=y.split("/"),{kind:"package",packageName:"".concat(w[0],"/").concat(w[1]),importPath:w.slice(2).join("/")}):{kind:"package",packageName:(w=y.split("/"))[0],importPath:w.slice(1).join("/")}}},b}();return T.DependencyParser=v,T}(),h=be(),d=o(q()),_=ke(),P=we(),f=function(){function r(t){var c,l;if(this.options=t,this.loadedFiles=[],this.dependencyParser=new u.DependencyParser,this.cache=t.sourceCache,this.sourceResolver=t.sourceResolver,this.newImportsResolved=!1,this.monaco=t.monaco,t.preloadPackages&&t.versions){this.versions=t.versions;try{for(var a=n(Object.entries(t.versions)),m=a.next();!m.done;m=a.next()){var v=e(m.value,2),b=v[0];v[1],this.resolveImport({kind:"package",packageName:b,importPath:""},new P.RecursionDepth(this.options)).catch(function(y){console.error(y)})}}catch(y){c={error:y}}finally{try{m&&!m.done&&(l=a.return)&&l.call(a)}finally{if(c)throw c.error}}}}return r.prototype.wereNewImportsResolved=function(){return this.newImportsResolved},r.prototype.resetNewImportsResolved=function(){this.newImportsResolved=!1},r.prototype.resolveImportsInFile=function(t,c,l){var a,m,v;return i(this,void 0,void 0,function(){var b,y,k,p,w,C,A,x;return s(this,function(R){switch(R.label){case 0:if(l.shouldStop())return[2];b=this.dependencyParser.parseDependencies(t,c),R.label=1;case 1:R.trys.push([1,8,9,10]),y=n(b),k=y.next(),R.label=2;case 2:if(k.done)return[3,7];p=k.value,R.label=3;case 3:return R.trys.push([3,5,,6]),[4,this.resolveImport(p,l)];case 4:return R.sent(),[3,6];case 5:return w=R.sent(),this.options.onError?(m=(a=this.options).onError)===null||m===void 0||m.call(a,(v=w.message)!==null&&v!==void 0?v:w):console.error(w),[3,6];case 6:return k=y.next(),[3,2];case 7:return[3,10];case 8:return C=R.sent(),A={error:C},[3,10];case 9:try{k&&!k.done&&(x=y.return)&&x.call(y)}finally{if(A)throw A.error}return[7];case 10:return[2]}})})},r.prototype.resolveImport=function(t,c){return i(this,void 0,void 0,function(){var l,a;return s(this,function(m){switch(m.label){case 0:if(l=this.hashImportResourcePath(t),this.loadedFiles.includes(l))return[2];switch(this.loadedFiles.push(l),t.kind){case"package":return[3,1];case"relative":return[3,5];case"relative-in-package":return[3,6]}return[3,8];case 1:return[4,this.resolveImportFromPackageRoot(t)];case 2:return(a=m.sent())?[4,this.resolveImportInPackage(a,c.nextPackage().nextFile())]:[3,4];case 3:case 7:return[2,m.sent()];case 4:return[3,8];case 5:throw Error("Not implemented yet");case 6:return[4,this.resolveImportInPackage(t,c.nextFile())];case 8:return[2]}})})},r.prototype.resolveImportInPackage=function(t,c){return i(this,void 0,void 0,function(){var l,a,m;return s(this,function(v){switch(v.label){case 0:return[4,this.loadSourceFileContents(t)];case 1:return(l=v.sent())?(a=l.source,m=l.at,this.createModel(a,this.monaco.Uri.parse(this.options.fileRootPath+d.join("node_modules/".concat(t.packageName),m))),[4,this.resolveImportsInFile(a,{kind:"relative-in-package",packageName:t.packageName,sourcePath:d.dirname(m),importPath:""},c)]):[3,3];case 2:v.sent(),v.label=3;case 3:return[2]}})})},r.prototype.resolveImportFromPackageRoot=function(t){var c,l,a,m,v,b,y,k,p;return i(this,void 0,void 0,function(){var w,C,A,x,R,E,V,F,N;return s(this,function(U){switch(U.label){case 0:return w={type:"LookedUpPackage",package:t.packageName,definitelyTyped:!1,success:!1},!this.options.onlySpecifiedPackages||!((c=this.versions)===null||c===void 0)&&c[t.packageName]||!((l=this.versions)===null||l===void 0)&&l["@types/"+t.packageName]?(C=(m=(a=t.importPath)===null||a===void 0?void 0:a.length)!==null&&m!==void 0&&m,A=C?"/".concat(t.importPath):"",[4,this.resolvePackageJson(t.packageName,(v=this.versions)===null||v===void 0?void 0:v[t.packageName],C?t.importPath:void 0)]):((0,_.invokeUpdate)(w,this.options),[2]);case 1:return(x=U.sent())||!C?[3,3]:[4,this.resolvePackageJson(t.packageName,(b=this.versions)===null||b===void 0?void 0:b[t.packageName])];case 2:x=U.sent(),A="",U.label=3;case 3:return x?(R=JSON.parse(x)).typings||R.types?(N=R.typings||R.types,this.createModel(x,this.monaco.Uri.parse("".concat(this.options.fileRootPath,"node_modules/").concat(t.packageName).concat(A,"/package.json"))),(0,_.invokeUpdate)({type:"LookedUpPackage",package:t.packageName,definitelyTyped:!1,success:!0},this.options),this.setVersion(t.packageName,R.version),[2,{kind:"relative-in-package",packageName:t.packageName,sourcePath:"",importPath:d.join((y=t.importPath)!==null&&y!==void 0?y:"",N.startsWith("./")?N.slice(2):N)}]):[3,4]:[3,7];case 4:return E="@types/".concat(t.packageName.startsWith("@")?t.packageName.slice(1).replace(/\//,"__"):t.packageName),[4,this.resolvePackageJson(E,(k=this.versions)===null||k===void 0?void 0:k[E])];case 5:if(V=U.sent()){if((F=JSON.parse(V)).typings||F.types)return N=F.typings||F.types,this.createModel(V,this.monaco.Uri.parse("".concat(this.options.fileRootPath,"node_modules/").concat(E,"/package.json"))),(0,_.invokeUpdate)({type:"LookedUpPackage",package:E,definitelyTyped:!0,success:!0},this.options),this.setVersion(E,F.version),[2,{kind:"relative-in-package",packageName:E,sourcePath:"",importPath:d.join((p=t.importPath)!==null&&p!==void 0?p:"",N.startsWith("./")?N.slice(2):N)}];(0,_.invokeUpdate)(w,this.options)}else(0,_.invokeUpdate)(w,this.options);U.label=6;case 6:return[3,8];case 7:(0,_.invokeUpdate)(w,this.options),U.label=8;case 8:return[2]}})})},r.prototype.loadSourceFileContents=function(t){return i(this,void 0,void 0,function(){var c,l,a,m,v,b,y,k,p,w,C,A,x,R,E,V;return s(this,function(F){switch(F.label){case 0:return c=d.join(t.packageName,t.sourcePath,t.importPath),l={type:"LookedUpTypeFile",path:c,definitelyTyped:!1,success:!1},a=t.packageName,m=this.getVersion(t.packageName),(v=[".d.ts","/index.d.ts",".ts",".tsx","/index.ts","/index.tsx"]).map(function(N){return t.importPath.endsWith(N)}).reduce(function(N,U){return N||U},!1)?[4,this.resolveSourceFile(a,m,d.join(t.sourcePath,t.importPath))]:[3,2];case 1:return(R=F.sent())?[2,{source:R,at:d.join(t.sourcePath,t.importPath)}]:[3,9];case 2:F.trys.push([2,7,8,9]),b=n(v),y=b.next(),F.label=3;case 3:return y.done?[3,6]:(k=y.value,p=d.join(t.sourcePath,t.importPath),x=(k===".d.ts"&&p.endsWith(".js")?p.slice(0,-3):p)+k,[4,this.resolveSourceFile(a,m,x)]);case 4:if(R=F.sent(),(0,_.invokeUpdate)({type:"AttemptedLookUpFile",path:d.join(a,x),success:!!R},this.options),R)return(0,_.invokeUpdate)({type:"LookedUpTypeFile",path:d.join(a,x),success:!0},this.options),[2,{source:R,at:x}];F.label=5;case 5:return y=b.next(),[3,3];case 6:return[3,9];case 7:return w=F.sent(),E={error:w},[3,9];case 8:try{y&&!y.done&&(V=b.return)&&V.call(b)}finally{if(E)throw E.error}return[7];case 9:return[4,this.resolvePackageJson(a,m,d.join(t.sourcePath,t.importPath))];case 10:return(C=F.sent())&&(A=JSON.parse(C).types)?(x=d.join(t.sourcePath,t.importPath,A),[4,this.resolveSourceFile(a,m,x)]):[3,12];case 11:if(R=F.sent())return(0,_.invokeUpdate)({type:"LookedUpTypeFile",path:d.join(a,x),success:!0},this.options),[2,{source:R,at:x}];F.label=12;case 12:return(0,_.invokeUpdate)(l,this.options),[2,null]}})})},r.prototype.getVersion=function(t){var c;return(c=this.versions)===null||c===void 0?void 0:c[t]},r.prototype.setVersions=function(t){var c,l;this.versions=t,(l=(c=this.options).onUpdateVersions)===null||l===void 0||l.call(c,t)},r.prototype.setVersion=function(t,c){var l;this.setVersions(g(g({},this.versions),((l={})[t]=c,l)))},r.prototype.createModel=function(t,c){c=c.with({path:c.path.replace("@types/","")}),this.monaco.editor.getModel(c)||(this.monaco.editor.createModel(t,"typescript",c),this.newImportsResolved=!0)},r.prototype.hashImportResourcePath=function(t){return(0,h.importResourcePathToString)(t)},r.prototype.resolvePackageJson=function(t,c,l){return i(this,void 0,void 0,function(){var a,m,v,b;return s(this,function(y){switch(y.label){case 0:return a=d.join(t+(c?"@".concat(c):""),l??"","package.json"),m=!1,v=void 0,this.cache.isFileAvailable?[4,this.cache.isFileAvailable(a)]:[3,2];case 1:return m=y.sent(),[3,4];case 2:return[4,this.cache.getFile(a)];case 3:v=y.sent(),m=v!==void 0,y.label=4;case 4:return m?v==null?[3,5]:(b=v,[3,7]):[3,8];case 5:return[4,this.cache.getFile(a)];case 6:b=y.sent(),y.label=7;case 7:return[2,b];case 8:return[4,this.sourceResolver.resolvePackageJson(t,c,l)];case 9:return(v=y.sent())&&this.cache.storeFile(a,v),[2,v]}})})},r.prototype.resolveSourceFile=function(t,c,l){return i(this,void 0,void 0,function(){var a,m,v,b;return s(this,function(y){switch(y.label){case 0:return a=d.join(t+(c?"@".concat(c):""),l),m=!1,v=void 0,this.cache.isFileAvailable?[4,this.cache.isFileAvailable(a)]:[3,2];case 1:return m=y.sent(),[3,4];case 2:return[4,this.cache.getFile(a)];case 3:v=y.sent(),m=v!==void 0,y.label=4;case 4:return m?((0,_.invokeUpdate)({type:"LoadedFromCache",importPath:a},this.options),v==null?[3,5]:(b=v,[3,7])):[3,8];case 5:return[4,this.cache.getFile(a)];case 6:b=y.sent(),y.label=7;case 7:return[2,b];case 8:return[4,this.sourceResolver.resolveSourceFile(t,c,l)];case 9:return(v=y.sent())&&((0,_.invokeUpdate)({type:"StoredToCache",importPath:a},this.options),this.cache.storeFile(a,v)),[2,v]}})})},r}();return S.ImportResolver=f,S}function je(){if(ne)return D;ne=1;var g=D&&D.__assign||function(){return g=Object.assign||function(r){for(var t,c=1,l=arguments.length;c<l;c++)for(var a in t=arguments[c])Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a]);return r},g.apply(this,arguments)},O=D&&D.__createBinding||(Object.create?function(r,t,c,l){l===void 0&&(l=c);var a=Object.getOwnPropertyDescriptor(t,c);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[c]}}),Object.defineProperty(r,l,a)}:function(r,t,c,l){l===void 0&&(l=c),r[l]=t[c]}),j=D&&D.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),o=D&&D.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var c in r)c!=="default"&&Object.prototype.hasOwnProperty.call(r,c)&&O(t,r,c);return j(t,r),t},i=D&&D.__awaiter||function(r,t,c,l){return new(c||(c=Promise))(function(a,m){function v(k){try{y(l.next(k))}catch(p){m(p)}}function b(k){try{y(l.throw(k))}catch(p){m(p)}}function y(k){var p;k.done?a(k.value):(p=k.value,p instanceof c?p:new c(function(w){w(p)})).then(v,b)}y((l=l.apply(r,t||[])).next())})},s=D&&D.__generator||function(r,t){var c,l,a,m,v={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return m={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function b(y){return function(k){return function(p){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,l&&(a=2&p[0]?l.return:p[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,p[1])).done)return a;switch(l=0,a&&(p=[2&p[0],a.value]),p[0]){case 0:case 1:a=p;break;case 4:return v.label++,{value:p[1],done:!1};case 5:v.label++,l=p[1],p=[0];continue;case 7:p=v.ops.pop(),v.trys.pop();continue;default:if(a=v.trys,!((a=a.length>0&&a[a.length-1])||p[0]!==6&&p[0]!==2)){v=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){v.label=p[1];break}if(p[0]===6&&v.label<a[1]){v.label=a[1],a=p;break}if(a&&v.label<a[2]){v.label=a[2],v.ops.push(p);break}a[2]&&v.ops.pop(),v.trys.pop();continue}p=t.call(r,v)}catch(w){p=[6,w],l=0}finally{c=a=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([y,k])}}},n=D&&D.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,c=t&&r[t],l=0;if(c)return c.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&l>=r.length&&(r=void 0),{value:r&&r[l++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(D,"__esModule",{value:!0}),D.AutoTypingsCore=void 0;var e=function(){if(K)return X;K=1,Object.defineProperty(X,"__esModule",{value:!0}),X.DummySourceCache=void 0;var r=function(){function t(){}return t.prototype.getFile=function(c){return Promise.resolve(void 0)},t.prototype.isFileAvailable=function(c){return Promise.resolve(!1)},t.prototype.storeFile=function(c,l){return Promise.resolve(void 0)},t.prototype.clear=function(){return Promise.resolve(void 0)},t}();return X.DummySourceCache=r,X}(),u=me(),h=_e(),d=o(q()),_=ke(),P=we(),f=function(){function r(t,c){var l=this;this.editor=t,this.options=c,this.disposables=[],this.importResolver=new h.ImportResolver(c);var a=t.onDidChangeModelContent(function(m){l.debouncedResolveContents()});this.disposables.push(a),this.resolveContents(),c.dontAdaptEditorOptions||c.monaco.languages.typescript.typescriptDefaults.setCompilerOptions(g(g({},c.monaco.languages.typescript.typescriptDefaults.getCompilerOptions()),{moduleResolution:c.monaco.languages.typescript.ModuleResolutionKind.NodeJs,allowSyntheticDefaultImports:!0,rootDir:c.fileRootPath}))}return r.create=function(t,c){var l,a;return i(this,void 0,void 0,function(){var m;return s(this,function(v){if(c?.shareCache&&c.sourceCache&&!r.sharedCache&&(r.sharedCache=c.sourceCache),!(m=c?.monaco))throw new Error("monacoInstance not found, you can specify the monaco instance via options.monaco");return[2,new r(t,g(g({fileRootPath:"inmemory://model/",onlySpecifiedPackages:!1,preloadPackages:!1,shareCache:!1,dontAdaptEditorOptions:!1,dontRefreshModelValueAfterResolvement:!1,sourceCache:(l=r.sharedCache)!==null&&l!==void 0?l:new e.DummySourceCache,sourceResolver:(a=c?.sourceResolver)!==null&&a!==void 0?a:new u.JsDelivrSourceResolver,debounceDuration:4e3,fileRecursionDepth:10,packageRecursionDepth:3},c),{monaco:m}))]})})},r.prototype.dispose=function(){var t,c;try{for(var l=n(this.disposables),a=l.next();!a.done;a=l.next())a.value.dispose()}catch(m){t={error:m}}finally{try{a&&!a.done&&(c=l.return)&&c.call(l)}finally{if(t)throw t.error}}},r.prototype.setVersions=function(t){this.importResolver.setVersions(t),this.options.versions=t},r.prototype.clearCache=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.options.sourceCache.clear()];case 1:return t.sent(),[2]}})})},r.prototype.debouncedResolveContents=function(){var t=this;this.isResolving||((0,_.invokeUpdate)({type:"CodeChanged"},this.options),this.options.debounceDuration<=0?this.resolveContents():(this.debounceTimer!==void 0&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){return i(t,void 0,void 0,function(){return s(this,function(c){switch(c.label){case 0:return[4,this.resolveContents()];case 1:return c.sent(),this.debounceTimer=void 0,[2]}})})},this.options.debounceDuration)))},r.prototype.resolveContents=function(){var t;return i(this,void 0,void 0,function(){var c,l,a,m;return s(this,function(v){switch(v.label){case 0:if(this.isResolving=!0,(0,_.invokeUpdate)({type:"ResolveNewImports"},this.options),!(c=this.editor.getModel()))throw Error("No model");l=c.getLinesContent(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.importResolver.resolveImportsInFile(l.join(`
`),d.dirname(c.uri.toString()),new P.RecursionDepth(this.options))];case 2:return v.sent(),[3,4];case 3:if(a=v.sent(),!this.options.onError)throw a;return this.options.onError((t=a.message)!==null&&t!==void 0?t:a),[3,4];case 4:return this.importResolver.wereNewImportsResolved()&&(this.options.dontRefreshModelValueAfterResolvement||(m=this.editor.getPosition(),c.setValue(c.getValue()),m&&this.editor.setPosition(m)),this.importResolver.resetNewImportsResolved()),this.isResolving=!1,[2]}})})},r}();return D.AutoTypingsCore=f,D}var ie,I={};function Oe(){if(ie)return I;ie=1;var g=I&&I.__awaiter||function(i,s,n,e){return new(n||(n=Promise))(function(u,h){function d(f){try{P(e.next(f))}catch(r){h(r)}}function _(f){try{P(e.throw(f))}catch(r){h(r)}}function P(f){var r;f.done?u(f.value):(r=f.value,r instanceof n?r:new n(function(t){t(r)})).then(d,_)}P((e=e.apply(i,s||[])).next())})},O=I&&I.__generator||function(i,s){var n,e,u,h,d={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return h={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function _(P){return function(f){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;d;)try{if(n=1,e&&(u=2&r[0]?e.return:r[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,r[1])).done)return u;switch(e=0,u&&(r=[2&r[0],u.value]),r[0]){case 0:case 1:u=r;break;case 4:return d.label++,{value:r[1],done:!1};case 5:d.label++,e=r[1],r=[0];continue;case 7:r=d.ops.pop(),d.trys.pop();continue;default:if(u=d.trys,!((u=u.length>0&&u[u.length-1])||r[0]!==6&&r[0]!==2)){d=0;continue}if(r[0]===3&&(!u||r[1]>u[0]&&r[1]<u[3])){d.label=r[1];break}if(r[0]===6&&d.label<u[1]){d.label=u[1],u=r;break}if(u&&d.label<u[2]){d.label=u[2],d.ops.push(r);break}u[2]&&d.ops.pop(),d.trys.pop();continue}r=s.call(i,d)}catch(t){r=[6,t],e=0}finally{n=u=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([P,f])}}},j=I&&I.__values||function(i){var s=typeof Symbol=="function"&&Symbol.iterator,n=s&&i[s],e=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&e>=i.length&&(i=void 0),{value:i&&i[e++],done:!i}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(I,"__esModule",{value:!0}),I.LocalStorageCache=void 0;var o=function(){function i(){this.localCache={}}return i.prototype.getFile=function(s){var n;return g(this,void 0,void 0,function(){return O(this,function(e){try{return[2,(n=localStorage.getItem(i.LOCALSTORAGE_PREFIX+s))!==null&&n!==void 0?n:void 0]}catch{return[2,this.localCache[s]]}return[2]})})},i.prototype.storeFile=function(s,n){return g(this,void 0,void 0,function(){return O(this,function(e){this.localCache[s]=n;try{localStorage.setItem(i.LOCALSTORAGE_PREFIX+s,n)}catch{}return[2]})})},i.prototype.clear=function(){return g(this,void 0,void 0,function(){var s,n,e,u,h,d,_;return O(this,function(P){for(this.localCache={},s=[],n=0;n<localStorage.length;n++)(h=localStorage.key(n))!=null&&h.startsWith(i.LOCALSTORAGE_PREFIX)&&s.push(h);try{for(e=j(s),u=e.next();!u.done;u=e.next())h=u.value,localStorage.removeItem(h)}catch(f){d={error:f}}finally{try{u&&!u.done&&(_=e.return)&&_.call(e)}finally{if(d)throw d.error}}return[2]})})},i.LOCALSTORAGE_PREFIX="__autotyper_cache_",i}();return I.LocalStorageCache=o,I}var ae,se={},ce,ue={},le,pe={},he,fe={},de,ve,ye,ge,L={};function Re(){if(de)return L;de=1;var g=L&&L.__awaiter||function(o,i,s,n){return new(s||(s=Promise))(function(e,u){function h(P){try{_(n.next(P))}catch(f){u(f)}}function d(P){try{_(n.throw(P))}catch(f){u(f)}}function _(P){var f;P.done?e(P.value):(f=P.value,f instanceof s?f:new s(function(r){r(f)})).then(h,d)}_((n=n.apply(o,i||[])).next())})},O=L&&L.__generator||function(o,i){var s,n,e,u,h={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(_){return function(P){return function(f){if(s)throw new TypeError("Generator is already executing.");for(;h;)try{if(s=1,n&&(e=2&f[0]?n.return:f[0]?n.throw||((e=n.return)&&e.call(n),0):n.next)&&!(e=e.call(n,f[1])).done)return e;switch(n=0,e&&(f=[2&f[0],e.value]),f[0]){case 0:case 1:e=f;break;case 4:return h.label++,{value:f[1],done:!1};case 5:h.label++,n=f[1],f=[0];continue;case 7:f=h.ops.pop(),h.trys.pop();continue;default:if(e=h.trys,!((e=e.length>0&&e[e.length-1])||f[0]!==6&&f[0]!==2)){h=0;continue}if(f[0]===3&&(!e||f[1]>e[0]&&f[1]<e[3])){h.label=f[1];break}if(f[0]===6&&h.label<e[1]){h.label=e[1],e=f;break}if(e&&h.label<e[2]){h.label=e[2],h.ops.push(f);break}e[2]&&h.ops.pop(),h.trys.pop();continue}f=i.call(o,h)}catch(r){f=[6,r],n=0}finally{s=e=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([_,P])}}};Object.defineProperty(L,"__esModule",{value:!0}),L.UnpkgSourceResolver=void 0;var j=function(){function o(){}return o.prototype.resolvePackageJson=function(i,s,n){return g(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.resolveFile("https://unpkg.com/".concat(i).concat(s?"@".concat(s):"").concat(n?"/".concat(n):"","/package.json"))];case 1:return[2,e.sent()]}})})},o.prototype.resolveSourceFile=function(i,s,n){return g(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return[4,this.resolveFile("https://unpkg.com/".concat(i).concat(s?"@".concat(s):"","/").concat(n))];case 1:return[2,e.sent()]}})})},o.prototype.resolveFile=function(i){return g(this,void 0,void 0,function(){var s;return O(this,function(n){switch(n.label){case 0:return[4,fetch(i,{method:"GET"})];case 1:return(s=n.sent()).ok?[4,s.text()]:[3,3];case 2:return[2,n.sent()];case 3:if(s.status===404)return[2,""];throw Error("Error other than 404 while fetching from Unpkg at ".concat(i));case 4:return[2]}})})},o}();return L.UnpkgSourceResolver=j,L}function Se(){return ve||(ve=1,g=W,O=W&&W.__createBinding||(Object.create?function(o,i,s,n){n===void 0&&(n=s);var e=Object.getOwnPropertyDescriptor(i,s);e&&!("get"in e?!i.__esModule:e.writable||e.configurable)||(e={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(o,n,e)}:function(o,i,s,n){n===void 0&&(n=s),o[n]=i[s]}),j=W&&W.__exportStar||function(o,i){for(var s in o)s==="default"||Object.prototype.hasOwnProperty.call(i,s)||O(i,o,s)},Object.defineProperty(g,"__esModule",{value:!0}),j(function(){if(oe)return G;oe=1;var o,i=G&&G.__extends||(o=function(n,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,h){u.__proto__=h}||function(u,h){for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(u[d]=h[d])},o(n,e)},function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function u(){this.constructor=n}o(n,e),n.prototype=e===null?Object.create(e):(u.prototype=e.prototype,new u)});Object.defineProperty(G,"__esModule",{value:!0}),G.AutoTypings=void 0;var s=function(n){function e(u,h){return n.call(this,u,h)||this}return i(e,n),e}(je().AutoTypingsCore);return G.AutoTypings=s,G}(),g),j(be(),g),j(Oe(),g),j((ae||(ae=1,Object.defineProperty(se,"__esModule",{value:!0})),se),g),j((ce||(ce=1,Object.defineProperty(ue,"__esModule",{value:!0})),ue),g),j((le||(le=1,Object.defineProperty(pe,"__esModule",{value:!0})),pe),g),j((he||(he=1,Object.defineProperty(fe,"__esModule",{value:!0})),fe),g),j(Re(),g),j(me(),g)),W;var g,O,j}const Ce=Pe({__proto__:null},[ge?ye:(ge=1,ye=Se())]);export{Ce as c};
