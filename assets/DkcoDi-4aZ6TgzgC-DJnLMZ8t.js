import{r as i,m as S}from"./iframe-CBk8unIv.js";import"./preload-helper-D9Z9MdNV.js";/**
 * @license @sheetxl/react - React - React components needed to build advanced grid and spreadsheet UIs. - v0.6.6
 *
 * (C) 2025-present SheetXL Inc. & Michael T. Ford
 * License: The license can be found at https://www.sheetxl.com/license.
 */function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ie(Object(r),!0).forEach(function(n){ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function we(e,t){if(e==null)return{};var r,n,o=function(c,a){if(c==null)return{};var f,p,j={},y=Object.keys(c);for(p=0;p<y.length;p++)f=y[p],a.indexOf(f)>=0||(j[f]=c[f]);return j}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ae(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?le(Object(r),!0).forEach(function(n){Oe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];return o.length>=e.length?e.apply(this,o):function(){for(var c=arguments.length,a=new Array(c),f=0;f<c;f++)a[f]=arguments[f];return t.apply(r,[].concat(o,a))}}}function N(e){return{}.toString.call(e).includes("Object")}function V(e){return typeof e=="function"}var E=D(function(e,t){throw new Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),q={changes:function(e,t){return N(t)||E("changeType"),Object.keys(t).some(function(r){return n=e,o=r,!Object.prototype.hasOwnProperty.call(n,o);var n,o})&&E("changeField"),t},selector:function(e){V(e)||E("selectorType")},handler:function(e){V(e)||N(e)||E("handlerType"),N(e)&&Object.values(e).some(function(t){return!V(t)})&&E("handlersType")},initial:function(e){var t;e||E("initialIsRequired"),N(e)||E("initialType"),t=e,Object.keys(t).length||E("initialContent")}};function je(e,t){return V(t)?t(e.current):t}function Me(e,t){return e.current=se(se({},e.current),t),t}function Ee(e,t,r){return V(t)?t(e.current):Object.keys(r).forEach(function(n){var o;return(o=t[n])===null||o===void 0?void 0:o.call(t,e.current[n])}),r}var Pe={create:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q.initial(e),q.handler(t);var r={current:e},n=D(Ee)(r,t),o=D(Me)(r),u=D(q.changes)(e),c=D(je)(r);return[function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return q.selector(a),a(r.current)},function(a){(function(){for(var f=arguments.length,p=new Array(f),j=0;j<f;j++)p[j]=arguments[j];return function(y){return p.reduceRight(function(k,x){return x(k)},y)}})(n,o,u,c)(a)}]}},G,ge={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},fe=(G=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return n.length>=G.length?G.apply(this,n):function(){for(var u=arguments.length,c=new Array(u),a=0;a<u;a++)c[a]=arguments[a];return e.apply(t,[].concat(n,c))}})(ge),Re={config:function(e){var t;return e||fe("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||fe("configType"),e.urls?(console.warn(ge.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function pe(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],pe(e[r],t[r]))}),ce(ce({},e),t)}var Se={type:"cancelation",msg:"operation is manually canceled"};function H(e){var t=!1,r=new Promise(function(n,o){e.then(function(u){return t?o(Se):n(u)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var J,ee,ke=Pe.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),he=(ee=2,function(e){if(Array.isArray(e))return e}(J=ke)||function(e,t){if(typeof Symbol<"u"&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,u=void 0;try{for(var c,a=e[Symbol.iterator]();!(n=(c=a.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(f){o=!0,u=f}finally{try{n||a.return==null||a.return()}finally{if(o)throw u}}return r}}(J,ee)||function(e,t){if(e){if(typeof e=="string")return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}(J,ee)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),A=he[0],U=he[1];function xe(e){return document.body.appendChild(e)}function Ie(e){var t,r,n=A(function(u){return{config:u.config,reject:u.reject}}),o=(t="".concat(n.config.paths.vs,"/loader.js"),r=document.createElement("script"),t&&(r.src=t),r);return o.onload=function(){return e()},o.onerror=n.reject,o}function Te(){var e=A(function(r){return{config:r.config,resolve:r.resolve,reject:r.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){me(r),e.resolve(r)},function(r){e.reject(r)})}function me(e){A().monaco||U({monaco:e})}var te=new Promise(function(e,t){return U({resolve:e,reject:t})}),B={config:function(e){var t=Re.config(e),r=t.monaco,n=we(t,["monaco"]);U(function(o){return{config:pe(o.config,n),monaco:r}})},init:function(){var e=A(function(t){return{monaco:t.monaco,isInitialized:t.isInitialized,resolve:t.resolve}});if(!e.isInitialized){if(U({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),H(te);if(window.monaco&&window.monaco.editor)return me(window.monaco),e.resolve(window.monaco),H(te);(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(u,c){return c(u)},o)}})(xe,Ie)(Te)}return H(te)},__getMonacoInstance:function(){return A(function(e){return e.monaco})}},re={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ce={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},De=function({children:e}){return S.createElement("div",{style:Ce.container},e)},ye=i.memo(function({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:u,wrapperProps:c}){return S.createElement("section",{style:{...re.wrapper,width:e,height:t},...c},!r&&S.createElement(De,null,n),S.createElement("div",{ref:o,style:{...re.fullWidth,...!r&&re.hide},className:u}))}),ne=function(e){i.useEffect(e,[])},O=function(e,t,r=!0){let n=i.useRef(!0);i.useEffect(n.current||!r?()=>{n.current=!1}:e,t)};function L(){}function R(e,t,r,n){return function(o,u){return o.editor.getModel(de(o,u))}(e,n)||function(o,u,c,a){return o.editor.createModel(u,c,a?de(o,a):void 0)}(e,t,r,n)}function de(e,t){return e.Uri.parse(t)}var Ve=function({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:u,modifiedModelPath:c,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:f=!1,theme:p="light",loading:j="Loading...",options:y={},height:k="100%",width:x="100%",className:W,wrapperProps:Y={},beforeMount:K=L,onMount:Q=L}){let[w,I]=i.useState(!1),[T,h]=i.useState(!0),m=i.useRef(null),d=i.useRef(null),C=i.useRef(null),b=i.useRef(Q),l=i.useRef(K),P=i.useRef(!1);ne(()=>{let s=B.init();return s.then(g=>(d.current=g)&&h(!1)).catch(g=>g?.type!=="cancelation"&&console.error("Monaco initialization: error:",g)),()=>m.current?function(){let g=m.current?.getModel();a||g?.original?.dispose(),f||g?.modified?.dispose(),m.current?.dispose()}():s.cancel()}),O(()=>{if(m.current&&d.current){let s=m.current.getOriginalEditor(),g=R(d.current,e||"",n||r||"text",u||"");g!==s.getModel()&&s.setModel(g)}},[u],w),O(()=>{if(m.current&&d.current){let s=m.current.getModifiedEditor(),g=R(d.current,t||"",o||r||"text",c||"");g!==s.getModel()&&s.setModel(g)}},[c],w),O(()=>{let s=m.current.getModifiedEditor();s.getOption(d.current.editor.EditorOption.readOnly)?s.setValue(t||""):t!==s.getValue()&&(s.executeEdits("",[{range:s.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),s.pushUndoStop())},[t],w),O(()=>{m.current?.getModel()?.original.setValue(e||"")},[e],w),O(()=>{let{original:s,modified:g}=m.current.getModel();d.current.editor.setModelLanguage(s,n||r||"text"),d.current.editor.setModelLanguage(g,o||r||"text")},[r,n,o],w),O(()=>{d.current?.editor.setTheme(p)},[p],w),O(()=>{m.current?.updateOptions(y)},[y],w);let _=i.useCallback(()=>{if(!d.current)return;l.current(d.current);let s=R(d.current,e||"",n||r||"text",u||""),g=R(d.current,t||"",o||r||"text",c||"");m.current?.setModel({original:s,modified:g})},[r,t,o,e,n,u,c]),z=i.useCallback(()=>{!P.current&&C.current&&(m.current=d.current.editor.createDiffEditor(C.current,{automaticLayout:!0,...y}),_(),d.current?.editor.setTheme(p),I(!0),P.current=!0)},[y,p,_]);return i.useEffect(()=>{w&&b.current(m.current,d.current)},[w]),i.useEffect(()=>{!T&&!w&&z()},[T,w,z]),S.createElement(ye,{width:x,height:k,isEditorReady:w,loading:j,_ref:C,className:W,wrapperProps:Y})},qe=i.memo(Ve),Fe=function(){let[e,t]=i.useState(B.__getMonacoInstance());return ne(()=>{let r;return e||(r=B.init(),r.then(n=>{t(n)})),()=>r?.cancel()}),e},Le=function(e){let t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current},F=new Map,Ae=function({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:u,theme:c="light",line:a,loading:f="Loading...",options:p={},overrideServices:j={},saveViewState:y=!0,keepCurrentModel:k=!1,width:x="100%",height:W="100%",className:Y,wrapperProps:K={},beforeMount:Q=L,onMount:w=L,onChange:I,onValidate:T=L}){let[h,m]=i.useState(!1),[d,C]=i.useState(!0),b=i.useRef(null),l=i.useRef(null),P=i.useRef(null),_=i.useRef(w),z=i.useRef(Q),s=i.useRef(),g=i.useRef(n),be=Le(u),oe=i.useRef(!1),X=i.useRef(!1);ne(()=>{let v=B.init();return v.then(M=>(b.current=M)&&C(!1)).catch(M=>M?.type!=="cancelation"&&console.error("Monaco initialization: error:",M)),()=>l.current?(s.current?.dispose(),k?y&&F.set(u,l.current.saveViewState()):l.current.getModel()?.dispose(),void l.current.dispose()):v.cancel()}),O(()=>{let v=R(b.current,e||n||"",t||o||"",u||r||"");v!==l.current?.getModel()&&(y&&F.set(be,l.current?.saveViewState()),l.current?.setModel(v),y&&l.current?.restoreViewState(F.get(u)))},[u],h),O(()=>{l.current?.updateOptions(p)},[p],h),O(()=>{!l.current||n===void 0||(l.current.getOption(b.current.editor.EditorOption.readOnly)?l.current.setValue(n):n!==l.current.getValue()&&(X.current=!0,l.current.executeEdits("",[{range:l.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),l.current.pushUndoStop(),X.current=!1))},[n],h),O(()=>{let v=l.current?.getModel();v&&o&&b.current?.editor.setModelLanguage(v,o)},[o],h),O(()=>{a!==void 0&&l.current?.revealLine(a)},[a],h),O(()=>{b.current?.editor.setTheme(c)},[c],h);let ue=i.useCallback(()=>{if(P.current&&b.current&&!oe.current){z.current(b.current);let v=u||r,M=R(b.current,n||e||"",t||o||"",v||"");l.current=b.current?.editor.create(P.current,{model:M,automaticLayout:!0,...p},j),y&&l.current.restoreViewState(F.get(v)),b.current.editor.setTheme(c),a!==void 0&&l.current.revealLine(a),m(!0),oe.current=!0}},[e,t,r,n,o,u,p,j,y,c,a]);return i.useEffect(()=>{h&&_.current(l.current,b.current)},[h]),i.useEffect(()=>{!d&&!h&&ue()},[d,h,ue]),g.current=n,i.useEffect(()=>{h&&I&&(s.current?.dispose(),s.current=l.current?.onDidChangeModelContent(v=>{X.current||I(l.current.getValue(),v)}))},[h,I]),i.useEffect(()=>{if(h){let v=b.current.editor.onDidChangeMarkers(M=>{let Z=l.current.getModel()?.uri;if(Z&&M.find($=>$.path===Z.path)){let $=b.current.editor.getModelMarkers({resource:Z});T?.($)}});return()=>{v?.dispose()}}return()=>{}},[h,T]),S.createElement(ye,{width:x,height:W,isEditorReady:h,loading:f,_ref:P,className:Y,wrapperProps:K})},_e=i.memo(Ae),Ue=_e;export{qe as DiffEditor,_e as Editor,Ue as default,B as loader,Fe as useMonaco};
