import{r as Xt}from"./iframe-CBk8unIv.js";import"./preload-helper-D9Z9MdNV.js";/**
 * @license @sheetxl/react - React - React components needed to build advanced grid and spreadsheet UIs. - v0.6.6
 *
 * (C) 2025-present SheetXL Inc. & Michael T. Ford
 * License: The license can be found at https://www.sheetxl.com/license.
 */function Yn(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return!0;return!1}function $i(e,t){for(var r=e.length,n=0;n<r;++n)if(t(e[n],n))return e[n];return null}function pi(e){var t=e;if(t===void 0){if(typeof navigator>"u"||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function yn(e,t){try{return new RegExp(e,"g").exec(t)}catch{return null}}function En(e){return e.replace(/_/g,".")}function pr(e,t){var r=null,n="-1";return Yn(e,function(i){var a=yn("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",t);return!(!a||i.brand)&&(r=i,n=a[3]||"-1",i.versionAlias?n=i.versionAlias:i.versionTest&&(n=function(o,s){var u=yn("("+o+")((?:\\/|\\s|:)([0-9|\\.|_]+))",s);return u?u[3]:""}(i.versionTest.toLowerCase(),t)||n),n=En(n),!0)}),{preset:r,version:n}}function kr(e,t){var r={brand:"",version:"-1"};return Yn(e,function(n){var i=Ji(t,n);return!!i&&(r.brand=n.id,r.version=n.versionAlias||i.version,r.version!=="-1")}),r}function Ji(e,t){return $i(e,function(r){var n=r.brand;return yn(""+t.test,n.toLowerCase())})}var di=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],hi=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],sn=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],Qi=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],gi=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function vi(e){return!!pr(Qi,e).preset}function oo(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.map(function(n){return n.split(" ").map(function(i){return i?""+e+i:""}).join(" ")}).join(" ")}function ke(e,t){return function(r){r&&(e[t]=r)}}function ta(e,t,r){return function(n){n&&(e[t][r]=n)}}var Xn="undefined",ea=typeof window!==Xn,so=typeof document!==Xn&&document,uo=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ot=1e-7,Gr={cm:function(e){return 96*e/2.54},mm:function(e){return 96*e/254},in:function(e){return 96*e},pt:function(e){return 96*e/72},pc:function(e){return 96*e/6},"%":function(e,t){return e*t/100},vw:function(e,t){return t===void 0&&(t=window.innerWidth),e/100*t},vh:function(e,t){return t===void 0&&(t=window.innerHeight),e/100*t},vmax:function(e,t){return t===void 0&&(t=Math.max(window.innerWidth,window.innerHeight)),e/100*t},vmin:function(e,t){return t===void 0&&(t=Math.min(window.innerWidth,window.innerHeight)),e/100*t}};function mi(e,t,r,n){return(e*n+t*r)/(r+n)}function Wn(e){return typeof e===Xn}function De(e){return e&&typeof e=="object"}function Wt(e){return Array.isArray(e)}function rr(e){return typeof e=="string"}function Lr(e){return typeof e=="number"}function ra(e){return typeof e=="function"}function na(e,t,r,n,i){return Sn(e,t,r)?r:function(a,o,s,u,l){for(var p,f=function(h){var g=o[h].trim();if(g===a.close&&!Sn(a,o,h))return{value:h};var v=h,m=ue(l,function(x){return x.open===g});if(m&&(v=na(m,o,h,u,l)),v===-1)return p=h,"break";p=h=v},c=s;c<u;++c){var d=f(c);if(c=p,typeof d=="object")return d.value;if(d==="break")break}return-1}(e,t,r+1,n,i)}function Sn(e,t,r){if(!e.ignore)return null;var n=t.slice(Math.max(r-3,0),r+3).join("");return new RegExp(e.ignore).exec(n)}function jn(e,t){var r=rr(t)?{separator:t}:t,n=r.separator,i=n===void 0?",":n,a=r.isSeparateFirst,o=r.isSeparateOnlyOpenClose,s=r.isSeparateOpenClose,u=s===void 0?o:s,l=r.openCloseCharacters,p=l===void 0?uo:l,f=p.map(function(b){var D=b.open,_=b.close;return D===_?D:D+"|"+_}).join("|"),c=new RegExp("(\\s*"+i+"\\s*|"+f+"|\\s+)","g"),d=e.split(c).filter(function(b){return b&&b!=="undefined"}),h=d.length,g=[],v=[];function m(){return!!v.length&&(g.push(v.join("")),v=[],!0)}for(var x,y=function(b){var D=d[b].trim(),_=b,M=ue(p,function(O){return O.open===D}),P=ue(p,function(O){return O.close===D});if(M){if((_=na(M,d,b,h,p))!==-1&&u)return m()&&a?(x=b,"break"):(g.push(d.slice(b,_+1).join("")),b=_,a?(x=b,"break"):(x=b,"continue"))}else{if(P&&!Sn(P,d,b)){var w=function(){for(var O=0,R=0,z=arguments.length;R<z;R++)O+=arguments[R].length;var k=Array(O),A=0;for(R=0;R<z;R++)for(var B=arguments[R],F=0,I=B.length;F<I;F++,A++)k[A]=B[F];return k}(p);return w.splice(p.indexOf(P),1),{value:jn(e,{separator:i,isSeparateFirst:a,isSeparateOnlyOpenClose:o,isSeparateOpenClose:u,openCloseCharacters:w})}}if(function(O,R){return(R===""||R==" ")&&(O===""||O==" ")||O===R}(D,i)&&!o)return m(),a?(x=b,"break"):(x=b,"continue")}_===-1&&(_=h-1),v.push(d.slice(b,_+1).join("")),x=b=_},E=0;E<h;++E){var S=y(E);if(E=x,typeof S=="object")return S.value;if(S==="break")break}return v.length&&g.push(v.join("")),g}function Dr(e){return jn(e,"")}function dr(e){return jn(e,",")}function en(e){var t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(e);if(!t)return{prefix:"",unit:"",value:NaN};var r=t[1],n=t[2];return{prefix:r,unit:t[3],value:parseFloat(n)}}function Vr(){return Date.now?Date.now():new Date().getTime()}function $e(e,t,r){r===void 0&&(r=-1);for(var n=e.length,i=0;i<n;++i)if(t(e[i],i,e))return i;return r}function ue(e,t,r){var n=$e(e,t);return n>-1?e[n]:r}var ia=function(){var e=Vr(),t=ea&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(r){var n=Vr();return setTimeout(function(){r(n-e)},1e3/60)}}(),lo=function(){var e=ea&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return e?e.bind(window):function(t){clearTimeout(t)}}();function wr(e){return Object.keys(e)}function $t(e,t){var r=en(e),n=r.value,i=r.unit;if(De(t)){var a=t[i];if(a){if(ra(a))return a(n);if(Gr[i])return Gr[i](n,a)}}else if(i==="%")return n*t/100;return Gr[i]?Gr[i](n):n}function Dn(e,t,r){return Math.max(t,Math.min(e,r))}function bi(e,t,r,n){return n===void 0&&(n=e[0]/e[1]),[[ct(t[0],Ot),ct(t[0]/n,Ot)],[ct(t[1]*n,Ot),ct(t[1],Ot)]].filter(function(i){return i.every(function(a,o){var s=t[o],u=ct(s,Ot);return r?a<=s||a<=u:a>=s||a>=u})})[0]||e}function wn(e){for(var t=e.length,r=0,n=t-1;n>=0;--n)r+=e[n];return t?r/t:0}function se(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=Math.atan2(n,r);return i>=0?i:i+2*Math.PI}function xi(e){var t=function(i){return[0,1].map(function(a){return wn(i.map(function(o){return o[a]}))})}(e),r=se(t,e[0]),n=se(t,e[1]);return r<n&&n-r<Math.PI||r>n&&n-r<-Math.PI?1:-1}function hr(e,t){return Math.sqrt(Math.pow((t?t[0]:0)-e[0],2)+Math.pow((t?t[1]:0)-e[1],2))}function ct(e,t){if(!t)return e;var r=1/t;return Math.round(e/t)/r}function yi(e,t){return e.forEach(function(r,n){e[n]=ct(e[n],t)}),e}function xe(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function aa(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function oa(e,t){if(e.classList)e.classList.remove(t);else{var r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}}function It(e,t,r,n){e.addEventListener(t,r,n)}function zt(e,t,r,n){e.removeEventListener(t,r,n)}function Ln(e){return e?.ownerDocument||so}function Vn(e){return Ln(e).documentElement}function Re(e){return Ln(e).body}function Te(e){var t;return((t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}function sa(e){return e&&"postMessage"in e&&"blur"in e&&"self"in e}function Un(e){return De(e)&&e.nodeName&&e.nodeType&&"ownerDocument"in e}function fo(e,t,r,n,i,a){for(var o=0;o<i;++o){var s=r+o*i,u=n+o*i;e[s]+=e[u]*a,t[s]+=t[u]*a}}function co(e,t,r,n,i){for(var a=0;a<i;++a){var o=r+a*i,s=n+a*i,u=e[o],l=t[o];e[o]=e[s],e[s]=u,t[o]=t[s],t[s]=l}}function po(e,t,r,n,i){for(var a=0;a<n;++a){var o=r+a*n;e[o]/=i,t[o]/=i}}function Ge(e,t){t===void 0&&(t=Math.sqrt(e.length));for(var r=e.slice(),n=bt(t),i=0;i<t;++i){var a=t*i+i;if(!ct(r[a],Ot)){for(var o=i+1;o<t;++o)if(r[t*i+o]){co(r,n,i,o,t);break}}if(!ct(r[a],Ot))return[];for(po(r,n,i,t,r[a]),o=0;o<t;++o){var s=o,u=r[o+i*t];ct(u,Ot)&&i!==o&&fo(r,n,s,i,t,-u)}}return n}function Tr(e,t){for(var r=e.slice(),n=e.length;n<t-1;++n)r[n]=0;return r[t-1]=1,r}function Be(e,t,r){if(t===void 0&&(t=Math.sqrt(e.length)),t===r)return e;for(var n=bt(r),i=Math.min(t,r),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)n[a*r+o]=e[a*t+o];n[(a+1)*r-1]=e[(a+1)*t-1],n[(r-1)*r+a]=e[(t-1)*t+a]}return n[r*r-1]=e[t*t-1],n}function Ur(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=bt(e);return t.forEach(function(i){n=Tt(n,i,e)}),n}function Tt(e,t,r){r===void 0&&(r=Math.sqrt(e.length));var n=[],i=e.length/r,a=t.length/i;if(!i)return t;if(!a)return e;for(var o=0;o<r;++o)for(var s=0;s<a;++s){n[s*r+o]=0;for(var u=0;u<i;++u)n[s*r+o]+=e[u*r+o]*t[s*i+u]}return n}function St(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]+t[i];return n}function et(e,t){for(var r=Math.min(e.length,t.length),n=e.slice(),i=0;i<r;++i)n[i]=n[i]-t[i];return n}function ho(e,t){return t===void 0&&(t=e.length===6),t?[e[0],e[1],0,e[2],e[3],0,e[4],e[5],1]:e}function ua(e,t){return t===void 0&&(t=e.length===9),t?[e[0],e[1],e[3],e[4],e[6],e[7]]:e}function ge(e,t,r){r===void 0&&(r=t.length);var n=Tt(e,t,r),i=n[r-1];return n.map(function(a){return a/i})}function go(e,t){return Tt(e,[1,0,0,0,0,Math.cos(t),Math.sin(t),0,0,-Math.sin(t),Math.cos(t),0,0,0,0,1],4)}function vo(e,t){return Tt(e,[Math.cos(t),0,-Math.sin(t),0,0,1,0,0,Math.sin(t),0,Math.cos(t),0,0,0,0,1],4)}function mo(e,t){return Tt(e,rn(t,4))}function Br(e,t){var r=t[0],n=r===void 0?1:r,i=t[1],a=i===void 0?1:i,o=t[2];return Tt(e,[n,0,0,0,0,a,0,0,0,0,o===void 0?1:o,0,0,0,0,1],4)}function un(e,t){var r=t[0],n=r===void 0?0:r,i=t[1],a=i===void 0?0:i,o=t[2];return Tt(e,[1,0,0,0,0,1,0,0,0,0,1,0,n,a,o===void 0?0:o,1],4)}function Ei(e,t){return Tt(e,t,4)}function rn(e,t){var r=Math.cos(e),n=Math.sin(e),i=bt(t);return i[0]=r,i[1]=n,i[t]=-n,i[t+1]=r,i}function bt(e){for(var t=e*e,r=[],n=0;n<t;++n)r[n]=n%(e+1)?0:1;return r}function la(e,t){for(var r=bt(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[(t+1)*i]=e[i];return r}function Ie(e,t){for(var r=bt(t),n=Math.min(e.length,t-1),i=0;i<n;++i)r[t*(t-1)+i]=e[i];return r}function fa(e,t,r,n,i,a,o,s){var u=e[0],l=e[1],p=t[0],f=t[1],c=r[0],d=r[1],h=n[0],g=n[1],v=i[0],m=i[1],x=a[0],y=a[1],E=o[0],S=o[1],b=s[0],D=s[1],_=Ge([u,0,p,0,c,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,p,0,c,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-x*p,-y*p,-E*c,-S*c,-b*h,-D*h,-v*l,-m*l,-x*f,-y*f,-E*d,-S*d,-b*g,-D*g],8);if(!_.length)return[];var M=Tt(_,[v,m,x,y,E,S,b,D],8);return M[8]=1,Be(function(P,w){w===void 0&&(w=Math.sqrt(P.length));for(var O=[],R=0;R<w;++R)for(var z=0;z<w;++z)O[z*w+R]=P[w*R+z];return O}(M),3,4)}var gr=function(){return gr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gr.apply(this,arguments)};function Zn(e,t){return t===void 0&&(t=0),Ye(Je(e,t))}function Ye(e){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return e.forEach(function(r){var n=r.matrixFunction,i=r.functionValue;n&&(t=n(t,i))}),t}function Je(e,t){return t===void 0&&(t=0),(Wt(e)?e:Dr(e)).map(function(r){var n,i=!(n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(r))||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]},a=i.prefix,o=i.value,s=null,u=a,l="";if(a==="translate"||a==="translateX"||a==="translate3d"){var p=De(t)?gr(gr({},t),{"o%":t["%"]}):{"%":t,"o%":t},f=dr(o).map(function(M,P){return p["%"]=P===0&&"x%"in p?t["x%"]:P===1&&"y%"in p?t["y%"]:t["o%"],$t(M,p)}),c=f[0],d=f[1],h=d===void 0?0:d,g=f[2];s=un,l=[c,h,g===void 0?0:g]}else if(a==="translateY")s=un,l=[0,h=$t(o,De(t)?gr({"%":t["y%"]},t):{"%":t}),0];else if(a==="translateZ")s=un,l=[0,0,parseFloat(o)];else if(a==="scale"||a==="scale3d"){var v=dr(o).map(function(M){return parseFloat(M)}),m=v[0],x=v[1],y=x===void 0?m:x,E=v[2];s=Br,l=[m,y,E===void 0?1:E]}else if(a==="scaleX")s=Br,l=[m=parseFloat(o),1,1];else if(a==="scaleY")s=Br,l=[1,y=parseFloat(o),1];else if(a==="scaleZ")s=Br,l=[1,1,parseFloat(o)];else if(a==="rotate"||a==="rotateZ"||a==="rotateX"||a==="rotateY"){var S=en(o),b=S.unit,D=S.value;a==="rotate"||a==="rotateZ"?(u="rotateZ",s=mo):a==="rotateX"?s=go:a==="rotateY"&&(s=vo),l=b==="rad"?D:D*Math.PI/180}else if(a==="matrix3d")s=Ei,l=dr(o).map(function(M){return parseFloat(M)});else if(a==="matrix"){var _=dr(o).map(function(M){return parseFloat(M)});s=Ei,l=[_[0],_[1],0,0,_[2],_[3],0,0,0,0,1,0,_[4],_[5],0,1]}else u="";return{name:a,functionName:u,value:o,matrixFunction:s,functionValue:l}})}var bo=function(){function e(){this.keys=[],this.values=[]}var t=e.prototype;return t.get=function(r){return this.values[this.keys.indexOf(r)]},t.set=function(r,n){var i=this.keys,a=this.values,o=i.indexOf(r),s=o===-1?i.length:o;i[s]=r,a[s]=n},e}(),xo=function(){function e(){this.object={}}var t=e.prototype;return t.get=function(r){return this.object[r]},t.set=function(r,n){this.object[r]=n},e}(),yo=typeof Map=="function",Eo=function(){function e(){}var t=e.prototype;return t.connect=function(r,n){this.prev=r,this.next=n,r&&(r.next=this),n&&(n.prev=this)},t.disconnect=function(){var r=this.prev,n=this.next;r&&(r.next=n),n&&(n.prev=r)},t.getIndex=function(){for(var r=this,n=-1;r;)r=r.prev,++n;return n},e}(),So=function(){function e(r,n,i,a,o,s,u,l){this.prevList=r,this.list=n,this.added=i,this.removed=a,this.changed=o,this.maintained=s,this.changedBeforeAdded=u,this.fixed=l}var t=e.prototype;return Object.defineProperty(t,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),t.caculateOrdered=function(){var r=function(a,o){var s=[],u=[];return a.forEach(function(l){var p=l[0],f=l[1],c=new Eo;s[p]=c,u[f]=c}),s.forEach(function(l,p){l.connect(s[p-1])}),a.filter(function(l,p){return!o[p]}).map(function(l,p){var f=l[0],c=l[1];if(f===c)return[0,0];var d=s[f],h=u[c-1],g=d.getIndex();return d.disconnect(),h?d.connect(h,h.next):d.connect(void 0,s[0]),[g,d.getIndex()]})}(this.changedBeforeAdded,this.fixed),n=this.changed,i=[];this.cacheOrdered=r.filter(function(a,o){var s=a[0],u=a[1],l=n[o],p=l[0],f=l[1];if(s!==u)return i.push([p,f]),!0}),this.cachePureChanged=i},e}();function ca(e,t,r){var n=yo?Map:r?xo:bo,i=r||function(x){return x},a=[],o=[],s=[],u=e.map(i),l=t.map(i),p=new n,f=new n,c=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(x,y){p.set(x,y)}),l.forEach(function(x,y){f.set(x,y)}),u.forEach(function(x,y){var E=f.get(x);E===void 0?(++m,o.push(y)):h[E]=m}),l.forEach(function(x,y){var E=p.get(x);E===void 0?(a.push(y),++v):(s.push([E,y]),m=h[y]||0,c.push([E-m,y-v]),d.push(y===E),E!==y&&g.push([E,y]))}),o.reverse(),new So(e,t,a,o,g,s,c,d)}var Do=function(){function e(t,r){t===void 0&&(t=[]),this.findKeyCallback=r,this.list=[].slice.call(t)}return e.prototype.update=function(t){var r=[].slice.call(t),n=ca(this.list,r,this.findKeyCallback);return this.list=r,n},e}(),Mn=function(e,t){return Mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Mn(e,t)},Si,wo=typeof Map=="function"?void 0:(Si=0,function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++Si)}),pa=function(e){function t(r){return r===void 0&&(r=[]),e.call(this,r,wo)||this}return function(r,n){function i(){this.constructor=r}Mn(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(t,e),t}(Do),Cn=function(){return Cn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Cn.apply(this,arguments)},da=function(){function e(){this._events={}}var t=e.prototype;return t.on=function(r,n){if(De(r))for(var i in r)this.on(i,r[i]);else this._addEvent(r,n,{});return this},t.off=function(r,n){if(r)if(De(r))for(var i in r)this.off(i);else if(n){var a=this._events[r];if(a){var o=$e(a,function(s){return s.listener===n});o>-1&&a.splice(o,1)}}else this._events[r]=[];else this._events={};return this},t.once=function(r,n){var i=this;return n&&this._addEvent(r,n,{once:!0}),new Promise(function(a){i._addEvent(r,a,{once:!0})})},t.emit=function(r,n){var i=this;n===void 0&&(n={});var a=this._events[r];if(!r||!a)return!0;var o=!1;return n.eventType=r,n.stop=function(){o=!0},n.currentTarget=this,function(){for(var s=0,u=0,l=arguments.length;u<l;u++)s+=arguments[u].length;var p=Array(s),f=0;for(u=0;u<l;u++)for(var c=arguments[u],d=0,h=c.length;d<h;d++,f++)p[f]=c[d];return p}(a).forEach(function(s){s.listener(n),s.once&&i.off(r,s.listener)}),!o},t.trigger=function(r,n){return n===void 0&&(n={}),this.emit(r,n)},t._addEvent=function(r,n,i){var a=this._events;a[r]=a[r]||[],a[r].push(Cn({listener:n},i))},e}();function Kt(e){return ct(e,Ot)}function Di(e){return e.length<3?0:Math.abs(function(t){for(var r=0,n=t.length-1;n>=0;--n)r+=t[n];return r}(e.map(function(t,r){var n=e[r+1]||e[0];return t[0]*n[1]-n[0]*t[1]})))/2}function wi(e,t){var r=t.width,n=t.height,i=t.left,a=t.top,o=Ve(e),s=o.minX,u=o.minY,l=o.maxX,p=o.maxY,f=r/(l-s),c=n/(p-u);return e.map(function(d){return[i+(d[0]-s)*f,a+(d[1]-u)*c]})}function Ve(e){var t=e.map(function(n){return n[0]}),r=e.map(function(n){return n[1]});return{minX:Math.min.apply(Math,t),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,t),maxY:Math.max.apply(Math,r)}}function _n(e,t,r){var n=e[0],i=e[1],a=Ve(t),o=a.minX,s=a.maxX,u=[[o,i],[s,i]],l=Zr(u[0],u[1]),p=On(t),f=[];if(p.forEach(function(h){var g,v=Zr(h[0],h[1]),m=h[0];g=v,l.every(function(x,y){return Kt(x-g[y])===0})?f.push({pos:e,line:h,type:"line"}):ha(Kn(l,v),[u,h]).forEach(function(x){h.some(function(y){return S=x,!Kt((E=y)[0]-S[0])&&!Kt(E[1]-S[1]);var E,S})?f.push({pos:x,line:h,type:"point"}):Kt(m[1]-i)!==0&&f.push({pos:x,line:h,type:"intersection"})})}),ue(f,function(h){return h[0]===n}))return!0;var c=0,d={};return f.forEach(function(h){var g=h.pos,v=h.type,m=h.line;if(!(g[0]>n))if(v==="intersection")++c;else{if(v==="line")return;if(v==="point"){var x=ue(m,function(S){return S[1]!==i}),y=d[g[0]],E=x[1]>i?1:-1;y?y!==E&&++c:d[g[0]]=E}}}),c%2==1}function Zr(e,t){var r=e[0],n=e[1],i=t[0]-r,a=t[1]-n;Math.abs(i)<Ot&&(i=0),Math.abs(a)<Ot&&(a=0);var o=0,s=0,u=0;return i?a?(s=1,u=-(o=-a/i)*r-n):(s=1,u=-n):a&&(o=-1,u=r),[o,s,u]}function Kn(e,t){var r=e[0],n=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=r===0&&a===0,l=n===0&&o===0,p=[];if(u&&l)return[];if(u){var f=-i/n;return f!==-s/o?[]:[[-1/0,f],[1/0,f]]}if(l){var c=-i/r;return c!==-s/a?[]:[[c,-1/0],[c,1/0]]}if(r===0)p=[[d=-(o*(h=-i/n)+s)/a,h]];else if(a===0)p=[[d=-(n*(h=-s/o)+i)/r,h]];else if(n===0)p=[[d=-i/r,h=-(a*d+s)/o]];else if(o===0)p=[[d=-s/a,h=-(r*d+i)/n]];else{var d,h;p=[[d=(n*s-o*i)/(o*r-n*a),h=-(r*d+i)/n]]}return p.map(function(g){return[g[0],g[1]]})}function ha(e,t){var r=t.map(function(f){return[0,1].map(function(c){return[Math.min(f[0][c],f[1][c]),Math.max(f[0][c],f[1][c])]})}),n=[];if(e.length===2){var i=e[0],a=i[0],o=i[1];if(Kt(a-e[1][0])){if(!Kt(o-e[1][1])){var s=Math.max.apply(Math,r.map(function(f){return f[0][0]})),u=Math.min.apply(Math,r.map(function(f){return f[0][1]}));if(Kt(s-u)>0)return[];n=[[s,o],[u,o]]}}else{var l=Math.max.apply(Math,r.map(function(f){return f[1][0]})),p=Math.min.apply(Math,r.map(function(f){return f[1][1]}));if(Kt(l-p)>0)return[];n=[[a,l],[a,p]]}}return n.length||(n=e.filter(function(f){var c=f[0],d=f[1];return r.every(function(h){return 0<=Kt(c-h[0][0])&&0<=Kt(h[0][1]-c)&&0<=Kt(d-h[1][0])&&0<=Kt(h[1][1]-d)})})),n.map(function(f){return[Kt(f[0]),Kt(f[1])]})}function On(e){return function(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;var i=Array(t),a=0;for(r=0;r<n;r++)for(var o=arguments[r],s=0,u=o.length;s<u;s++,a++)i[a]=o[s];return i}(e.slice(1),[e[0]]).map(function(t,r){return[e[r],t]})}function Mo(e,t){var r=function(n,i){var a=n.slice(),o=i.slice();xi(a)===-1&&a.reverse(),xi(o)===-1&&o.reverse();var s=On(a),u=On(o),l=s.map(function(d){return Zr(d[0],d[1])}),p=u.map(function(d){return Zr(d[0],d[1])}),f=[];l.forEach(function(d,h){var g=s[h],v=[];p.forEach(function(m,x){var y=ha(Kn(d,m),[g,u[x]]);v.push.apply(v,y.map(function(E){return{index1:h,index2:x,pos:E,type:"intersection"}}))}),v.sort(function(m,x){return hr(g[0],m.pos)-hr(g[0],x.pos)}),f.push.apply(f,v),_n(g[1],o)&&f.push({index1:h,index2:-1,pos:g[1],type:"inside"})}),u.forEach(function(d,h){if(_n(d[1],a)){var g=!1,v=$e(f,function(m){return m.index2===h?(g=!0,!1):!!g});v===-1&&(g=!1,v=$e(f,function(m){var x=m.index1,y=m.index2;return x===-1&&y+1===h?(g=!0,!1):!!g})),v===-1?f.push({index1:-1,index2:h,pos:d[1],type:"inside"}):f.splice(v,0,{index1:-1,index2:h,pos:d[1],type:"inside"})}});var c={};return f.filter(function(d){var h=d.pos,g=h[0]+"x"+h[1];return!c[g]&&(c[g]=!0,!0)})}(e,t);return r.map(function(n){return n.pos})}var Tn=function(e,t){return Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Tn(e,t)},_t=function(){return _t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_t.apply(this,arguments)};function ln(e){return 180*(t=[e[0].clientX,e[0].clientY],r=[e[1].clientX,e[1].clientY],n=r[0]-t[0],i=r[1]-t[1],((a=Math.atan2(i,n))>=0?a:a+2*Math.PI)/Math.PI);var t,r,n,i,a}function Ir(e){return e?e.touches?function(t){for(var r=Math.min(t.length,2),n=[],i=0;i<r;++i)n.push(Ci(t[i]));return n}(e.touches):[Ci(e)]:[]}function Mi(e,t,r){var n=r.length,i=vr(e,n),a=i.clientX,o=i.clientY,s=i.originalClientX,u=i.originalClientY,l=vr(t,n),p=l.clientX,f=l.clientY,c=vr(r,n);return{clientX:s,clientY:u,deltaX:a-p,deltaY:o-f,distX:a-c.clientX,distY:o-c.clientY}}function fn(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))}function Ci(e){return{clientX:e.clientX,clientY:e.clientY}}function vr(e,t){t===void 0&&(t=e.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},n=Math.min(e.length,t),i=0;i<n;++i){var a=e[i];r.originalClientX+="originalClientX"in a?a.originalClientX:a.clientX,r.originalClientY+="originalClientY"in a?a.originalClientY:a.clientY,r.clientX+=a.clientX,r.clientY+=a.clientY}return t?{clientX:r.clientX/t,clientY:r.clientY/t,originalClientX:r.originalClientX/t,originalClientY:r.originalClientY/t}:r}var cn=function(){function e(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return e.prototype.getAngle=function(t){return t===void 0&&(t=this.prevClients),ln(t)},e.prototype.getRotation=function(t){return t===void 0&&(t=this.prevClients),ln(t)-ln(this.startClients)},e.prototype.getPosition=function(t,r){t===void 0&&(t=this.prevClients);var n=Mi(t||this.prevClients,this.prevClients,this.startClients),i=n.deltaX,a=n.deltaY;return this.movement+=Math.sqrt(i*i+a*a),this.prevClients=t,n},e.prototype.getPositions=function(t){t===void 0&&(t=this.prevClients);for(var r=this.prevClients,n=this.startClients,i=Math.min(this.length,r.length),a=[],o=0;o<i;++o)a[o]=Mi([t[o]],[r[o]],[n[o]]);return a},e.prototype.getMovement=function(t){var r=this.movement;if(!t)return r;var n=vr(t,this.length),i=vr(this.prevClients,this.length),a=n.clientX-i.clientX,o=n.clientY-i.clientY;return Math.sqrt(a*a+o*o)+r},e.prototype.getDistance=function(t){return t===void 0&&(t=this.prevClients),fn(t)},e.prototype.getScale=function(t){return t===void 0&&(t=this.prevClients),fn(t)/fn(this.startClients)},e.prototype.move=function(t,r){this.startClients.forEach(function(n){n.clientX-=t,n.clientY-=r}),this.prevClients.forEach(function(n){n.clientX-=t,n.clientY-=r})},e}(),_i=["textarea","input"],Co=function(e){function t(r,n){n===void 0&&(n={});var i=e.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(c,d){if(d===void 0&&(d=!0),i.flag||c.cancelable!==!1){var h=c.type.indexOf("drag")>=-1;if(!i.flag||!h){i._isDragAPI=!0;var g=i.options,v=g.container,m=g.pinchOutside,x=g.preventWheelClick,y=g.preventRightClick,E=g.preventDefault,S=g.checkInput,b=g.dragFocusedInput,D=g.preventClickEventOnDragStart,_=g.preventClickEventOnDrag,M=g.preventClickEventByCondition,P=i._useTouch,w=!i.flag;if(i._isSecondaryButton=c.which===3||c.button===2,x&&(c.which===2||c.button===1)||y&&(c.which===3||c.button===2))return i.stop(),!1;if(w){var O=i._window.document.activeElement,R=c.target;if(R){var z=R.tagName.toLowerCase(),k=_i.indexOf(z)>-1,A=R.isContentEditable;if(k||A){if(S||!b&&O===R)return!1;if(O&&(O===R||A&&O.isContentEditable&&O.contains(R))){if(!b)return!1;R.blur()}}else if((E||c.type==="touchstart")&&O){var B=O.tagName.toLowerCase();(O.isContentEditable||_i.indexOf(B)>-1)&&O.blur()}(D||_||M)&&It(i._window,"click",i._onClick,!0)}i.clientStores=[new cn(Ir(c))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=d,i._dragFlag=!0,i._prevInputEvent=c,i.data={},i.doubleFlag=Vr()-i.prevTime<200,i._isMouseEvent=function(I){return I&&(I.type.indexOf("mouse")>-1||"button"in I)}(c),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent(),(i._preventMouseEvent||i.emit("dragStart",_t(_t({data:i.data,datas:i.data,inputEvent:c,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:d,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){c.preventDefault()},preventDrag:function(){i._dragFlag=!1}})))===!1&&i.stop(),i._isMouseEvent&&i.flag&&E&&c.preventDefault()}if(!i.flag)return!1;var F=0;if(w?(i._attchDragEvent(),P&&m&&(F=setTimeout(function(){It(v,"touchstart",i.onDragStart,{passive:!1})}))):P&&m&&zt(v,"touchstart",i.onDragStart),i.flag&&function(I){return I.touches&&I.touches.length>=2}(c)){if(clearTimeout(F),w&&c.touches.length!==c.changedTouches.length)return;i.pinchFlag||i.onPinchStart(c)}}}},i.onDrag=function(c,d){if(i.flag){var h=i.options.preventDefault;!i._isMouseEvent&&h&&c.preventDefault(),i._prevInputEvent=c;var g=Ir(c),v=i.moveClients(g,c,!1);if(i._dragFlag){if((i.pinchFlag||v.deltaX||v.deltaY)&&(i._preventMouseEvent||i.emit("drag",_t(_t({},v),{isScroll:!!d,inputEvent:c})))===!1)return void i.stop();i.pinchFlag&&i.onPinch(c,g)}i.getCurrentStore().getPosition(g,!0)}},i.onDragEnd=function(c){if(i.flag){var d=i.options,h=d.pinchOutside,g=d.container,v=d.preventClickEventOnDrag,m=d.preventClickEventOnDragStart,x=d.preventClickEventByCondition,y=i.isDrag;(v||m||x)&&requestAnimationFrame(function(){i._allowClickEvent()}),x||m||!v||y||i._allowClickEvent(),i._useTouch&&h&&zt(g,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(c);var E=c?.touches?Ir(c):[];E.length!==0&&i.options.keepDragging?i._addStore(new cn(E)):i.flag=!1;var S=i._getPosition(),b=Vr(),D=!y&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=y||D?0:b,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",_t({data:i.data,datas:i.data,isDouble:D,isDrag:y,isClick:!y,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:c,isTrusted:i._isTrusted},S)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){zt(i._window,"click",i._onClick,!0)},i._onClick=function(c){i._allowClickEvent(),i._allowMouseEvent();var d=i.options.preventClickEventByCondition;d?.(c)||(c.stopPropagation(),c.preventDefault())},i._onContextMenu=function(c){i.options.preventRightClick?i.onDragEnd(c):c.preventDefault()},i._passCallback=function(){};var a=[].concat(r),o=a[0];i._window=sa(o)?o:Te(o),i.options=_t({checkInput:!1,container:o&&!("document"in o)?Te(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},n);var s=i.options,u=s.container,l=s.events,p=s.checkWindowBlur;if(i._useDrag=l.indexOf("drag")>-1,i._useTouch=l.indexOf("touch")>-1,i._useMouse=l.indexOf("mouse")>-1,i.targets=a,i._useDrag&&a.forEach(function(c){It(c,"dragstart",i.onDragStart)}),i._useMouse&&(a.forEach(function(c){It(c,"mousedown",i.onDragStart),It(c,"mousemove",i._passCallback)}),It(u,"contextmenu",i._onContextMenu)),p&&It(Te(),"blur",i.onBlur),i._useTouch){var f={passive:!1};a.forEach(function(c){It(c,"touchstart",i.onDragStart,f),It(c,"touchmove",i._passCallback,f)})}return i}return function(r,n){function i(){this.constructor=r}Tn(r,n),r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}(t,e),t.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},t.prototype.getMovement=function(r){return this.getCurrentStore().getMovement(r)+this.clientStores.slice(1).reduce(function(n,i){return n+i.movement},0)},t.prototype.isDragging=function(){return this.isDrag},t.prototype.isIdle=function(){return this._isIdle},t.prototype.isFlag=function(){return this.flag},t.prototype.isPinchFlag=function(){return this.pinchFlag},t.prototype.isDoubleFlag=function(){return this.doubleFlag},t.prototype.isPinching=function(){return this.isPinch},t.prototype.scrollBy=function(r,n,i,a){a===void 0&&(a=!0),this.flag&&(this.clientStores[0].move(r,n),a&&this.onDrag(i,!0))},t.prototype.move=function(r,n){var i=r[0],a=r[1],o=this.getCurrentStore().prevClients;return this.moveClients(o.map(function(s){var u=s.clientX,l=s.clientY;return{clientX:u+i,clientY:l+a,originalClientX:u,originalClientY:l}}),n,!0)},t.prototype.triggerDragStart=function(r){this.onDragStart(r,!1)},t.prototype.setEventData=function(r){var n=this.data;for(var i in r)n[i]=r[i];return this},t.prototype.setEventDatas=function(r){return this.setEventData(r)},t.prototype.getCurrentEvent=function(r){return r===void 0&&(r=this._prevInputEvent),_t(_t({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:r})},t.prototype.getEventData=function(){return this.data},t.prototype.getEventDatas=function(){return this.data},t.prototype.unset=function(){var r=this,n=this.targets,i=this.options.container;this.off(),zt(this._window,"blur",this.onBlur),this._useDrag&&n.forEach(function(a){zt(a,"dragstart",r.onDragStart)}),this._useMouse&&(n.forEach(function(a){zt(a,"mousedown",r.onDragStart)}),zt(i,"contextmenu",this._onContextMenu)),this._useTouch&&(n.forEach(function(a){zt(a,"touchstart",r.onDragStart)}),zt(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},t.prototype.onPinchStart=function(r){var n=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var a=new cn(Ir(r));this.pinchFlag=!0,this._addStore(a),this.emit("pinchStart",_t(_t({data:this.data,datas:this.data,angle:a.getAngle(),touches:this.getCurrentStore().getPositions()},a.getPosition()),{inputEvent:r,isTrusted:this._isTrusted,preventDefault:function(){r.preventDefault()},preventDrag:function(){n._dragFlag=!1}}))===!1&&(this.pinchFlag=!1)}},t.prototype.onPinch=function(r,n){if(this.flag&&this.pinchFlag&&!(n.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",_t(_t({data:this.data,datas:this.data,movement:this.getMovement(n),angle:i.getAngle(n),rotation:i.getRotation(n),touches:i.getPositions(n),scale:i.getScale(n),distance:i.getDistance(n)},i.getPosition(n)),{inputEvent:r,isTrusted:this._isTrusted}))}},t.prototype.onPinchEnd=function(r){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",_t(_t({data:this.data,datas:this.data,isPinch:n,touches:i.getPositions()},i.getPosition()),{inputEvent:r}))}},t.prototype.getCurrentStore=function(){return this.clientStores[0]},t.prototype.moveClients=function(r,n,i){var a=this._getPosition(r,i),o=this.isDrag;(a.deltaX||a.deltaY)&&(this.isDrag=!0);var s=!1;return!o&&this.isDrag&&(s=!0),_t(_t({data:this.data,datas:this.data},a),{movement:this.getMovement(r),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:n,isTrusted:this._isTrusted,isFirstDrag:s})},t.prototype._addStore=function(r){this.clientStores.splice(0,0,r)},t.prototype._getPosition=function(r,n){var i=this.getCurrentStore().getPosition(r,n),a=this.clientStores.slice(1).reduce(function(u,l){var p=l.getPosition();return u.distX+=p.distX,u.distY+=p.distY,u},i),o=a.distX,s=a.distY;return _t(_t({},i),{distX:o,distY:s})},t.prototype._attchDragEvent=function(){var r=this._window,n=this.options.container,i={passive:!1};this._isDragAPI&&(It(n,"dragover",this.onDrag,i),It(r,"dragend",this.onDragEnd)),this._useMouse&&(It(n,"mousemove",this.onDrag),It(r,"mouseup",this.onDragEnd)),this._useTouch&&(It(n,"touchmove",this.onDrag,i),It(r,"touchend",this.onDragEnd,i),It(r,"touchcancel",this.onDragEnd,i))},t.prototype._dettachDragEvent=function(){var r=this._window,n=this.options.container;this._isDragAPI&&(zt(n,"dragover",this.onDrag),zt(r,"dragend",this.onDragEnd)),this._useMouse&&(zt(n,"mousemove",this.onDrag),zt(r,"mouseup",this.onDragEnd)),this._useTouch&&(zt(n,"touchstart",this.onDragStart),zt(n,"touchmove",this.onDrag),zt(r,"touchend",this.onDragEnd),zt(r,"touchcancel",this.onDragEnd))},t.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},t}(da),_o=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0};function Oo(e,t,r,n,i){var a=Ln(n),o=a.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",e),o.setAttribute("data-styled-count","1"),r.nonce&&o.setAttribute("nonce",r.nonce),o.innerHTML=function(s,u,l){return l.original?u:u.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(p,f){var c=f.trim();return(c?dr(c):[""]).map(function(d){var h=d.trim();return h.indexOf("@")===0?h:h.indexOf(":global")>-1?h.replace(/\:global/g,""):h.indexOf(":host")>-1?"".concat(h.replace(/\:host/g,".".concat(s))):h?".".concat(s," ").concat(h):".".concat(s)}).join(", ")+" {"})}(e,t,r),(i||a.head||a.body).appendChild(o),o}function To(e){var t="rCS"+_o(e).toString(36);return{className:t,inject:function(r,n){n===void 0&&(n={});var i=function(s){if(s&&s.getRootNode){var u=s.getRootNode();if(u.nodeType===11)return u}}(r),a=(i||r.ownerDocument||document).querySelector('style[data-styled-id="'.concat(t,'"]'));if(a){var o=parseFloat(a.getAttribute("data-styled-count"))||0;a.setAttribute("data-styled-count","".concat(o+1))}else a=Oo(t,e,n,r,i);return{destroy:function(){var s,u=parseFloat(a.getAttribute("data-styled-count"))||0;u<=1?(a.remove?a.remove():(s=a.parentNode)===null||s===void 0||s.removeChild(a),a=null):a.setAttribute("data-styled-count","".concat(u-1))}}}}}var Pn=function(){return Pn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pn.apply(this,arguments)};function ga(e,t){var r=To(t),n=r.className;return Xt.forwardRef(function(i,a){var o=i.className,s=o===void 0?"":o;i.cspNonce;var u=function(p,f){var c={};for(var d in p)Object.prototype.hasOwnProperty.call(p,d)&&f.indexOf(d)<0&&(c[d]=p[d]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(d=Object.getOwnPropertySymbols(p);h<d.length;h++)f.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(p,d[h])&&(c[d[h]]=p[d[h]])}return c}(i,["className","cspNonce"]),l=Xt.useRef();return Xt.useImperativeHandle(a,function(){return l.current},[]),Xt.useEffect(function(){var p=r.inject(l.current,{nonce:i.cspNonce});return function(){p.destroy()}},[]),Xt.createElement(e,Pn({ref:l,"data-styled-id":n,className:"".concat(s," ").concat(n)},u))})}var Rn=function(e,t){return Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Rn(e,t)};function Pr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Rn(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var C=function(){return C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},C.apply(this,arguments)};function T(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(t===void 0||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function W(e,t,r){if(arguments.length===2)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function Mr(e,t){return C({events:[],props:[],name:e},t)}var Po=["n","w","s","e"],$n=["n","w","s","e","nw","ne","sw","se"],Ro,Oi,Ti,nr=function(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var e=navigator.userAgentData,t=e.brands||e.uaList;return!(!t||!t.length)}()?function(e){var t=navigator.userAgentData,r=(t.uaList||t.brands).slice(),n=t.mobile||!1,i=r[0],a=(t.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!kr(Qi,r).brand||vi(pi())},s={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Yn(sn,function(c){return Ji(r,c)});var u=kr(hi,r);if(o.chromium=!!u.brand,o.chromiumVersion=u.version||"-1",!o.chromium){var l=kr(sn,r);o.webkit=!!l.brand,o.webkitVersion=l.version||"-1"}var p=$i(gi,function(c){return new RegExp(""+c.test,"g").exec(a)});s.name=p?p.id:"";var f=kr(di,r);return o.name=f.brand||o.name,o.version=f.brand&&e?e.uaFullVersion:f.version,o.webkit&&(s.name=n?"ios":"mac"),s.name==="ios"&&o.webview&&(o.version="-1"),s.version=En(s.version),o.version=En(o.version),s.majorVersion=parseInt(s.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:s,isMobile:n,isHints:!0}}():function(e){var t=pi(e),r=!!/mobi/g.exec(t),n={name:"unknown",version:"-1",majorVersion:-1,webview:vi(t),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},a=pr(di,t),o=a.preset,s=a.version,u=pr(gi,t),l=u.preset,p=u.version,f=pr(hi,t);if(n.chromium=!!f.preset,n.chromiumVersion=f.version,!n.chromium){var c=pr(sn,t);n.webkit=!!c.preset,n.webkitVersion=c.version}return l&&(i.name=l.id,i.version=p,i.majorVersion=parseInt(p,10)),o&&(n.name=o.id,n.version=s,n.webview&&i.name==="ios"&&n.name!=="safari"&&(n.webview=!1)),n.majorVersion=parseInt(n.version,10),{browser:n,os:i,isMobile:r,isHints:!1}}(Ro),va=nr.browser.webkit,ma=va&&(Oi=typeof window>"u"?{userAgent:""}:window.navigator,!!(Ti=/applewebkit\/([^\s]+)/g.exec(Oi.userAgent.toLowerCase()))&&parseFloat(Ti[1])<605),ba=nr.browser.name,xa=parseInt(nr.browser.version,10),Fo=ba==="chrome",Ao=nr.browser.chromium,zo=parseInt(nr.browser.chromiumVersion,10)||0,ko=Fo&&xa>=109||Ao&&zo>=109,Go=ba==="firefox",Bo=parseInt(nr.browser.webkitVersion,10)>=612||xa>=15,Jn="moveable-",Io=$n.map(function(e){var t="",r="",n="center",i="center",a="calc(var(--moveable-control-padding, 20) * -1px)";return e.indexOf("n")>-1&&(t="top: ".concat(a,";"),i="bottom"),e.indexOf("s")>-1&&(t="top: 0px;",i="top"),e.indexOf("w")>-1&&(r="left: ".concat(a,";"),n="right"),e.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(e,`"] {
        `).concat(r).concat(t,`
        transform-origin: `).concat(n," ").concat(i,`;
    }`)}).join(`
`),Ho=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(Io,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(e){return`
.direction[data-rotation="`.concat(e,'"], :global .view-control-rotation').concat(e,` {
`).concat(function(t){var r=function(a,o){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*a,'px" height="').concat(32*a,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(o,'deg);transform-origin: 16px 16px"></path></svg>')}(1,t),n=45*Math.round(t/45)%180,i="ns-resize";return n===135?i="nwse-resize":n===45?i="nesw-resize":n===90&&(i="ew-resize"),"cursor:".concat(i,";cursor: url('").concat(r,"') 16 16, ").concat(i,";")}(e),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(ma?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),pn=1e-4,ee=1e-7,Fn=Math.pow(10,10),Pi=-Fn,An={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Ri={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},qo=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function ya(e,t,r,n,i,a){var o,s,u=(s=(o=t.gestos[a])===null||o===void 0?void 0:o.move(r,e.inputEvent))!==null&&s!==void 0?s:{},l=u.originalDatas||u.datas,p=l[a]||(l[a]={});return C(C({},u),{isPinch:!!n,parentEvent:!0,datas:p,originalDatas:e.originalDatas})}var Ea=function(){function e(t){var r;t===void 0&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((r={})[t]={},r)}return e.prototype.dragStart=function(t,r){this.isDrag=!1,this.isFlag=!1;var n=r.originalDatas;return this.datas=n,n[this.ableName]||(n[this.ableName]={}),C(C({},this.move(t,r.inputEvent)),{type:"dragstart"})},e.prototype.drag=function(t,r){return this.move([t[0]-this.prevX,t[1]-this.prevY],r)},e.prototype.move=function(t,r){var n,i,a=!1;if(this.isFlag){var o=this.isDrag;n=this.prevX+t[0],i=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(a=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],i=t[1],this.isFlag=!0;return this.prevX=n,this.prevY=i,{type:"drag",clientX:n,clientY:i,inputEvent:r,isFirstDrag:a,isDrag:this.isDrag,distX:n-this.startX,distY:i-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},e}();function mr(e,t,r,n){var i=e.length===16?4:3,a=T(tr(e,r,n,i),4),o=T(a[0],2),s=o[0],u=o[1],l=T(a[1],2),p=l[0],f=l[1],c=T(a[2],2),d=c[0],h=c[1],g=T(a[3],2),v=g[0],m=g[1],x=T(ye(e,t,i),2),y=x[0],E=x[1],S=Math.min(s,p,d,v),b=Math.min(u,f,h,m),D=Math.max(s,p,d,v);return s=s-S||0,{left:S,top:b,right:D,bottom:Math.max(u,f,h,m),origin:[y=y-S||0,E=E-b||0],pos1:[s,u=u-b||0],pos2:[p=p-S||0,f=f-b||0],pos3:[d=d-S||0,h=h-b||0],pos4:[v=v-S||0,m=m-b||0],direction:Ke(e[0]*e[i+1])}}function Sa(e,t){var r=t.datas,n=e.state,i=n.allMatrix,a=n.beforeMatrix,o=n.is3d,s=n.left,u=n.top,l=n.origin,p=n.offsetMatrix,f=n.targetMatrix,c=n.transformOrigin,d=o?4:3;r.is3d=o,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=a,r.offsetMatrix=p,r.transformOrigin=c,r.inverseMatrix=Ge(i,d),r.inverseBeforeMatrix=Ge(a,d),r.absoluteOrigin=Tr(St([s,u],l),d),r.startDragBeforeDist=ge(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=ge(r.inverseMatrix,r.absoluteOrigin,d)}function No(e,t,r){var n=t.datas,i=t.originalDatas.beforeRenderable,a=n.transformIndex,o=i.nextTransforms,s=o.length,u=i.nextTransformAppendedIndexes,l=-1;a===-1?((l=0)==-1&&(l=o.length),n.transformIndex=l):l=ue(u,function(d){return d.index===a&&d.functionName===r})?a:a+u.filter(function(d){return d.index<a}).length;var p=function(d,h,g){var v,m=Je(d,{"x%":function(F){return F/100*h.offsetWidth},"y%":function(F){return F/100*h.offsetHeight}}),x=d.slice(0,g<0?void 0:g),y=d.slice(0,g<0?void 0:g+1),E=d[g]||"",S=g<0?[]:d.slice(g),b=g<0?[]:d.slice(g+1),D=m.slice(0,g<0?void 0:g),_=m.slice(0,g<0?void 0:g+1),M=(v=m[g])!==null&&v!==void 0?v:Je([""])[0],P=g<0?[]:m.slice(g),w=g<0?[]:m.slice(g+1),O=M?[M]:[],R=Ye(D),z=Ye(_),k=Ye(P),A=Ye(w),B=Tt(R,k,4);return{transforms:d,beforeFunctionMatrix:R,beforeFunctionMatrix2:z,targetFunctionMatrix:Ye(O),afterFunctionMatrix:k,afterFunctionMatrix2:A,allFunctionMatrix:B,beforeFunctions:D,beforeFunctions2:_,targetFunction:O[0],afterFunctions:P,afterFunctions2:w,beforeFunctionTexts:x,beforeFunctionTexts2:y,targetFunctionText:E,afterFunctionTexts:S,afterFunctionTexts2:b}}(o,e.state,l),f=p.targetFunction,c=r;n.beforeFunctionTexts=p.beforeFunctionTexts,n.afterFunctionTexts=p.afterFunctionTexts,n.beforeTransform=p.beforeFunctionMatrix,n.beforeTransform2=p.beforeFunctionMatrix2,n.targetTansform=p.targetFunctionMatrix,n.afterTransform=p.afterFunctionMatrix,n.afterTransform2=p.afterFunctionMatrix2,n.targetAllTransform=p.allFunctionMatrix,f.functionName===c?(n.afterFunctionTexts.splice(0,1),n.isAppendTransform=!1):s>l&&(n.isAppendTransform=!0,i.nextTransformAppendedIndexes=W(W([],T(u),!1),[{functionName:r,index:l,isAppend:!0}],!1))}function Yo(e){var t=e.datas,r=T(Da({datas:t,distX:e.distX,distY:e.distY}),2),n=function(i,a){var o=i.beforeTransform,s=i.afterTransform;i.beforeTransform2,i.afterTransform2;var u=i.targetAllTransform,l=Tt(a,u,4),p=Tt(Ge(o,4),l,4);return Tt(p,Ge(s,4),4)}(t,function(i,a){for(var o=bt(a),s=0;s<a-1;++s)o[a*(a-1)+s]=i[s]||0;return o}([r[0],r[1]],4));return ge(n,Tr([0,0,0],4),4)}function Da(e){var t=e.datas,r=e.distX,n=e.distY,i=t.inverseBeforeMatrix,a=t.is3d,o=t.startDragBeforeDist,s=a?4:3;return et(ge(i,St(t.absoluteOrigin,[r,n]),s),o)}function Cr(e,t){var r=e.datas,n=e.distX,i=e.distY;r.inverseBeforeMatrix;var a=r.inverseMatrix,o=r.is3d;r.startDragBeforeDist;var s=r.startDragDist,u=o?4:3;return et(ge(a,St(r.absoluteOrigin,[n,i]),u),s)}function dn(e,t){var r=(t+1)/2;return[mi(e[0][0],e[1][0],r,1-r),mi(e[0][1],e[1][1],r,1-r)]}function Jt(e,t){var r=dn([e[0],e[1]],t[0]),n=dn([e[2],e[3]],t[0]);return dn([r,n],t[1])}function wa(e,t,r,n){return Tt(e,yr(t,n,r),n)}function hn(e,t,r){var n=Ue(t),i=t.datas;if(i.transformIndex=r,r!==-1){var a=n.startTransforms[r];if(a){var o=e.state,s=Je([a],{"x%":function(u){return u/100*o.offsetWidth},"y%":function(u){return u/100*o.offsetHeight}});i.startValue=s[0].functionValue}}}function Ue(e){return e.originalDatas.beforeRenderable}function Kr(e){return e.originalDatas.beforeRenderable.nextTransforms}function Hr(e){return(Kr(e)||[]).join(" ")}function qr(e){return Ue(e).nextStyle}function Xo(e,t,r,n,i,a){var o=e.props.groupable,s=e.state,u=s.transformOrigin,l=s.offsetMatrix,p=s.is3d,f=s.width,c=s.height,d=s.left,h=s.top,g=a.fixedDirection,v=a.nextTargetMatrix||s.targetMatrix,m=p?4:3,x=function(b,D,_,M,P,w){return M===void 0&&(M=D),P===void 0&&(P=_),w===void 0&&(w=[0,0]),b?b.map(function(O,R){var z=en(O),k=z.value,A=z.unit,B=R?P:M,F=R?_:D;return O==="%"||isNaN(k)?F*(B?w[R]/B:0):A!=="%"?k:F*k/100}):w}(i,t,r,f,c,u),y=o?d:0,E=o?h:0,S=function(b,D,_,M,P,w){var O=Jt(tr(D,_,M,P),w);return[b[0]-O[0],b[1]-O[1]]}(n,wa(l,v,x,m),t,r,m,g);return et(S,[y,E])}function Wo(e){if(e&&e.getRootNode){var t=e.getRootNode();if(t.nodeType===11)return t}}function jo(e){var t=e("scale"),r=e("rotate"),n=e("translate"),i=[];return n&&n!=="0px"&&n!=="none"&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&r!=="1"&&r!=="none"&&i.push("rotate(".concat(r,")")),t&&t!=="1"&&t!=="none"&&i.push("scale(".concat(t.split(/\s+/).join(","),")")),i}function Fi(e,t,r){for(var n,i,a,o=e,s=[],u=Vn(e)||Re(e),l=!r&&e===t||e===u,p=l,f=!1,c=3,d=!1,h=_r(t,t,!0).offsetParent,g=1;o&&!p;){p=l;var v=re(o),m=v("position"),x=za(o),y=m==="fixed",E=jo(v),S=ho(es(x)),b=void 0,D=!1,_=!1,M=0,P=0,w=0,O=0,R={hasTransform:!1,fixedContainer:null};y&&(d=!0,h=(R=is(o)).fixedContainer);var z=S.length;f||z!==16&&!E.length||(f=!0,c=4,Gn(s),a&&(a=Be(a,3,4))),f&&z===9&&(S=Be(S,3,4));var k=ns(o,e),A=k.tagName,B=k.hasOffset,F=k.isSVG,I=k.origin,V=k.targetOrigin,U=T(k.offset,2),rt=U[0],K=U[1];A==="svg"&&!o.ownerSVGElement&&a&&(s.push({type:"target",target:o,matrix:as(o,c)}),s.push({type:"offset",target:o,matrix:bt(c)}));var q=parseFloat(v("zoom"))||1;if(y)b=R.fixedContainer,D=!0;else{var N=_r(o,t,!1,!0,v),X=N.offsetZoom;if(b=N.offsetParent,D=N.isEnd,_=N.isStatic,g*=X,(N.isCustomElement||X!==1)&&_)rt-=b.offsetLeft,K-=b.offsetTop;else if((Go||ko)&&N.parentSlotElement){for(var j=b,Q=0,pt=0;j&&Wo(j);)Q+=j.offsetLeft,pt+=j.offsetTop,j=j.offsetParent;rt-=Q,K-=pt}}if(!va||Bo||!B||F||!_||m!=="relative"&&m!=="static"||(rt-=b.offsetLeft,K-=b.offsetTop,l=l||D),y)B&&R.hasTransform&&(w=b.clientLeft,O=b.clientTop);else if(B&&h!==b&&(M=b.clientLeft,P=b.clientTop),B&&b===u){var H=ka(o,!1);rt+=H[0],K+=H[1]}if(s.push({type:"target",target:o,matrix:yr(S,c,I)}),E.length&&(s.push({type:"offset",target:o,matrix:bt(c)}),s.push({type:"target",target:o,matrix:yr(Zn(E),c,I)})),B){var L=o===e,J=L?0:o.scrollLeft,Y=L?0:o.scrollTop;s.push({type:"offset",target:o,matrix:Ie([rt-J+M-w,K-Y+P-O],c)})}else s.push({type:"offset",target:o,origin:I});if(q!==1&&s.push({type:"zoom",target:o,matrix:yr(la([q,q],c),c,[0,0])}),a||(a=S),n||(n=I),i||(i=V),p||y)break;o=b,l=D,r&&o!==u||(p=l)}return a||(a=bt(c)),n||(n=[0,0]),i||(i=[0,0]),{zoom:g,offsetContainer:h,matrixes:s,targetMatrix:a,transformOrigin:n,targetOrigin:i,is3d:f,hasFixed:d}}var br=null,xr=null,Xe=null;function Qe(e){e?(window.Map&&(br=new Map,xr=new Map),Xe=[]):(br=null,Xe=null,xr=null)}function re(e){var t=br?.get(e);if(!t){var r=Te(e).getComputedStyle(e);if(!br)return function(a){return r[a]};t={style:r,cached:{}},br.set(e,t)}var n=t.cached,i=t.style;return function(a){return a in n||(n[a]=i[a]),n[a]}}function He(e,t,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas;return e.moveables.map(function(o,s){return a[s]=a[s]||{},a[s][t]=a[s][t]||{},C(C({},r),{isRequestChild:!0,datas:a[s][t],originalDatas:a[s]})})}function gn(e,t,r,n,i,a,o){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,p=i.datas,f=He(e,t.name,i),c=e.moveables,d=[],h=f.map(function(g,v){var m=c[v],x=m.state,y=x.gestos,E=g;if(s)E=new Ea(o).dragStart(n,g),d.push(E);else{if(y[o]||(y[o]=p.childGestos[v]),!y[o])return;E=ya(g,x,n,l,0,o),d.push(E)}var S=t[r](m,C(C({},E),{parentFlag:!0}));return u&&(y[o]=null),S});return s&&(p.childGestos=c.map(function(g){return g.state.gestos[o]})),{eventParams:h,childEvents:d}}function vn(e,t,r,n,i,a){i===void 0&&(i=function(l,p){return p});var o=!!r.match(/End$/g),s=He(e,t.name,n),u=e.moveables;return s.map(function(l,p){var f,c=u[p];f=i(c,l);var d=t[r](c,C(C({},f),{parentFlag:!0}));return o&&(c.state.gestos={}),d})}function Ai(e,t,r,n){var i=r.fixedDirection,a=r.fixedPosition,o=Jt(n.datas.startPositions||Pe(t.state),i),s=T(ge(rn(-e.rotation/180*Math.PI,3),[o[0]-a[0],o[1]-a[1],1],3),2),u=s[0],l=s[1];return n.datas.originalX=u,n.datas.originalY=l,n}function zi(e,t,r,n){var i=Er(e.props,r),a=i.renderDirections,o=a===void 0?t:a,s=i.displayAroundControls;if(!o)return[];var u=o===!0?$n:o;return W(W([],T(s?function(l,p,f,c){var d=l.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var h=l.getState(),g=h.renderPoses,v=h.rotation,m=h.direction,x=d.renderDirectionMap,y=l.props.zoom,E=Ke(m),S=v/Math.PI*180;return(c||wr(x)).map(function(b){var D=An[b];if(!D)return null;var _=(ct(S,15)+E*Ri[b]+720)%180,M=["around-control"];return f&&M.push("direction",f),p.createElement("div",{className:xt.apply(void 0,W([],T(M),!1)),"data-rotation":_,"data-direction":b,key:"direction-around-".concat(b),style:Qr.apply(void 0,W([v,y],T(D.map(function(P){return g[P]})),!1))})})}(e,n,r,u):[]),!1),T(function(l,p,f,c){var d=l.getState(),h=d.renderPoses,g=d.rotation,v=d.direction,m=Er(l.props,p).zoom,x=(S=g/Math.PI*180,S<0&&(S=S%360+360),S%360),y={},E=l.renderState,S;E.renderDirectionMap||(E.renderDirectionMap={});var b=E.renderDirectionMap;f.forEach(function(_){var M=_.dir;y[M]=!0});var D=Ke(v);return f.map(function(_){var M=_.data,P=_.classNames,w=_.dir,O=An[w];if(!O||!y[w])return null;b[w]=!0;var R=(ct(x,15)+D*Ri[w]+720)%180,z={};return wr(M).forEach(function(k){z["data-".concat(k)]=M[k]}),c.createElement("div",C({className:xt.apply(void 0,W(["control","direction",w,p],T(P),!1)),"data-rotation":R,"data-direction":w},z,{key:"direction-".concat(w),style:Qr.apply(void 0,W([g,m],T(O.map(function(k){return h[k]})),!1))}))})}(e,r,u.map(function(l){return{data:{},classNames:[],dir:l}}),n)),!1)}function Qn(e,t,r,n,i,a){for(var o=[],s=6;s<arguments.length;s++)o[s-6]=arguments[s];var u=se(r,n),l=t?ct(u/Math.PI*180,15)%180:-1;return e.createElement("div",{key:"line-".concat(a),className:xt.apply(void 0,W(["line","direction",t?"edge":"",t],T(o),!1)),"data-rotation":l,"data-line-key":a,"data-direction":t,style:os(r,n,i,u)})}function Ma(e,t,r,n,i){return(r===!0?Po:r).map(function(a,o){var s=T(An[a],2),u=s[0],l=s[1];if(l!=null)return Qn(e,a,n[u],n[l],i,"".concat(t,"Edge").concat(o),t)}).filter(Boolean)}function Ca(e,t){var r=e.state,n=r.containerClientRect,i=n.clientHeight,a=n.clientWidth,o=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,p=u.top,f=u.right,c=u.bottom,d=e.props.bounds||{},h=(d.position||"client")==="css",g=d.left,v=g===void 0?-1/0:g,m=d.top,x=m===void 0?-1/0:m,y=d.right,E=y===void 0?h?-1/0:1/0:y,S=d.bottom,b=S===void 0?h?-1/0:1/0:S;return h&&(E=a+f-l-E,b=i+c-p-b),{left:v+l-o,right:E+l-o,top:x+p-s,bottom:b+p-s}}function ki(e,t,r){var n=e[r?"left":"top"],i=e[r?"right":"bottom"],a=Math.min.apply(Math,W([],T(t),!1)),o=Math.max.apply(Math,W([],T(t),!1)),s=[];return n+1>a&&s.push({direction:"start",isBound:!0,offset:a-n,pos:n}),i-1<o&&s.push({direction:"end",isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(u,l){return G(l.offset)-G(u.offset)})}var Lo=["left","right","center"],Vo=["top","bottom","middle"];function _a(e,t){var r=e.props,n=r.snappable,i=r.bounds,a=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,p=e.state,f=p.guidelines,c=p.enableSnap;return!(!n||!c||t&&n!==!0&&n.indexOf(t)<0)&&!!(u||l||i||a||f&&f.length||o&&o.length||s&&s.length)}function Oa(e){return e===!1?{}:e!==!0&&e?e:{left:!0,right:!0,top:!0,bottom:!0}}function Uo(e,t){var r=function(a,o){var s=Oa(a),u={};for(var l in s)l in o&&s[l]&&(u[l]=o[l]);return u}(e,t),n=Vo.filter(function(a){return a in r}),i=Lo.filter(function(a){return a in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(a){return r[a]}),vertical:i.map(function(a){return r[a]})}}function Ta(e,t,r,n,i,a,o){var s;n===void 0&&(n=[]),i===void 0&&(i=[]);var u=e.props,l=((s=e.state.snapThresholdInfo)===null||s===void 0?void 0:s.multiples)||[1,1],p=Xi(o,u.snapHorizontalThreshold,5),f=Xi(a,u.snapVerticalThreshold,5);return function(c,d,h,g,v,m,x,y){return{vertical:Gi(c,"vertical",d,x*y[0],g),horizontal:Gi(c,"horizontal",h,m*y[1],v)}}(e.state.guidelines,t,r,n,i,p,f,l)}function zn(e){var t=e.isSnap;if(!t)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=e.posInfos[0],n=r.guidelineInfos[0],i=n.offset,a=n.dist,o=n.guideline;return{isSnap:t,offset:i,dist:a,pos:r.pos,guideline:o}}function Gi(e,t,r,n,i){var a,o;if(i===void 0&&(i=[]),!e||!e.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var s=t==="vertical"?0:1,u=r.map(function(p,f){var c=i[f]||"",d=e.map(function(h){var g=h.pos,v=p-g[s];return{offset:v,dist:G(v),guideline:h,direction:c}}).filter(function(h){var g=h.guideline,v=h.dist;return!(g.type!==t||v>n)}).sort(function(h,g){return h.dist-g.dist});return{pos:p,index:f,guidelineInfos:d,direction:c}}).filter(function(p){return p.guidelineInfos.length>0}).sort(function(p,f){return p.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),l=u.length>0;return{isSnap:l,index:l?u[0].index:-1,direction:(o=(a=u[0])===null||a===void 0?void 0:a.direction)!==null&&o!==void 0?o:"",posInfos:u}}function $r(e,t){return e.slice().sort(function(r,n){var i=r.sign[t],a=n.sign[t],o=r.offset[t],s=n.offset[t];return i?a?function(u,l){var p=G(u.offset),f=G(l.offset);return u.isBound&&l.isBound?f-p:u.isBound?-1:l.isBound?1:u.isSnap&&l.isSnap?f-p:u.isSnap?-1:l.isSnap||p<ee?1:f<ee?-1:p-f}({isBound:r.isBound,isSnap:r.isSnap,offset:o},{isBound:n.isBound,isSnap:n.isSnap,offset:s}):-1:1})[0]}function Pa(e,t){var r,n,i=T(t,2),a=i[0],o=i[1],s=o[0]-a[0],u=o[1]-a[1];return G(s)<ee&&(s=0),G(u)<ee&&(u=0),s?u?(r=u/s*(e[0]-a[0])+a[1],n=e[1]):(r=a[1],n=e[1]):(r=a[0],n=e[0]),r-n}function Bi(e,t,r,n,i){return i===void 0&&(i=0),n&&t-i<=e||!n&&e<=r+i?{isBound:!0,offset:n?t-e:r-e}:{isBound:!1,offset:0}}function Zo(e,t){var r=t.line,n=t.centerSign,i=t.verticalSign,a=t.horizontalSign,o=t.lineConstants,s=e.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,p=s.width,f=s.height,c=[[u,l],[u,l+f]],d=[[u,l],[u+p,l]],h=[[u+p,l],[u+p,l+f]],g=[[u,l+f],[u+p,l+f]];if(function(R,z,k,A){return A===void 0&&(A=ee),R.every(function(B){var F=Pa(B,z);return F<=0===k||G(F)<=A})}([[u,l],[u+p,l],[u,l+f],[u+p,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=Nr(r,o,d,i),m=Nr(r,o,g,i),x=Nr(r,o,c,a),y=Nr(r,o,h,a),E=v.isBound&&m.isBound,S=v.isBound||m.isBound,b=x.isBound&&y.isBound,D=x.isBound||y.isBound,_=Le(v.offset,m.offset),M=Le(x.offset,y.offset),P=[0,0],w=!1,O=!1;return G(M)<G(_)?(P=[_,0],w=S,O=E):(P=[0,M],w=D,O=b),{isAllBound:O,isVerticalBound:S,isHorizontalBound:D,isBound:w,offset:P}}function Nr(e,t,r,n,i,a){var o,s,u=T(t,2),l=u[0],p=u[1],f=e[0],c=r[0],d=r[1],h=tn(d[1]-c[1]),g=p,v=-l/p;return tn(d[0]-c[0])?h?{isBound:!1,offset:0}:l?Bi((c[1]-f[1])/v+f[0],c[0],d[0],n,i):{isBound:s=G(o=c[1]-f[1])<=0,offset:s?o:0}:g?Bi(v*(c[0]-f[0])+f[1],c[1],d[1],n,i):{isBound:s=G(o=c[0]-f[0])<=0,offset:s?o:0}}function Ra(e,t,r){return t.map(function(n){var i=Zo(e,n),a=i.isBound,o=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=n.multiple,p=Cr({datas:r,distX:o[0],distY:o[1]}).map(function(f,c){return f*(l[c]?2/l[c]:0)});return{sign:l,isBound:a,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:p}})}function Ko(e,t,r){var n,i=Ra(e,Fa(e,t,[0,0],!1).map(function(f){return C(C({},f),{multiple:f.multiple.map(function(c){return 2*G(c)})})}),r),a=$r(i,0),o=$r(i,1),s=0,u=0,l=a.isVerticalBound||o.isVerticalBound,p=a.isHorizontalBound||o.isHorizontalBound;return(l||p)&&(n=T(function(f){var c=f.datas,d=f.distX,h=f.distY;c.beforeMatrix;var g=c.matrix,v=c.is3d;c.startDragBeforeDist;var m=c.startDragDist,x=c.absoluteOrigin,y=v?4:3;return et(ge(g,St(m,[d,h]),y),x)}({datas:r,distX:-a.offset[0],distY:-o.offset[1]}),2),s=n[0],u=n[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:p,offset:u}}}function Fa(e,t,r,n){var i=e.state,a=tr(i.allMatrix,100,100,i.is3d?4:3),o=Jt(a,[0,0]);return function(s,u){var l=[],p=s[0],f=s[1];return p&&f?l.push([[0,2*f],s,[-p,f]],[[2*p,0],s,[p,-f]]):p?(l.push([[2*p,0],[p,1],[p,-1]]),u&&l.push([[0,-1],[p,-1],[-p,-1]],[[0,1],[p,1],[-p,1]])):f?(l.push([[0,2*f],[1,f],[-1,f]]),u&&l.push([[-1,0],[-1,f],[-1,-f]],[[1,0],[1,f],[1,-f]])):l.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),l}(r,n).map(function(s){var u=T(s,3),l=u[0],p=u[1],f=u[2],c=[Jt(a,p),Jt(a,f)],d=function(m){var x=T(m,2),y=x[0],E=x[1],S=E[0]-y[0],b=E[1]-y[1];Math.abs(S)<Ot&&(S=0),Math.abs(b)<Ot&&(b=0);var D=0,_=0,M=0;return S?b?(_=1,M=(D=-b/S)*y[0]-y[1]):(_=1,M=-y[1]):(D=-1,M=y[0]),[D,_,M].map(function(P){return ct(P,Ot)})}(c),h=function(m,x){var y=wn([x[0][0],x[1][0]]),E=wn([x[0][1],x[1][1]]);return{vertical:y<=m[0],horizontal:E<=m[1]}}(o,c),g=h.vertical,v=h.horizontal;return{multiple:l,centerSign:Pa(o,c)<=0,verticalSign:g,horizontalSign:v,lineConstants:d,line:[Jt(t,p),Jt(t,f)]}})}function kn(e,t,r,n,i){var a=function(f,c,d,h){var g=c[0]-f[0],v=c[1]-f[1];if(G(g)<Ot&&(g=0),G(v)<Ot&&(v=0),!g)return h?[0,0]:[0,d];if(!v)return h?[d,0]:[0,0];var m=v/g,x=f[1]-m*f[0];return h?[d,m*(c[0]+d)+x-c[1]]:[(c[1]+d-x)/m-c[0],d]}(e,t,r,n);if(!a)return{isOutside:!1,offset:[0,0]};var o=hr(e,t),s=hr(a,e),u=hr(a,t),l=s>o||u>o,p=T(Cr({datas:i,distX:a[0],distY:a[1]}),2);return{offset:[p[0],p[1]],isOutside:l}}function Ii(e,t){return e.isBound?e.offset:t.isSnap?zn(t).offset:0}function $o(e,t,r,n,i,a){if(!_a(e,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=ni(a.absolutePoses,[t,r]),s=nn(o),u=s.left,l=s.right,p=s.top,f=s.bottom,c={horizontal:o.map(function(_){return _[1]}),vertical:o.map(function(_){return _[0]})},d=ti(e,i,Uo(Oa(e.props.snapDirections),{left:u,right:l,top:p,bottom:f,center:(u+l)/2,middle:(p+f)/2}),c),h=d.vertical,g=d.horizontal,v=Ko(e,o,a),m=v.vertical,x=v.horizontal,y=h.isSnap,E=g.isSnap,S=h.isBound||m.isBound,b=g.isBound||x.isBound,D=T(function(_,M,P,w,O){var R=T(M,2),z=R[0],k=R[1],A=T(P,2),B=A[0],F=A[1],I=T(w,2),V=I[0],U=I[1],rt=T(O,2),K=rt[0],q=rt[1],N=-K,X=-q;if(_&&z&&k){N=0,X=0;var j=[];if(B&&F?j.push([0,q],[K,0]):B?j.push([K,0]):F?j.push([0,q]):V&&U?j.push([0,q],[K,0]):V?j.push([K,0]):U&&j.push([0,q]),j.length){j.sort(function(L,J){return Ee(et([z,k],L))-Ee(et([z,k],J))});var Q=j[0];if(Q[0]&&G(z)>Ot)N=-Q[0],X=k*G(z+N)/G(z)-k;else if(Q[1]&&G(k)>Ot){var pt=k;X=-Q[1],N=z*G(k+X)/G(pt)-z}if(_&&F&&B)if(G(N)>Ot&&G(N)<G(K))N*=H=G(K)/G(N),X*=H;else if(G(X)>Ot&&G(X)<G(q)){var H;N*=H=G(q)/G(X),X*=H}else N=Le(-K,N),X=Le(-q,X)}}else N=z||B?-K:0,X=k||F?-q:0;return[N,X]}(n,[t,r],[S,b],[y,E],[Le(h.offset,m.offset),Le(g.offset,x.offset)]),2);return[{isBound:S,isSnap:y,offset:D[0]},{isBound:b,isSnap:E,offset:D[1]}]}function ti(e,t,r,n){n===void 0&&(n=r);var i=function(h,g,v){var m=h||{},x=m.position,y=x===void 0?"client":x,E=m.left,S=E===void 0?-1/0:E,b=m.top,D=b===void 0?-1/0:b,_=m.right,M=_===void 0?1/0:_,P=m.bottom,w={position:y,left:S,top:D,right:M,bottom:P===void 0?1/0:P};return{vertical:ki(w,g,!0),horizontal:ki(w,v,!1)}}(Ca(e),n.vertical,n.horizontal),a=i.horizontal,o=i.vertical,s=t?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Ta(e,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,p=Ii(a[0],u),f=Ii(o[0],l),c=G(p),d=G(f);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:p,dist:c,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l}}}function Jo(e,t,r,n,i,a){return r.map(function(o){var s=T(o,2),u=s[0],l=s[1],p=Jt(t,u),f=Jt(t,l),c=n?function(M,P,w,O){var R=function(K,q,N){var X=Ca(K),j=X.left,Q=X.top,pt=X.right,H=X.bottom,L=T(N,2),J=L[0],Y=L[1],ht=T(et(N,q),2),Pt=ht[0],kt=ht[1];G(Pt)<ee&&(Pt=0),G(kt)<ee&&(kt=0);var $=kt>0,it=Pt>0,ft={isBound:!1,offset:0,pos:0},st={isBound:!1,offset:0,pos:0};if(Pt===0&&kt===0)return{vertical:ft,horizontal:st};if(Pt===0)$?H<Y&&(st.pos=H,st.offset=Y-H):Q>Y&&(st.pos=Q,st.offset=Y-Q);else if(kt===0)it?pt<J&&(ft.pos=pt,ft.offset=J-pt):j>J&&(ft.pos=j,ft.offset=J-j);else{var dt=kt/Pt,Dt=N[1]-dt*J,at=0,gt=0,ut=!1;it&&pt<=J?(at=dt*pt+Dt,gt=pt,ut=!0):!it&&J<=j&&(at=dt*j+Dt,gt=j,ut=!0),ut&&(at<Q||at>H)&&(ut=!1),ut||($&&H<=Y?(gt=((at=H)-Dt)/dt,ut=!0):!$&&Y<=Q&&(gt=((at=Q)-Dt)/dt,ut=!0)),ut&&(ft.isBound=!0,ft.pos=gt,ft.offset=J-gt,st.isBound=!0,st.pos=at,st.offset=Y-at)}return{vertical:ft,horizontal:st}}(M,P,w),z=R.horizontal,k=R.vertical,A=O?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(K,q,N){var X=T(N,2),j=X[0],Q=X[1],pt=T(q,2),H=pt[0],L=pt[1],J=T(et(N,q),2),Y=J[0],ht=J[1],Pt=ht>0,kt=Y>0;Y=tn(Y),ht=tn(ht);var $={isSnap:!1,offset:0,pos:0},it={isSnap:!1,offset:0,pos:0};if(Y===0&&ht===0)return{vertical:$,horizontal:it};var ft=Ta(K,Y?[j]:[],ht?[Q]:[],[],[],void 0,void 0),st=ft.vertical,dt=ft.horizontal;st.posInfos.filter(function(Mt){var Ft=Mt.pos;return kt?Ft>=H:Ft<=H}),dt.posInfos.filter(function(Mt){var Ft=Mt.pos;return Pt?Ft>=L:Ft<=L}),st.isSnap=st.posInfos.length>0,dt.isSnap=dt.posInfos.length>0;var Dt=zn(st),at=Dt.isSnap,gt=Dt.guideline,ut=zn(dt),Gt=ut.isSnap,jt=ut.guideline,Z=Gt?jt.pos[1]:0,tt=at?gt.pos[0]:0;if(Y===0)Gt&&(it.isSnap=!0,it.pos=jt.pos[1],it.offset=Q-it.pos);else if(ht===0)at&&($.isSnap=!0,$.pos=tt,$.offset=j-tt);else{var yt=ht/Y,wt=N[1]-yt*j,ot=0,vt=0,lt=!1;at?(ot=yt*(vt=tt)+wt,lt=!0):Gt&&(vt=((ot=Z)-wt)/yt,lt=!0),lt&&($.isSnap=!0,$.pos=vt,$.offset=j-vt,it.isSnap=!0,it.pos=ot,it.offset=Q-ot)}return{vertical:$,horizontal:it}}(M,P,w),B=A.horizontal,F=A.vertical,I=Hi(z,B),V=Hi(k,F),U=G(I),rt=G(V);return{horizontal:{isBound:z.isBound,isSnap:B.isSnap,offset:I,dist:U},vertical:{isBound:k.isBound,isSnap:F.isSnap,offset:V,dist:rt}}}(e,p,f,i):ti(e,i,{vertical:[f[0]],horizontal:[f[1]]}),d=c.horizontal,h=d.offset,g=d.isBound,v=d.isSnap,m=c.vertical,x=m.offset,y=m.isBound,E=m.isSnap,S=et(l,u);if(!x&&!h)return{isBound:y||g,isSnap:E||v,sign:S,offset:[0,0]};var b=function(M,P,w,O){var R=se(M,P)/Math.PI*180,z=w.vertical,k=z.isBound,A=z.isSnap,B=z.dist,F=w.horizontal,I=F.isBound,V=F.isSnap,U=R%180,rt=U<3||U>177,K=U>87&&U<93;return F.dist<B&&(k||A&&!K&&(!O||!rt))?"vertical":!I&&(!V||rt||O&&K)?"":"horizontal"}(p,f,c,n);if(!b)return{sign:S,isBound:!1,isSnap:!1,offset:[0,0]};var D=b==="vertical",_=[0,0];return _=(_=n||G(l[0])!==1||G(l[1])!==1||u[0]===l[0]||u[1]===l[1]?kn(p,f,-(D?x:h),D,a).offset:Cr({datas:a,distX:-x,distY:-h})).map(function(M,P){return M*(S[P]?2/S[P]:0)}),{sign:S,isBound:D?y:g,isSnap:D?E:v,offset:_}})}function Hi(e,t){return e.isBound?e.offset:t.isSnap?t.offset:0}var be={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(e,t){var r=e.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,a=r.zoom,o=e.getState(),s=o.dragInfo,u=o.beforeOrigin;if(n||!i||!s)return[];var l=s.dist;if(!l[0]&&!l[1])return[];var p=Ee(l),f=se(l,[0,0]);return[t.createElement("div",{className:xt("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(p,"px"),transform:"translate(".concat(u[0],"px, ").concat(u[1],"px) rotate(").concat(f,"rad) scaleY(").concat(a,")")}})]},dragStart:function(e,t){var r=t.datas,n=t.parentEvent,i=t.parentGesto,a=e.state,o=a.gestos,s=a.style;if(o.draggable)return!1;o.draggable=i||e.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],Sa(e,t),function(l,p,f){hn(l,p,$e(Ue(p).startTransforms,function(c){return c.indexOf("".concat(f,"("))===0}))}(e,t,"translate"),function(l,p){p.absolutePoses=Pe(l.state)}(e,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=mt(e,t,C({set:function(l){r.startValue=l}},function(l,p){var f=Ue(p);return{setTransform:function(c,d){d===void 0&&(d=-1),f.startTransforms=Wt(c)?c:Dr(c),hn(l,p,d)},setTransformIndex:function(c){hn(l,p,c)}}}(e,t)));return(n||nt(e,"onDragStart",u))!==!1?(r.isDrag=!0,e.state.dragInfo={startRect:e.getRect(),dist:[0,0]}):(o.draggable=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(e,t){if(t){No(e,t,"translate");var r=t.datas,n=t.parentEvent,i=t.parentFlag,a=t.isPinch,o=t.deltaOffset,s=t.useSnap,u=t.isRequest,l=t.isGroup,p=t.parentThrottleDrag,f=t.distX,c=t.distY,d=r.isDrag,h=r.prevDist,g=r.prevBeforeDist,v=r.startValue;if(d){o&&(f+=o[0],c+=o[1]);var m=e.props,x=m.parentMoveable,y=l?0:m.throttleDrag||p||0,E=n?0:m.throttleDragRotate||0,S=0,b=!1,D=!1,_=!1,M=!1;if(!n&&E>0&&(f||c)){var P=m.startDragRotate||0,w=ct(P+180*se([0,0],[f,c])/Math.PI,E)-P,O=c*Math.abs(Math.cos((w-90)/180*Math.PI)),R=Ee([f*Math.abs(Math.cos(w/180*Math.PI)),O]);S=w*Math.PI/180,f=R*Math.cos(S),c=R*Math.sin(S)}if(!a&&!n&&!i){var z=T($o(e,f,c,E,!s&&u||o,r),2),k=z[0],A=z[1];b=k.isSnap,D=k.isBound,_=A.isSnap,M=A.isBound,f+=k.offset,c+=A.offset}var B=St(Da({datas:r,distX:f,distY:c}),v),F=St(Yo({datas:r,distX:f,distY:c}),v);yi(F,ee),yi(B,ee),E||(b||D||(F[0]=ct(F[0],y),B[0]=ct(B[0],y)),_||M||(F[1]=ct(F[1],y),B[1]=ct(B[1],y)));var I=et(B,v),V=et(F,v),U=et(V,h),rt=et(I,g);r.prevDist=V,r.prevBeforeDist=I,r.passDelta=U,r.passDist=V;var K=r.left+I[0],q=r.top+I[1],N=r.right-I[0],X=r.bottom-I[1],j=function(J,Y,ht){return"".concat(J.beforeFunctionTexts.join(" ")," ").concat(J.isAppendTransform?ht:Y," ").concat(J.afterFunctionTexts.join(" "))}(r,"translate(".concat(F[0],"px, ").concat(F[1],"px)"),"translate(".concat(V[0],"px, ").concat(V[1],"px)"));if(function(J,Y){Ue(J).nextTransforms=Dr(Y)}(t,j),e.state.dragInfo.dist=n?[0,0]:V,n||x||!U.every(function(J){return!J})||!rt.some(function(J){return!J})){var Q=e.state,pt=Q.width,H=Q.height,L=mt(e,t,C({transform:j,dist:V,delta:U,translate:F,beforeDist:I,beforeDelta:rt,beforeTranslate:B,left:K,top:q,right:N,bottom:X,width:pt,height:H,isPinch:a},je({transform:j},t)));return!n&&nt(e,"onDrag",L),L}}}},dragAfter:function(e,t){var r=t.datas,n=r.deltaOffset;return!(!n[0]&&!n[1])&&(r.deltaOffset=[0,0],this.drag(e,C(C({},t),{deltaOffset:n})))},dragEnd:function(e,t){var r=t.parentEvent,n=t.datas;if(e.state.dragInfo=null,n.isDrag){n.isDrag=!1;var i=Or(e,t,{});return!r&&nt(e,"onDragEnd",i),i}},dragGroupStart:function(e,t){var r,n,i=t.datas,a=t.clientX,o=t.clientY,s=this.dragStart(e,t);if(!s)return!1;var u=gn(e,this,"dragStart",[a||0,o||0],t,0,"draggable"),l=u.childEvents,p=u.eventParams,f=nt(e,"onDragGroupStart",C(C({},s),{targets:e.props.targets,events:p}));i.isDrag=f!==!1;var c=(n=(r=l[0])===null||r===void 0?void 0:r.datas.startValue)!==null&&n!==void 0?n:[0,0];return i.throttleOffset=[c[0]%1,c[1]%1],!!i.isDrag&&s},dragGroup:function(e,t){if(t.datas.isDrag){var r=this.drag(e,C(C({},t),{parentThrottleDrag:e.props.throttleDrag})),n=gn(e,this,"drag",t.datas.passDelta,t,0,"draggable").eventParams;if(r){var i=C({targets:e.props.targets,events:n},r);return nt(e,"onDragGroup",i),i}}},dragGroupEnd:function(e,t){var r=t.isDrag;if(t.datas.isDrag){this.dragEnd(e,t);var n=gn(e,this,"dragEnd",[0,0],t,0,"draggable").eventParams;return nt(e,"onDragGroupEnd",Or(e,t,{targets:e.props.targets,events:n})),r}},request:function(e){var t={},r=e.getRect(),n=0,i=0,a=!1;return{isControl:!1,requestStart:function(o){return a=o.useSnap,{datas:t,useSnap:a}},request:function(o){return"x"in o?n=o.x-r.left:"deltaX"in o&&(n+=o.deltaX),"y"in o?i=o.y-r.top:"deltaY"in o&&(i+=o.deltaY),{datas:t,distX:n,distY:i,useSnap:a}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:a}}}},unset:function(e){e.state.gestos.draggable=null,e.state.dragInfo=null}},cr,qi=Hn("resizable"),Qo={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:(cr="resizable",function(e,t){var r=Er(e.props,cr).edge;return r&&(r===!0||r.length)?W(W([],T(Ma(t,cr,r,e.getState().renderPoses,e.props.zoom)),!1),T(function(n,i,a){return zi(n,["nw","ne","sw","se"],i,a)}(e,cr,t)),!1):function(n,i,a){return zi(n,$n,i,a)}(e,cr,t)}),dragControlCondition:qi,viewClassName:function(e){return function(t){if(!t.isDragging(e))return"";var r=function(i,a){var o,s=i.targetGesto,u=i.controlGesto;return s?.isFlag()&&(o=s.getEventData()[a]),!o&&u?.isFlag()&&(o=u.getEventData()[a]),o||{}}(t,e),n=r.deg;return n?xt("view-control-rotation".concat(n)):""}}("resizable"),dragControlStart:function(e,t){var r,n=t.inputEvent,i=t.isPinch,a=t.isGroup,o=t.parentDirection,s=t.parentGesto,u=t.datas,l=t.parentFixedDirection,p=t.parentEvent,f=function(M,P,w,O){var R;return M?R=M:P?R=[0,0]:R=function(z,k){if(z){var A=z.getAttribute("data-rotation")||"",B=z.getAttribute("data-direction");if(k.deg=A,!!B){var F=[0,0];return B.indexOf("w")>-1&&(F[0]=-1),B.indexOf("e")>-1&&(F[0]=1),B.indexOf("n")>-1&&(F[1]=-1),B.indexOf("s")>-1&&(F[1]=1),F}}}(w.target,O),R}(o,i,n,u),c=e.state,d=c.target,h=c.width,g=c.height,v=c.gestos;if(!f||!d||v.resizable)return!1;v.resizable=s||e.controlGesto,!i&&Sa(e,t),u.datas={},u.direction=f,u.startOffsetWidth=h,u.startOffsetHeight=g,u.prevWidth=0,u.prevHeight=0,u.minSize=[0,0],u.startWidth=c.inlineCSSWidth||c.cssWidth,u.startHeight=c.inlineCSSHeight||c.cssHeight,u.maxSize=[1/0,1/0],a||(u.minSize=[c.minOffsetWidth,c.minOffsetHeight],u.maxSize=[c.maxOffsetWidth,c.maxOffsetHeight]);var m=e.props.transformOrigin||"% %";function x(M){u.ratio=M&&isFinite(M)?M:0}function y(M){var P=function(w,O){return{fixedPosition:Jt(w,O),fixedDirection:O,fixedOffset:[0,0]}}(u.startPositions,M);u.fixedDirection=P.fixedDirection,u.fixedPosition=P.fixedPosition,u.fixedOffset=P.fixedOffset}function E(M){var P=function(w,O){var R=w.allMatrix,z=w.is3d,k=w.width,A=w.height,B=z?4:3,F=function(I,V,U){return[V?I[0]/(V/2)-1:0,U?I[1]/(U/2)-1:0]}(O,k,A);return{fixedPosition:ye(R,O,B),fixedDirection:F,fixedOffset:[k?0:O[0],A?0:O[1]]}}(e.state,M);u.fixedDirection=P.fixedDirection,u.fixedPosition=P.fixedPosition,u.fixedOffset=P.fixedOffset}function S(M){u.minSize=[$t("".concat(M[0]),0)||0,$t("".concat(M[1]),0)||0]}function b(M){var P=[M[0]||1/0,M[1]||1/0];Lr(P[0])&&!isFinite(P[0])||(P[0]=$t("".concat(P[0]),0)||1/0),Lr(P[1])&&!isFinite(P[1])||(P[1]=$t("".concat(P[1]),0)||1/0),u.maxSize=P}u.transformOrigin=rr(m)?m.split(" "):m,u.startOffsetMatrix=c.offsetMatrix,u.startTransformOrigin=c.transformOrigin,u.isWidth=(r=t?.parentIsWidth)!==null&&r!==void 0?r:!f[0]&&!f[1]||f[0]||!f[1],u.startPositions=Pe(e.state),x(h/g),y(l||[-f[0],-f[1]]),u.setFixedDirection=y,u.setFixedPosition=E,u.setMin=S,u.setMax=b;var D=mt(e,t,{direction:f,startRatio:u.ratio,set:function(M){var P=T(M,2),w=P[0],O=P[1];u.startWidth=w,u.startHeight=O},setMin:S,setMax:b,setRatio:x,setFixedDirection:y,setFixedPosition:E,setOrigin:function(M){u.transformOrigin=M},dragStart:be.dragStart(e,new Ea().dragStart([0,0],t))}),_=p||nt(e,"onResizeStart",D);return u.startFixedDirection=u.fixedDirection,u.startFixedPosition=u.fixedPosition,_!==!1&&(u.isResize=!0,e.state.snapRenderInfo={request:t.isRequest,direction:f}),!!u.isResize&&D},dragControl:function(e,t){var r,n=t.datas,i=t.parentFlag,a=t.isPinch,o=t.parentKeepRatio,s=t.dragClient,u=t.parentDist,l=t.useSnap,p=t.isRequest,f=t.isGroup,c=t.parentEvent,d=t.resolveMatrix,h=n.isResize,g=n.transformOrigin,v=n.startWidth,m=n.startHeight,x=n.prevWidth,y=n.prevHeight,E=n.minSize,S=n.maxSize,b=n.ratio,D=n.startOffsetWidth,_=n.startOffsetHeight,M=n.isWidth;if(h){if(d){var P=e.state.is3d,w=n.startOffsetMatrix,O=n.startTransformOrigin,R=P?4:3,z=Zn(Kr(t)),k=Math.sqrt(z.length);R!==k&&(z=Be(z,k,R));var A=wa(w,z,O,R),B=tr(A,D,_,R);n.startPositions=B,n.nextTargetMatrix=z,n.nextAllMatrix=A}var F=Er(e.props,"resizable"),I=F.resizeFormat,V=F.throttleResize,U=V===void 0?i?0:1:V,rt=F.parentMoveable,K=F.keepRatioFinally,q=n.direction,N=q,X=0,j=0;q[0]||q[1]||(N=[1,1]);var Q=b&&(o??F.keepRatio)||!1,pt=T(Gt(),2),H=pt[0],L=pt[1];c||(n.setFixedDirection(n.fixedDirection),nt(e,"onBeforeResize",mt(e,t,{startFixedDirection:n.startFixedDirection,startFixedPosition:n.startFixedPosition,setFixedDirection:function(Z){var tt;return n.setFixedDirection(Z),tt=T(Gt(),2),H=tt[0],L=tt[1],[H,L]},setFixedPosition:function(Z){var tt;return n.setFixedPosition(Z),tt=T(Gt(),2),H=tt[0],L=tt[1],[H,L]},boundingWidth:H,boundingHeight:L,setSize:function(Z){var tt;tt=T(Z,2),H=tt[0],L=tt[1]}},!0)));var J=s;s||(J=!i&&a?function(Z,tt){return Jt(Pe(Z.state),tt)}(e,[0,0]):n.fixedPosition);var Y=[0,0];if(a||(Y=function(Z,tt,yt,wt,ot,vt,lt){if(!_a(Z,"resizable"))return[0,0];var Mt=lt.fixedDirection,Ft=lt.nextAllMatrix,le=Z.state,fe=le.allMatrix,ne=le.is3d;return function(Et,Rt,Ht,ie,Lt,ve,Vt,Ut){for(var ce=Pe(Et.state),Zt=Et.props.keepRatio,qt=0,Qt=0,At=0;At<2;++At){var me=ts(Et,Rt(qt,Qt),Lt,Zt,Vt,Ut),pe=me.width,de=me.height,Ct=pe.isBound,Fe=de.isBound,Bt=pe.offset,we=de.offset;if(At===1&&(Ct||(Bt=0),Fe||(we=0)),At===0&&Vt&&!Ct&&!Fe)return[0,0];if(Zt){var ir=G(Bt)*(Ht?1/Ht:1),ar=G(we)*(ie?1/ie:1);(Ct&&Fe?ir<ar:Fe||!Ct&&ir<ar)?Bt=Ht*we/ie:we=ie*Bt/Ht}qt+=Bt,Qt+=we}if(!Zt&&Lt[0]&&Lt[1]){var or=function(_e,Ae,ae,Nt,Se){var he=[-ae[0],-ae[1]],Yt=_e.state,te=Yt.width,qe=Yt.height,Oe=_e.props.bounds,sr=1/0,ur=1/0;if(Oe){var Fr=[[ae[0],-ae[1]],[-ae[0],ae[1]]],lr=Oe.left,an=lr===void 0?-1/0:lr,Ar=Oe.top,Qa=Ar===void 0?-1/0:Ar,oi=Oe.right,to=oi===void 0?1/0:oi,si=Oe.bottom,eo=si===void 0?1/0:si;Fr.forEach(function(on){var ro=on[0]!==he[0],no=on[1]!==he[1],ze=Jt(Ae,on),zr=360*se(Nt,ze)/Math.PI;if(no){var fr=ze.slice();(G(zr-360)<2||G(zr-180)<2)&&(fr[1]=Nt[1]);var ui=kn(Nt,fr,(Nt[1]<ze[1]?eo:Qa)-ze[1],!1,Se),li=T(ui.offset,2)[1],io=ui.isOutside;isNaN(li)||(ur=qe+(io?1:-1)*G(li))}if(ro){fr=ze.slice(),(G(zr-90)<2||G(zr-270)<2)&&(fr[0]=Nt[0]);var fi=kn(Nt,fr,(Nt[0]<ze[0]?to:an)-ze[0],!0,Se),ci=T(fi.offset,1)[0],ao=fi.isOutside;isNaN(ci)||(sr=te+(ao?1:-1)*G(ci))}})}return{maxWidth:sr,maxHeight:ur}}(Et,ce,Lt,ve,Ut),Me=or.maxWidth,Ce=or.maxHeight,Rr=T(function(_e,Ae,ae,Nt,Se,he,Yt,te,qe){var Oe=Jt(Ae,Yt),sr=ti(_e,te,{vertical:[Oe[0]],horizontal:[Oe[1]]}),ur=sr.horizontal.offset,Fr=sr.vertical.offset;if(ct(Fr,pn)||ct(ur,pn)){var lr=T(Cr({datas:qe,distX:-Fr,distY:-ur}),2),an=lr[0],Ar=lr[1];return[Math.min(Se||1/0,ae+Yt[0]*an)-ae,Math.min(he||1/0,Nt+Yt[1]*Ar)-Nt]}return[0,0]}(Et,Rt(qt,Qt).map(function(_e){return _e.map(function(Ae){return ct(Ae,pn)})}),Ht+qt,ie+Qt,Me,Ce,Lt,Vt,Ut),2);qt+=Bt=Rr[0],Qt+=we=Rr[1]}return[qt,Qt]}(Z,function(Et,Rt){return function(Ht,ie,Lt,ve,Vt,Ut){var ce=tr(Ht,ie,Lt,Ut?4:3),Zt=Jt(ce,ve);return ni(ce,et(Vt,Zt))}(Ft||fe,tt+Et,yt+Rt,Mt,ot,ne)},tt,yt,wt,ot,vt,lt)}(e,H,L,q,J,!l&&p,n)),u&&(!u[0]&&(Y[0]=0),!u[1]&&(Y[1]=0)),Q){N[0]&&N[1]&&Y[0]&&Y[1]&&(G(Y[0])>G(Y[1])?Y[1]=0:Y[0]=0);var ht=!Y[0]&&!Y[1];ht&&jt(),N[0]&&!N[1]||Y[0]&&!Y[1]||ht&&M?(H+=Y[0],L=H/b):(!N[0]&&N[1]||!Y[0]&&Y[1]||ht&&!M)&&(L+=Y[1],H=L*b)}else H+=Y[0],L+=Y[1],H=Math.max(0,H),L=Math.max(0,L);r=T(function(Z,tt,yt,wt){if(!wt)return Z.map(function(Rt,Ht){return Dn(Rt,tt[Ht],yt[Ht])});var ot=Z[0],vt=Z[1],lt=wt===!0?ot/vt:wt,Mt=bi(Z,tt,!1,lt),Ft=Mt[0],le=Mt[1],fe=bi(Z,yt,!0,lt),ne=fe[0],Et=fe[1];return ot<Ft||vt<le?(ot=Ft,vt=le):(ot>ne||vt>Et)&&(ot=ne,vt=Et),[ot,vt]}([H,L],E,S,!!Q&&b),2),H=r[0],L=r[1],jt(),Q&&(f||K)&&(M?L=H/b:H=L*b);var Pt=[(X=H-D)-x,(j=L-_)-y];n.prevWidth=X,n.prevHeight=j;var kt=Xo(e,H,L,J,g,n);if(rt||!Pt.every(function(Z){return!Z})||!kt.every(function(Z){return!Z})){var $,it,ft,st,dt=be.drag(e,ya(t,e.state,kt,!!a,0,"draggable")),Dt=dt.transform,at=v+X,gt=m+j,ut=mt(e,t,C({width:at,height:gt,offsetWidth:Math.round(H),offsetHeight:Math.round(L),startRatio:b,boundingWidth:H,boundingHeight:L,direction:q,dist:[X,j],delta:Pt,isPinch:!!a,drag:dt},($={style:{width:"".concat(at,"px"),height:"".concat(gt,"px")},transform:Dt},ft=t,st=(it=dt).afterTransform||it.transform,C(C({},je(C(C(C({},$.style),it.style),{transform:st}),ft)),{afterTransform:st,transform:$.transform}))));return!c&&nt(e,"onResize",ut),ut}}function Gt(){var Z=n.fixedDirection,tt=function(ot,vt,lt,Mt){var Ft,le=lt.ratio,fe=lt.startOffsetWidth,ne=lt.startOffsetHeight,Et=0,Rt=0,Ht=Mt.distX,ie=Mt.distY,Lt=Mt.pinchScale,ve=Mt.parentDistance,Vt=Mt.parentDist,Ut=Mt.parentScale,ce=lt.fixedDirection,Zt=[0,1].map(function(de){return G(ot[de]-ce[de])}),qt=[0,1].map(function(de){var Ct=Zt[de];return Ct!==0&&(Ct=2/Ct),Ct});if(Vt)Et=Vt[0],Rt=Vt[1],vt&&(Et?Rt||(Rt=Et/le):Et=Rt*le);else if(Lr(Lt))Et=(Lt-1)*fe,Rt=(Lt-1)*ne;else if(Ut)Et=(Ut[0]-1)*fe,Rt=(Ut[1]-1)*ne;else if(ve){var Qt=fe*Zt[0],At=ne*Zt[1],me=Ee([Qt,At]);Et=ve/me*Qt*qt[0],Rt=ve/me*At*qt[1]}else{var pe=Cr({datas:lt,distX:Ht,distY:ie});pe=qt.map(function(de,Ct){return pe[Ct]*de}),Ft=T(function(de,Ct,Fe,Bt,we){var ir=T(de,2),ar=ir[0],or=ir[1],Me=0,Ce=0;if(we&&ar&&or){var Rr=se([0,0],Ct),_e=se([0,0],Bt),Ae=Ee(Ct),ae=Math.cos(Rr-_e)*Ae;if(Bt[0])if(Bt[1]){var Nt=Bt[0]*ar,Se=Bt[1]*or,he=Math.atan2(Nt+Ct[0],Se+Ct[1]),Yt=Math.atan2(Nt,Se);he<0&&(he+=2*Math.PI),Yt<0&&(Yt+=2*Math.PI);var te=0;(te=G(he-Yt)<Math.PI/2||G(he-Yt)>Math.PI/2*3?he-Yt:he-(Yt+=Math.PI))>2*Math.PI?te-=2*Math.PI:te>Math.PI?te=2*Math.PI-te:te<-Math.PI&&(te=-2*Math.PI-te);var qe=Ee([Nt+Ct[0],Se+Ct[1]])*Math.cos(te);Me=qe*Math.sin(Yt)-Nt,Ce=qe*Math.cos(Yt)-Se,Bt[0]<0&&(Me*=-1),Bt[1]<0&&(Ce*=-1)}else Ce=(Me=ae)/Fe;else Me=(Ce=ae)*Fe}else Me=Bt[0]*Ct[0],Ce=Bt[1]*Ct[1];return[Me,Ce]}([fe,ne],pe,le,ot,vt),2),Et=Ft[0],Rt=Ft[1]}return{distWidth:Et,distHeight:Rt}}(N,Q,n,t);X=tt.distWidth,j=tt.distHeight;var yt=N[0]-Z[0]||Q?Math.max(D+X,ee):D,wt=N[1]-Z[1]||Q?Math.max(_+j,ee):_;return Q&&D&&_&&(M?wt=yt/b:yt=wt*b),[yt,wt]}function jt(){var Z;I&&(Z=T(I([H,L]),2),H=Z[0],L=Z[1]),H=ct(H,U),L=ct(L,U)}},dragControlAfter:function(e,t){var r=t.datas,n=r.isResize,i=r.startOffsetWidth,a=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(n&&e.props.checkResizableError!==!1){var u=e.state,l=u.width-(i+o),p=u.height-(a+s),f=G(l)>3,c=G(p)>3;return f&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),c&&(r.startHeight+=p,r.startOffsetHeight+=p,r.prevHeight+=p),f||c?this.dragControl(e,t):void 0}},dragControlEnd:function(e,t){var r=t.datas,n=t.parentEvent;if(r.isResize){r.isResize=!1;var i=Or(e,t,{});return!n&&nt(e,"onResizeEnd",i),i}},dragGroupControlCondition:qi,dragGroupControlStart:function(e,t){var r=t.datas,n=this.dragControlStart(e,C(C({},t),{isGroup:!0}));if(!n)return!1;var i=He(e,"resizable",t),a=r.startOffsetWidth,o=r.startOffsetHeight;function s(){var d=r.minSize;i.forEach(function(h){var g=h.datas,v=g.minSize,m=g.startOffsetWidth,x=g.startOffsetHeight,y=a*(m?v[0]/m:0),E=o*(x?v[1]/x:0);d[0]=Math.max(d[0],y),d[1]=Math.max(d[1],E)})}function u(){var d=r.maxSize;i.forEach(function(h){var g=h.datas,v=g.maxSize,m=g.startOffsetWidth,x=g.startOffsetHeight,y=a*(m?v[0]/m:0),E=o*(x?v[1]/x:0);d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],E)})}var l=vn(e,this,"dragControlStart",t,function(d,h){return Ai(e,d,r,h)});s(),u();var p=function(d){n.setFixedDirection(d),l.forEach(function(h,g){h.setFixedDirection(d),Ai(e,h.moveable,r,i[g])})};r.setFixedDirection=p;var f=C(C({},n),{targets:e.props.targets,events:l.map(function(d){return C(C({},d),{setMin:function(h){d.setMin(h),s()},setMax:function(h){d.setMax(h),u()}})}),setFixedDirection:p,setMin:function(d){n.setMin(d),s()},setMax:function(d){n.setMax(d),u()}}),c=nt(e,"onResizeGroupStart",f);return r.isResize=c!==!1,!!r.isResize&&n},dragGroupControl:function(e,t){var r=t.datas;if(r.isResize){var n=Er(e.props,"resizable");(function(d,h,g){d._emitter.on(h,g)})(e,"onBeforeResize",function(d){nt(e,"onBeforeResizeGroup",mt(e,t,C(C({},d),{targets:n.targets}),!0))});var i=this.dragControl(e,C(C({},t),{isGroup:!0}));if(i){var a=i.boundingWidth,o=i.boundingHeight,s=i.dist,u=n.keepRatio,l=[a/(a-s[0]),o/(o-s[1])],p=r.fixedPosition,f=vn(e,this,"dragControl",t,function(d,h){var g=T(ge(rn(e.rotation/180*Math.PI,3),[h.datas.originalX*l[0],h.datas.originalY*l[1],1],3),2),v=g[0],m=g[1];return C(C({},h),{parentDist:null,parentScale:l,dragClient:St(p,[v,m]),parentKeepRatio:u})}),c=C({targets:n.targets,events:f},i);return nt(e,"onResizeGroup",c),c}}},dragGroupControlEnd:function(e,t){var r=t.isDrag;if(t.datas.isResize){this.dragControlEnd(e,t);var n=vn(e,this,"dragControlEnd",t);return nt(e,"onResizeGroupEnd",Or(e,t,{targets:e.props.targets,events:n})),r}},request:function(e){var t={},r=0,n=0,i=!1,a=e.getRect();return{isControl:!0,requestStart:function(o){var s;return i=o.useSnap,{datas:t,parentDirection:o.direction||[1,1],parentIsWidth:(s=o?.horizontal)===null||s===void 0||s,useSnap:i}},request:function(o){return"offsetWidth"in o?r=o.offsetWidth-a.offsetWidth:"deltaWidth"in o&&(r+=o.deltaWidth),"offsetHeight"in o?n=o.offsetHeight-a.offsetHeight:"deltaHeight"in o&&(n+=o.deltaHeight),{datas:t,parentDist:[r,n],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:i}}}},unset:function(e){e.state.gestos.resizable=null}};function Ni(e){return e?e/G(e):0}function ts(e,t,r,n,i,a){var o=function(f,c,d){var h=[];if(d)G(c[0])!==1||G(c[1])!==1?h.push([c,[-1,-1]],[c,[-1,1]],[c,[1,-1]],[c,[1,1]]):h.push([c,[f[0],-f[1]]],[c,[-f[0],f[1]]]),h.push([c,f]);else if(f[0]&&f[1]||!f[0]&&!f[1]){var g=f[0]?f:[1,1];[1,-1].forEach(function(v){[1,-1].forEach(function(m){var x=[v*g[0],m*g[1]];c[0]===x[0]&&c[1]===x[1]||h.push([c,x])})})}else f[0]?(G(c[0])===1?[1]:[1,-1]).forEach(function(v){h.push([[c[0],-1],[v*f[0],-1]],[[c[0],0],[v*f[0],0]],[[c[0],1],[v*f[0],1]])}):f[1]&&(G(c[1])===1?[1]:[1,-1]).forEach(function(v){h.push([[-1,c[1]],[-1,v*f[1]]],[[0,c[1]],[0,v*f[1]]],[[1,c[1]],[1,v*f[1]]])});return h}(r,a.fixedDirection,n),s=Fa(e,t,r,n),u=W(W([],T(Jo(e,t,o,n,i,a)),!1),T(Ra(e,s,a)),!1),l=$r(u,0),p=$r(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}function xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return oo.apply(void 0,W([Jn],T(e),!1))}function Aa(e){e()}function es(e){return e&&e!=="none"?De(e)?e:Zn(e):[1,0,0,1,0,0]}function yr(e,t,r){return Ur(t,Ie(r,t),e,Ie(r.map(function(n){return-n}),t))}function rs(e){return Jr(Ia(e,":before").transformOrigin).map(function(t,r){var n=en(t),i=n.value,a=n.unit;return i*function(o,s,u){return s==="%"?ri(o.ownerSVGElement)[u?"width":"height"]/100:1}(e,a,r===0)})}function Jr(e){return e?e.split(" "):["0","0"]}function za(e){var t=re(e)("transform");if(t&&t!=="none")return t;if("transform"in e){var r=e.transform.baseVal;if(!r)return"";var n=r.length;if(!n)return"";for(var i=[],a=function(s){var u=r[s].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map(function(l){return u[l]}).join(", "),")"))},o=0;o<n;++o)a(o);return i.join(" ")}return""}function _r(e,t,r,n,i){var a,o,s,u,l=Vn(e)||Re(e),p=!1;if(!e||r)s=e;else{var f=(a=e?.assignedSlot)===null||a===void 0?void 0:a.parentElement,c=e.parentElement;f?(p=!0,u=c,s=f):s=c}for(var d=!1,h=e===t||s===t,g="relative",v=1,m=parseFloat(i?.("zoom"))||1,x=i?.("position");s&&s!==l;){t===s&&(h=!0);var y=re(s),E=s.tagName.toLowerCase(),S=za(s),b=y("willChange"),D=parseFloat(y("zoom"))||1;if(g=y("position"),n&&D!==1){v=D;break}if(!r&&n&&m!==1&&x&&x!=="absolute"||E==="svg"||E==="foreignobject"||g!=="static"||S&&S!=="none"||b==="transform")break;var _=(o=e?.assignedSlot)===null||o===void 0?void 0:o.parentNode,M=s.parentNode;_&&(p=!0,u=M);var P=M;if(P&&P.nodeType===11){d=!0,g=re(s=P.host)("position");break}s=P,g="relative"}return{offsetZoom:v,hasSlot:p,parentSlotElement:u,isCustomElement:d,isStatic:g==="static",isEnd:h||!s||s===l,offsetParent:s||l}}function ns(e,t){var r,n,i,a=e.tagName.toLowerCase(),o=e.offsetLeft,s=e.offsetTop,u=re(e),l=Wn(o),p=!l;return p||a==="svg"&&!e.ownerSVGElement?i=(n=Jr(u("transformOrigin")).map(function(f){return parseFloat(f)})).slice():(i=(n=ma?rs(e):Jr(u("transformOrigin")).map(function(f){return parseFloat(f)})).slice(),p=!0,a==="svg"?(o=0,s=0):(r=T(function(f,c,d){var h=f.tagName.toLowerCase();if(!f.getBBox||!d&&h==="g")return[0,0,0,0];var g=re(f),v=g("transform-box")==="fill-box",m=f.getBBox(),x=ri(f.ownerSVGElement),y=m.x,E=m.y;h!=="foreignobject"||y||E||(y=parseFloat(f.getAttribute("x"))||0,E=parseFloat(f.getAttribute("y"))||0);var S=y-x.x,b=E-x.y,D=v?c[0]:c[0]-S,_=v?c[1]:c[1]-b;return[S,b,D,_]}(e,n,e===t&&t.tagName.toLowerCase()==="g"),4),o=r[0],s=r[1],n[0]=r[2],n[1]=r[3])),{tagName:a,isSVG:l,hasOffset:p,offset:[o||0,s||0],origin:n,targetOrigin:i}}function ka(e,t){var r=re(e),n=re(Re(e)),i=n("position");if(!(t||i&&i!=="static"))return[0,0];var a=parseInt(n("marginLeft"),10),o=parseInt(n("marginTop"),10);return r("position")==="absolute"&&(r("top")==="auto"&&r("bottom")==="auto"||(o=0),r("left")==="auto"&&r("right")==="auto"||(a=0)),[a,o]}function Gn(e){e.forEach(function(t){var r=t.matrix;r&&(t.matrix=Be(r,3,4))})}function is(e){for(var t=e.parentElement,r=!1,n=Re(e);t;){var i=Ia(t).transform;if(i&&i!=="none"){r=!0;break}if(t===n)break;t=t.parentElement}return{fixedContainer:t||n,hasTransform:r}}function ei(e,t){return t===void 0&&(t=e.length>9),"".concat(t?"matrix3d":"matrix","(").concat(ua(e,!t).join(","),")")}function ri(e){var t=e.clientWidth,r=e.clientHeight;if(!e)return{x:0,y:0,width:0,height:0,clientWidth:t,clientHeight:r};var n=e.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||t,height:i.height||r,clientWidth:t,clientHeight:r}}function as(e,t){var r,n=ri(e),i=n.width,a=n.height,o=n.clientWidth,s=n.clientHeight,u=o/i,l=s/a,p=e.preserveAspectRatio.baseVal,f=p.align,c=p.meetOrSlice,d=[0,0],h=[u,l],g=[0,0];if(f!==1){var v=(f-2)%3,m=Math.floor((f-2)/3);d[0]=i*v/2,d[1]=a*m/2;var x=c===2?Math.max(l,u):Math.min(u,l);h[0]=x,h[1]=x,g[0]=(o-i)/2*v,g[1]=(s-a)/2*m}var y=la(h,t);return r=T(g,2),y[t*(t-1)]=r[0],y[t*(t-1)+1]=r[1],yr(y,t,d)}function ye(e,t,r){return ge(e,Tr(t,r),r)}function tr(e,t,r,n){return[[0,0],[t,0],[0,r],[t,r]].map(function(i){return ye(e,i,n)})}function nn(e){var t=e.map(function(s){return s[0]}),r=e.map(function(s){return s[1]}),n=Math.min.apply(Math,W([],T(t),!1)),i=Math.min.apply(Math,W([],T(r),!1)),a=Math.max.apply(Math,W([],T(t),!1)),o=Math.max.apply(Math,W([],T(r),!1));return{left:n,top:i,right:a,bottom:o,width:a-n,height:o-i}}function Yi(e,t,r,n){return nn(tr(e,t,r,n))}function Ee(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function os(e,t,r,n){r===void 0&&(r=1),n===void 0&&(n=se(e,t));var i=function(a,o){return Ee([o[0]-a[0],o[1]-a[1]])}(e,t);return{transform:"translateY(-50%) translate(".concat(e[0],"px, ").concat(e[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function Qr(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,a=r.reduce(function(s,u){return s+u[0]},0)/i,o=r.reduce(function(s,u){return s+u[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(a,"px, ").concat(o,"px) rotate(").concat(e,"rad) scale(").concat(t,")")}}function Er(e,t){var r=e[t];return De(r)?C(C({},e),r):e}function Ga(e){var t=e&&!Wn(e.offsetWidth),r=0,n=0,i=0,a=0,o=0,s=0,u=0,l=0,p=0,f=0,c=0,d=0,h=1/0,g=1/0,v=1/0,m=1/0,x=0,y=0,E=!1;if(e)if(!t&&e.ownerSVGElement){var S=e.getBBox();E=!0,o=r=S.width,s=n=S.height,u=r,l=n,i=r,a=n}else{var b=re(e),D=e.style,_=b("boxSizing")==="border-box",M=parseFloat(b("borderLeftWidth"))||0,P=parseFloat(b("borderRightWidth"))||0,w=parseFloat(b("borderTopWidth"))||0,O=parseFloat(b("borderBottomWidth"))||0,R=(parseFloat(b("paddingLeft"))||0)+(parseFloat(b("paddingRight"))||0),z=(parseFloat(b("paddingTop"))||0)+(parseFloat(b("paddingBottom"))||0),k=R+(M+P),A=z+(w+O),B=b("position"),F=0,I=0;if("clientLeft"in e){var V=null;if(B==="absolute"?V=_r(e,Re(e)).offsetParent:V=e.parentElement,V){var U=re(V);F=parseFloat(U("width")),I=parseFloat(U("height"))}}p=Math.max(R,$t(b("minWidth"),F)||0),f=Math.max(z,$t(b("minHeight"),I)||0),h=$t(b("maxWidth"),F),g=$t(b("maxHeight"),I),isNaN(h)&&(h=1/0),isNaN(g)&&(g=1/0),x=$t(D.width,0)||0,y=$t(D.height,0)||0,o=parseFloat(b("width"))||0,s=parseFloat(b("height"))||0,r=u=G(o-x)<1?Dn(p,x||o,h):o,n=l=G(s-y)<1?Dn(f,y||s,g):s,i=u,a=l,_?(v=h,m=g,c=p,d=f,u=r-k,l=n-A):(v=h+k,m=g+A,c=p+k,d=f+A,r=u+k,n=l+A),i=u+R,a=l+z}return{svg:E,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:u,contentHeight:l,inlineCSSWidth:x,inlineCSSHeight:y,cssWidth:o,cssHeight:s,minWidth:p,minHeight:f,maxWidth:h,maxHeight:g,minOffsetWidth:c,minOffsetHeight:d,maxOffsetWidth:v,maxOffsetHeight:m}}function Ba(e,t){var r=e===Re(e)||e===Vn(e),n={clientLeft:e.clientLeft,clientTop:e.clientTop,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(t.height,n.clientHeight),n.scrollHeight=Math.max(t.height,n.scrollHeight)),n.overflow=re(e)("overflow")!=="visible",C(C({},t),n)}function mn(e,t,r,n){var i=e.left,a=e.right,o=e.top,s=e.bottom,u=t.top,l=t.left,p={left:l+i,top:u+o,right:l+a,bottom:u+s,width:a-i,height:s-o};return r&&n?Ba(r,p):p}function Yr(e,t){var r=0,n=0,i=0,a=0;if(e){var o=e.getBoundingClientRect();r=o.left,n=o.top,i=o.width,a=o.height}var s={left:r,top:n,width:i,height:a,right:r+i,bottom:n+a};return e&&t?Ba(e,s):s}function ni(e,t){return[St(t,e[0]),St(t,e[1]),St(t,e[2]),St(t,e[3])]}function Pe(e){var t=e.left,r=e.top;return ni([e.pos1,e.pos2,e.pos3,e.pos4],[t,r])}function Bn(e,t){e[t?"controlAbles":"targetAbles"].forEach(function(r){r.unset&&r.unset(e)})}function We(e,t){var r=t?"controlGesto":"targetGesto",n=e[r];n?.isIdle()===!1&&Bn(e,t),n?.unset(),e[r]=null}function je(e,t){if(t){var r=Ue(t);r.nextStyle=C(C({},r.nextStyle),e)}return{style:e,cssText:wr(e).map(function(n){return"".concat((i=n,a="-",i.replace(/([a-z])([A-Z])/g,function(o,s,u){return""+s+a+u.toLowerCase()})),": ").concat(e[n],";");var i,a}).join("")}}function mt(e,t,r,n){var i=t.datas;i.datas||(i.datas={});var a=C(C({},r),{target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,moveable:e,datas:i.datas,isRequest:t.isRequest,isRequestChild:t.isRequestChild,isFirstDrag:!!t.isFirstDrag,isTrusted:t.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=t.stop)===null||o===void 0||o.call(t)}});return i.isStartEvent?n||(i.lastEvent=a):i.isStartEvent=!0,a}function Or(e,t,r){var n=t.datas,i="isDrag"in r?r.isDrag:t.isDrag;return n.datas||(n.datas={}),C(C({isDrag:i},r),{moveable:e,target:e.state.target,clientX:t.clientX,clientY:t.clientY,inputEvent:t.inputEvent,currentTarget:e,lastEvent:n.lastEvent,isDouble:t.isDouble,datas:n.datas,isFirstDrag:!!t.isFirstDrag})}function nt(e,t,r,n,i){return e.triggerEvent(t,r,n,i)}function Ia(e,t){return Te(e).getComputedStyle(e,t)}function Xr(e,t,r){var n={},i={};return e.filter(function(a){var o=a.name;if(n[o]||!t.some(function(s){return a[s]}))return!1;if(!r&&a.ableGroup){if(i[a.ableGroup])return!1;i[a.ableGroup]=!0}return n[o]=!0,!0})}function In(e,t){return e===t||e==null&&t==null}function Xi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length-1,n=0;n<r;++n){var i=e[n];if(!Wn(i))return i}return e[r]}function Ha(e){return e.reduce(function(t,r){return t.concat(r)},[])}function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(r,n){return G(n)-G(r)}),e[0]}function ii(e,t,r){return ge(Ge(e,r),Tr(t,r),r)}function oe(e,t,r,n){if(!r[0]&&!r[1])return t;var i=ye(e,[Ni(r[0]||1),0],n),a=ye(e,[0,Ni(r[1]||1)],n);return St(t,ye(e,[r[0]/Ee(i),r[1]/Ee(a)],n))}function tn(e){return G(e)<=ee?0:e}function Hn(e,t){return t===void 0&&(t=[e]),function(r,n){if(n.isRequest)return!!t.some(function(a){return n.requestAble===a})&&n.parentDirection;var i=n.inputEvent.target;return xe(i,xt("direction"))&&(!e||xe(i,xt(e)))}}function Ze(e,t){return e?Un(e)?e:rr(e)?t?document.querySelector(e):e:ra(e)?e():sa(e)?e:"current"in e?e.current:e:null}function qa(e,t){return e?((r=e)&&De(r)&&!Un(r)&&(Wt(r)||"length"in r)?[].slice.call(e):[e]).reduce(function(n,i){return Wt(i)?n.push(qa(i,t)):n.push(Ze(i,t)),n},[]):[];var r}function qn(e,t){if(t){if(e==="left")return{x:"0%",y:"50%"};if(e==="top")return{x:"50%",y:"50%"};if(e==="center")return{x:"50%",y:"50%"};if(e==="right")return{x:"100%",y:"50%"};if(e==="bottom")return{x:"50%",y:"100%"};var r=T(e.split(" "),2),n=r[0],i=r[1],a=qn(n||""),o=qn(i||""),s=C(C({},a),o),u={x:"50%",y:"50%"};return s.x&&(u.x=s.x),s.y&&(u.y=s.y),s.value&&(s.x&&!s.y&&(u.y=s.value),!s.x&&s.y&&(u.x=s.value)),u}return e==="left"?{x:"0%"}:e==="right"?{x:"100%"}:e==="top"?{y:"0%"}:e==="bottom"?{y:"100%"}:e?e==="center"?{value:"50%"}:{value:e}:{}}function Na(e,t,r){var n=qn(e,!0),i=n.x,a=n.y;return[$t(i,t)||0,$t(a,r)||0]}function ss(e,t,r){var n=e.map(function(a){return et(a,t)}),i=n.map(function(a){return function(o,s){return ge(rn(s,3),Tr(o,3))}(a,r)});return{prev:n,next:i,result:i.map(function(a){return St(a,t)})}}function Ya(e,t){return e.length===t.length&&e.every(function(r,n){var i=t[n],a=Wt(r),o=Wt(i);return a&&o?Ya(r,i):!a&&!o&&r===i})}function Wi(e,t,r,n,i){var a=e._store,o=a[t];return t in a&&(o===r||n(o)===n(r))?o:(a[t]=r,r)}function Ke(e){return e>=0?1:-1}function G(e){return Math.abs(e)}function Xa(e){return Lr(e)?{top:e,left:e,right:e,bottom:e}:{left:e.left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}}Hn("",["resizable","scalable"]),Mr("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(e,t){var r=t.datas,n=t.targets,i=t.angle,a=t.originalDatas,o=e.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch".concat(n?"Group":"","Start"),p="drag".concat(n?"Group":"","ControlStart"),f=(s===!0?e.controlAbles:u.filter(function(g){return s.indexOf(g.name)>-1})).filter(function(g){return g.canPinch&&g[p]}),c=mt(e,t,{});n&&(c.targets=n);var d=nt(e,l,c);r.isPinch=d!==!1,r.ables=f;var h=r.isPinch;return!!h&&(f.forEach(function(g){if(a[g.name]=a[g.name]||{},g[p]){var v=C(C({},t),{datas:a[g.name],parentRotate:i,isPinch:!0});g[p](e,v)}}),e.state.snapRenderInfo={request:t.isRequest,direction:[0,0]},h)},pinch:function(e,t){var r=t.datas,n=t.scale,i=t.distance,a=t.originalDatas,o=t.inputEvent,s=t.targets,u=t.angle;if(r.isPinch){var l=i*(1-1/n),p=mt(e,t,{});s&&(p.targets=s);var f="onPinch".concat(s?"Group":"");nt(e,f,p);var c=r.ables,d="drag".concat(s?"Group":"","Control");return c.forEach(function(h){h[d]&&h[d](e,C(C({},t),{datas:a[h.name],inputEvent:o,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),p}},pinchEnd:function(e,t){var r=t.datas,n=t.isPinch,i=t.inputEvent,a=t.targets,o=t.originalDatas;if(r.isPinch){var s="onPinch".concat(a?"Group":"","End"),u=Or(e,t,{isDrag:n});a&&(u.targets=a),nt(e,s,u);var l=r.ables,p="drag".concat(a?"Group":"","ControlEnd");return l.forEach(function(f){f[p]&&f[p](e,C(C({},t),{isDrag:n,datas:o[f.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(e,t){return this.pinchStart(e,C(C({},t),{targets:e.props.targets}))},pinchGroup:function(e,t){return this.pinch(e,C(C({},t),{targets:e.props.targets}))},pinchGroupEnd:function(e,t){return this.pinchEnd(e,C(C({},t),{targets:e.props.targets}))}}),Hn("scalable");var us=xt("area-pieces"),Wr=xt("area-piece"),Wa=xt("avoid"),ls=xt("view-dragging");function bn(e){var t=e.areaElement;if(t){var r=e.state,n=r.width,i=r.height;oa(t,Wa),t.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function ji(e){return e.createElement("div",{key:"area_pieces",className:us},e.createElement("div",{className:Wr}),e.createElement("div",{className:Wr}),e.createElement("div",{className:Wr}),e.createElement("div",{className:Wr}))}var fs={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(e,t){var r=e.props,n=r.target,i=r.dragArea,a=r.groupable,o=r.passDragArea,s=e.getState(),u=s.width,l=s.height,p=s.renderPoses,f=o?xt("area","pass"):xt("area");if(a)return[t.createElement("div",{key:"area",ref:ke(e,"areaElement"),className:f}),ji(t)];if(!n||!i)return[];var c=fa([0,0],[u,0],[0,l],[u,l],p[0],p[1],p[2],p[3]),d=c.length?ei(c,!0):"none";return[t.createElement("div",{key:"area",ref:ke(e,"areaElement"),className:f,style:{top:"0px",left:"0px",width:"".concat(u,"px"),height:"".concat(l,"px"),transformOrigin:"0 0",transform:d}}),ji(t)]},dragStart:function(e,t){var r=t.datas,n=t.clientX,i=t.clientY;if(!t.inputEvent)return!1;r.isDragArea=!1;var a=e.areaElement,o=e.state,s=o.moveableClientRect,u=o.renderPoses,l=o.rootMatrix,p=o.is3d,f=s.left,c=s.top,d=nn(u),h=d.left,g=d.top,v=d.width,m=d.height,x=T(ii(l,[n-f,i-c],p?4:3),2),y=x[0],E=x[1],S=[{left:h,top:g,width:v,height:(E-=g)-10},{left:h,top:g,width:(y-=h)-10,height:m},{left:h,top:g+E+10,width:v,height:m-E-10},{left:h+y+10,top:g,width:v-y-10,height:m}],b=[].slice.call(a.nextElementSibling.children);S.forEach(function(D,_){b[_].style.cssText="left: ".concat(D.left,"px;top: ").concat(D.top,"px; width: ").concat(D.width,"px; height: ").concat(D.height,"px;")}),aa(a,Wa),o.disableNativeEvent=!0},drag:function(e,t){var r=t.datas,n=t.inputEvent;if(this.enableNativeEvent(e),!n)return!1;r.isDragArea||(r.isDragArea=!0,bn(e))},dragEnd:function(e,t){this.enableNativeEvent(e);var r=t.inputEvent,n=t.datas;if(!r)return!1;n.isDragArea||bn(e)},dragGroupStart:function(e,t){return this.dragStart(e,t)},dragGroup:function(e,t){return this.drag(e,t)},dragGroupEnd:function(e,t){return this.dragEnd(e,t)},unset:function(e){bn(e),e.state.disableNativeEvent=!1},enableNativeEvent:function(e){var t=e.state;t.disableNativeEvent&&ia(function(){t.disableNativeEvent=!1})}};Mr("origin",{props:["origin","svgOrigin"],render:function(e,t){var r,n=e.props,i=n.zoom,a=n.svgOrigin,o=n.groupable,s=e.getState(),u=s.beforeOrigin,l=s.rotation,p=s.svg,f=s.allMatrix,c=s.is3d,d=s.left,h=s.top,g=s.offsetWidth,v=s.offsetHeight;if(!o&&p&&a){var m=T(Na(a,g,v),2);r=Qr(l,i,et(ye(f,[m[0],m[1]],c?4:3),[d,h]))}else r=Qr(l,i,u);return[t.createElement("div",{className:xt("control","origin"),style:r,key:"beforeOrigin"})]}});var cs={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]};Mr("padding",{props:["padding"],render:function(e,t){var r=e.props;if(r.dragArea)return[];var n=Xa(r.padding||{}),i=n.left,a=n.top,o=n.right,s=n.bottom,u=e.getState(),l=u.renderPoses,p=[u.pos1,u.pos2,u.pos3,u.pos4],f=[];return i>0&&f.push([0,2]),a>0&&f.push([0,1]),o>0&&f.push([1,3]),s>0&&f.push([2,3]),f.map(function(c,d){var h=T(c,2),g=h[0],v=h[1],m=fa([0,0],[100,0],[0,100],[100,100],p[g],p[v],l[g],l[v]);if(m.length)return t.createElement("div",{key:"padding".concat(d),className:xt("padding"),style:{transform:ei(m,!0)}})})}});var ps={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(e,t){var r=e.state,n=r.is3d,i=r.targetMatrix,a=r.inlineTransform,o=n?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(ua(i,!0),")"),s=a&&a!=="none"?a:o;t.datas.startTransforms=function(u,l){var p=bt(l?4:3);return u==="matrix".concat(l?"3d":"","(").concat(p.join(","),")")||u==="matrix(1,0,0,1,0,0)"}(s,n)?[]:Dr(s)},resetStyle:function(e){var t=e.datas;t.nextStyle={},t.nextTransforms=e.datas.startTransforms,t.nextTransformAppendedIndexes=[]},fillDragStartParams:function(e,t){return mt(e,t,{setTransform:function(r){t.datas.startTransforms=Wt(r)?r:Dr(r)},isPinch:!!t.isPinch})},fillDragParams:function(e,t){return mt(e,t,{isPinch:!!t.isPinch})},dragStart:function(e,t){this.setTransform(e,t),this.resetStyle(t),nt(e,"onBeforeRenderStart",this.fillDragStartParams(e,t))},drag:function(e,t){t.datas.startTransforms||this.setTransform(e,t),this.resetStyle(t),nt(e,"onBeforeRender",mt(e,t,{isPinch:!!t.isPinch}))},dragEnd:function(e,t){t.datas.startTransforms||(this.setTransform(e,t),this.resetStyle(t)),nt(e,"onBeforeRenderEnd",mt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag}))},dragGroupStart:function(e,t){var r=this;this.dragStart(e,t);var n=He(e,"beforeRenderable",t),i=e.moveables,a=n.map(function(o,s){var u=i[s];return r.setTransform(u,o),r.resetStyle(o),r.fillDragStartParams(u,o)});nt(e,"onBeforeRenderGroupStart",mt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,setTransform:function(){},events:a}))},dragGroup:function(e,t){var r=this;this.drag(e,t);var n=He(e,"beforeRenderable",t),i=e.moveables,a=n.map(function(o,s){var u=i[s];return r.resetStyle(o),r.fillDragParams(u,o)});nt(e,"onBeforeRenderGroup",mt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets,events:a}))},dragGroupEnd:function(e,t){this.dragEnd(e,t),nt(e,"onBeforeRenderGroupEnd",mt(e,t,{isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets}))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)}},ds={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(e,t){nt(e,"onRenderStart",mt(e,t,{isPinch:!!t.isPinch}))},drag:function(e,t){nt(e,"onRender",this.fillDragParams(e,t))},dragAfter:function(e,t){return this.drag(e,t)},dragEnd:function(e,t){nt(e,"onRenderEnd",this.fillDragEndParams(e,t))},dragGroupStart:function(e,t){nt(e,"onRenderGroupStart",mt(e,t,{isPinch:!!t.isPinch,targets:e.props.targets}))},dragGroup:function(e,t){var r=this,n=He(e,"beforeRenderable",t),i=e.moveables,a=n.map(function(o,s){var u=i[s];return r.fillDragParams(u,o)});nt(e,"onRenderGroup",mt(e,t,C(C({isPinch:!!t.isPinch,targets:e.props.targets,transform:Hr(t),transformObject:{}},je(qr(t))),{events:a})))},dragGroupEnd:function(e,t){var r=this,n=He(e,"beforeRenderable",t),i=e.moveables,a=n.map(function(o,s){var u=i[s];return r.fillDragEndParams(u,o)});nt(e,"onRenderGroupEnd",mt(e,t,C({isPinch:!!t.isPinch,isDrag:t.isDrag,targets:e.props.targets,events:a,transformObject:{},transform:Hr(t)},je(qr(t)))))},dragControlStart:function(e,t){return this.dragStart(e,t)},dragControl:function(e,t){return this.drag(e,t)},dragControlAfter:function(e,t){return this.dragAfter(e,t)},dragControlEnd:function(e,t){return this.dragEnd(e,t)},dragGroupControlStart:function(e,t){return this.dragGroupStart(e,t)},dragGroupControl:function(e,t){return this.dragGroup(e,t)},dragGroupControlEnd:function(e,t){return this.dragGroupEnd(e,t)},fillDragParams:function(e,t){var r={};return Je(Kr(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),mt(e,t,C({isPinch:!!t.isPinch,transformObject:r,transform:Hr(t)},je(qr(t))))},fillDragEndParams:function(e,t){var r={};return Je(Kr(t)||[]).forEach(function(n){r[n.name]=n.functionValue}),mt(e,t,C({isPinch:!!t.isPinch,isDrag:t.isDrag,transformObject:r,transform:Hr(t)},je(qr(t))))}};function Sr(e,t,r,n,i,a,o){a.clientDistX=a.distX,a.clientDistY=a.distY;var s=i==="Start",u=i==="End",l=i==="After",p=e.state.target,f=a.isRequest,c=n.indexOf("Control")>-1;if(!p||s&&c&&!f&&e.areaElement===a.inputEvent.target)return!1;var d=W([],T(t),!1);if(f){var h=a.requestAble;d.some(function(w){return w.name===h})||d.push.apply(d,W([],T(e.props.ables.filter(function(w){return w.name===h})),!1))}if(!d.length||d.every(function(w){return w.dragRelation}))return!1;var g,v=a.inputEvent;u&&v&&(g=document.elementFromPoint(a.clientX,a.clientY)||v.target);var m=!1,x=function(){var w;m=!0,(w=a.stop)===null||w===void 0||w.call(a)},y=s&&(!e.targetGesto||!e.controlGesto||!e.targetGesto.isFlag()||!e.controlGesto.isFlag());y&&e.updateRect(i,!0,!1);var E=a.datas,S=c?"controlGesto":"targetGesto",b=e[S],D=function(w,O,R){if(!(O in w)||b!==e[S])return!1;var z=w.name,k=E[z]||(E[z]={});if(s&&(k.isEventStart=!R||!w[R]||w[R](e,a)),!k.isEventStart)return!1;var A=w[O](e,C(C({},a),{stop:x,datas:k,originalDatas:E,inputTarget:g}));return e._emitter.off(),s&&A===!1&&(k.isEventStart=!1),A};y&&d.forEach(function(w){w.unset&&w.unset(e)}),D(ps,"drag".concat(n).concat(i));var _=0,M=0;r.forEach(function(w){if(m)return!1;var O="".concat(w).concat(n).concat(i),R="".concat(w).concat(n,"Condition");i!==""||f||function(A,B){var F,I=A.is3d?4:3;F=T(ii(A.rootMatrix,[B.distX,B.distY],I),2),B.distX=F[0],B.distY=F[1]}(e.state,a);var z=d.filter(function(A){return A[O]}),k=(z=z.filter(function(A,B){return A.name&&z.indexOf(A)===B})).filter(function(A){return D(A,O,R)}).length;m&&++_,k&&++M,!m&&s&&z.length&&!k&&(_+=z.filter(function(A){var B=A.name;return!!E[B].isEventStart&&A.dragRelation!=="strong"}).length?1:0)}),l&&!M||D(ds,"drag".concat(n).concat(i));var P=b!==e[S]||_===r.length;return(u||m||P)&&(e.state.gestos={},e.moveables&&e.moveables.forEach(function(w){w.state.gestos={}}),d.forEach(function(w){w.unset&&w.unset(e)})),s&&!P&&!f&&M&&e.props.preventDefault&&a?.preventDefault(),e.isUnmounted||P?!1:((!s&&M&&!o||u)&&(e.props.flushSync||Aa)(function(){e.updateRect(u?i:"",!0,!1),e.forceUpdate()}),s||u||l||!M||o||Sr(e,t,r,n,i+"After",a),!0)}function ai(e,t){return function(r,n){var i;n===void 0&&(n=r.inputEvent.target);var a=n,o=e.areaElement,s=e._dragTarget;return!(!s||!t&&!((i=e.controlGesto)===null||i===void 0)&&i.isFlag())&&(a===s||s.contains(a)||a===o||!e.isMoveableElement(a)&&!e.controlBox.contains(a)||xe(a,"moveable-area")||xe(a,"moveable-padding")||xe(a,"moveable-edgeDraggable"))}}function ja(e,t,r){var n=e.controlBox,i=[],a=e.props,o=a.dragArea,s=e.state.target,u=a.dragTarget;i.push(n),o&&!u||i.push(t),!o&&u&&s&&t!==s&&a.dragTargetSelf&&i.push(s);var l=ai(e);return Va(e,i,"targetAbles",r,{dragStart:l,pinchStart:l})}function La(e,t){var r=e.controlBox,n=[];n.push(r);var i=ai(e,!0),a=function(o,s){return s===void 0&&(s=o.inputEvent.target),s===r||!i(o,s)};return Va(e,n,"controlAbles",t,{dragStart:a,pinchStart:a})}function Va(e,t,r,n,i){i===void 0&&(i={});var a=r==="targetAbles",o=e.props,s=o.pinchOutside,u=o.pinchThreshold,l=o.preventClickEventOnDrag,p=o.preventClickDefault,f=o.checkInput,c=o.dragFocusedInput,d=o.preventDefault,h=d===void 0||d,g=o.preventRightClick,v=g===void 0||g,m=o.preventWheelClick,x={preventDefault:h,preventRightClick:v,preventWheelClick:m===void 0||m,container:Ze(o.dragContainer,!0)||Te(e.getControlBoxElement()),pinchThreshold:u,pinchOutside:s,preventClickEventOnDrag:!!a&&l,preventClickEventOnDragStart:!!a&&p,preventClickEventByCondition:a?null:function(S){return e.controlBox.contains(S.target)},checkInput:!!a&&f,dragFocusedInput:c},y=new Co(t,x),E=n==="Control";return["drag","pinch"].forEach(function(S){["Start","","End"].forEach(function(b){y.on("".concat(S).concat(b),function(D){var _,M=D.eventType,P=S==="drag"&&D.isPinch;if(!i[M]||i[M](D)){if(!P){var w=S==="drag"?[S]:["drag",S],O=W([],T(e[r]),!1);Sr(e,O,w,n,b,D)?(e.props.stopPropagation||b==="Start"&&E)&&((_=D?.inputEvent)===null||_===void 0||_.stopPropagation()):D.stop()}}else D.stop()})})}),y}var hs=function(){function e(t,r,n){var i=this;this.target=t,this.moveable=r,this.eventName=n,this.ables=[],this._onEvent=function(a){var o=i.eventName,s=i.moveable;s.state.disableNativeEvent||i.ables.forEach(function(u){u[o](s,{inputEvent:a})})},t.addEventListener(n.toLowerCase(),this._onEvent)}return e.prototype.setAbles=function(t){this.ables=t},e.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},e}();function gs(e,t,r,n){var i;r===void 0&&(r=t);var a=Fi(e,t),o=a.matrixes,s=a.is3d,u=a.targetMatrix,l=a.transformOrigin,p=a.targetOrigin,f=a.offsetContainer,c=a.hasFixed,d=a.zoom,h=function(F,I){if(Xe){var V=ue(Xe,function(rt){return rt[0][0]==F&&rt[0][1]==I});if(V)return V[1]}var U=Fi(F,I,!0);return Xe&&Xe.push([[F,I],U]),U}(f,r),g=h.matrixes,v=h.is3d,m=h.offsetContainer,x=h.zoom,y=n,E=e.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in e,S=u,b=bt(4),D=bt(4),_=bt(4),M=bt(4),P=o.length,w=g.map(function(F){return C(C({},F),{matrix:F.matrix?W([],T(F.matrix),!1):void 0})}).reverse();o.reverse(),!s&&y&&(S=Be(S,3,4),Gn(o)),!v&&y&&Gn(w),w.forEach(function(F){D=Tt(D,F.matrix,4)});var O=r||Re(e),R=((i=w[0])===null||i===void 0?void 0:i.target)||_r(O,O,!0).offsetParent,z=w.slice(1).reduce(function(F,I){return Tt(F,I.matrix,4)},bt(4));o.forEach(function(F,I){if(P-2===I&&(_=b.slice()),P-1===I&&(M=b.slice()),!F.matrix){var V=function(U,rt,K,q,N){var X,j=U.target,Q=U.origin,pt=rt.matrix,H=Ga(j),L=H.offsetWidth,J=H.offsetHeight,Y=K.getBoundingClientRect(),ht=[0,0];K===Re(K)&&(ht=ka(j,!0));for(var Pt=j.getBoundingClientRect(),kt=Pt.left-Y.left+K.scrollLeft-(K.clientLeft||0)+ht[0],$=Pt.top-Y.top+K.scrollTop-(K.clientTop||0)+ht[1],it=Pt.width,ft=Pt.height,st=Ur(q,N,pt),dt=Yi(st,L,J,q),Dt=dt.left,at=dt.top,gt=dt.width,ut=dt.height,Gt=ye(st,Q,q),jt=et(Gt,[Dt,at]),Z=[kt+jt[0]*it/gt,$+jt[1]*ft/ut],tt=[0,0],yt=0;++yt<10;){var wt=Ge(N,q);X=T(et(ye(wt,Z,q),ye(wt,Gt,q)),2),tt[0]=X[0],tt[1]=X[1];var ot=Yi(Ur(q,N,Ie(tt,q),pt),L,J,q),vt=ot.left-kt,lt=ot.top-$;if(G(vt)<2&&G(lt)<2)break;Z[0]-=vt,Z[1]-=lt}return tt.map(function(Mt){return Math.round(Mt)})}(F,o[I+1],R,4,Tt(z,b,4));F.matrix=Ie(V,4)}b=Tt(b,F.matrix,4)});var k=!E&&s;S||(S=bt(k?4:3));var A=ei(E&&S.length===16?Be(S,4,3):S,k),B=D;return D=function(F,I,V){for(var U=F.slice(),rt=0;rt<V;++rt)U[rt*V+I-1]=0,U[(I-1)*V+rt]=0;return U[(I-1)*(V+1)]=1,U}(D,4,4),{hasZoom:d!==1||x!==1,hasFixed:c,matrixes:o,rootMatrix:D,originalRootMatrix:B,beforeMatrix:_,offsetMatrix:M,allMatrix:b,targetMatrix:S,targetTransform:A,inlineTransform:e.style.transform,transformOrigin:l,targetOrigin:p,is3d:y,offsetContainer:f,offsetRootContainer:m}}function vs(e,t,r,n){r===void 0&&(r=t);var i,a,o=0,s=0,u=0,l={},p=Ga(e);if(e&&(o=p.offsetWidth,s=p.offsetHeight),e){var f=gs(e,t,r,n),c=mr(f.allMatrix,f.transformOrigin,o,s);l=C(C({},f),c);var d=mr(f.allMatrix,[50,50],100,100);i=[d.pos1,d.pos2],u=se((a=d.direction)>0?i[0]:i[1],a>0?i[1]:i[0])}return C(C(C({hasZoom:!1,width:o,height:s,rotation:u},p),{originalRootMatrix:bt(4),rootMatrix:bt(4),beforeMatrix:bt(4),offsetMatrix:bt(4),allMatrix:bt(4),targetMatrix:bt(4),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),l)}function Nn(e,t,r,n,i,a){a===void 0&&(a=[]);var o=1,s=[0,0],u={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},p={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f={left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c=[0,0],d={},h=vs(t,r,i,!0);if(t){var g=re(t);a.forEach(function(O){d[O]=g(O)});var v=h.is3d?4:3,m=mr(h.offsetMatrix,St(h.transformOrigin,function(O,R){R===void 0&&(R=Math.sqrt(O.length));for(var z=[],k=O[R*R-1],A=0;A<R-1;++A)z[A]=O[R*(R-1)+A]/k;return z[R-1]=0,z}(h.targetMatrix,v)),h.width,h.height);o=m.direction,s=St(m.origin,[m.left-h.left,m.top-h.top]),f=Yr(h.offsetRootContainer);var x=_r(n,n,!0).offsetParent||h.offsetRootContainer;if(h.hasZoom){var y=mr(Tt(h.originalRootMatrix,h.allMatrix),h.transformOrigin,h.width,h.height),E=mr(h.originalRootMatrix,Jr(re(x)("transformOrigin")).map(function(O){return parseFloat(O)}),x.offsetWidth,x.offsetHeight);if(u=mn(y,f),p=mn(E,f,x,!0),e){var S=y.left,b=y.top;l=mn({left:S,top:b,bottom:b,right:b},f)}}else{u=Yr(t),p=function(O){var R=xr?.get(O);if(R)return R;var z=Yr(O,!0);return xr&&xr.set(O,z),z}(x),e&&(l=Yr(e));var D=p.left,_=p.top,M=p.clientLeft,P=p.clientTop,w=[u.left-D,u.top-_];c=et(ii(h.rootMatrix,w,4),[M+h.left,P+h.top])}}return C({targetClientRect:u,containerClientRect:p,moveableClientRect:l,rootContainerClientRect:f,beforeDirection:o,beforeOrigin:s,originalBeforeOrigin:s,target:t,style:d,offsetDelta:c},h)}function Li(e){var t=e.pos1,r=e.pos2,n=e.pos3,i=e.pos4;if(!(t&&r&&n&&i))return null;var a=Ve([t,r,n,i]),o=[a.minX,a.minY],s=et(e.origin,o);return t=et(t,o),r=et(r,o),n=et(n,o),i=et(i,o),C(C({},e),{left:e.left,top:e.top,posDelta:o,pos1:t,pos2:r,pos3:n,pos4:i,origin:s,beforeOrigin:s,isPersisted:!0})}var er=function(e){function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state=C({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Nn(null)),r.renderState={},r.enabledAbles=[],r.targetAbles=[],r.controlAbles=[],r.rotation=0,r.scale=[1,1],r.isMoveableMounted=!1,r.isUnmounted=!1,r.events={mouseEnter:null,mouseLeave:null},r._emitter=new da,r._prevOriginalDragTarget=null,r._originalDragTarget=null,r._prevDragTarget=null,r._dragTarget=null,r._prevPropTarget=null,r._propTarget=null,r._prevDragArea=!1,r._isPropTargetChanged=!1,r._hasFirstTarget=!1,r._reiszeObserver=null,r._observerId=0,r._mutationObserver=null,r._rootContainer=null,r._viewContainer=null,r._viewClassNames=[],r._store={},r.checkUpdateRect=function(){if(!r.isDragging()){var n=r.props.parentMoveable;n?n.checkUpdateRect():(lo(r._observerId),r._observerId=ia(function(){r.isDragging()||r.updateRect()}))}},r._onPreventClick=function(n){n.stopPropagation(),n.preventDefault()},r}return Pr(t,e),t.prototype.render=function(){var r=this.props,n=this.getState(),i=r.parentPosition,a=r.className,o=r.target,s=r.zoom,u=r.cspNonce,l=r.translateZ,p=r.cssStyled,f=r.groupable,c=r.linePadding,d=r.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var h=T(i||[0,0],2),g=h[0],v=h[1],m=n.left,x=n.top,y=n.target,E=n.direction,S=n.hasFixed,b=n.offsetDelta,D=r.targets,_=this.isDragging(),M={};this.getEnabledAbles().forEach(function(k){M["data-able-".concat(k.name.toLowerCase())]=!0});var P=this._getAbleClassName(),w=D&&D.length&&(y||f)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,R=[m-g,x-v];!f&&r.useAccuratePosition&&(R[0]+=b[0],R[1]+=b[1]);var z={position:S?"fixed":"absolute",display:w?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(R[0],"px, ").concat(R[1],"px, ").concat(l,")"),"--zoom":s,"--zoompx":"".concat(s,"px")};return c&&(z["--moveable-line-padding"]=c),d&&(z["--moveable-control-padding"]=d),Xt.createElement(p,C({cspNonce:u,ref:ke(this,"controlBox"),className:"".concat(xt("control-box",E===-1?"reverse":"",_?"dragging":"")," ").concat(P," ").concat(a)},M,{onClick:this._onPreventClick,style:z}),this.renderAbles(),this._renderLines())},t.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var r=this.props,n=r.parentMoveable,i=r.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),i||n||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},t.prototype.componentDidUpdate=function(r){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(r)},t.prototype.componentWillUnmount=function(){var r,n;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(r=this._reiszeObserver)===null||r===void 0||r.disconnect(),(n=this._mutationObserver)===null||n===void 0||n.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),We(this,!1),We(this,!0);var i=this.events;for(var a in i){var o=i[a];o&&o.destroy()}},t.prototype.getTargets=function(){var r=this.props.target;return r?[r]:[]},t.prototype.getAble=function(r){return ue(this.props.ables||[],function(n){return n.name===r})},t.prototype.getContainer=function(){var r=this.props,n=r.parentMoveable,i=r.wrapperMoveable;return r.container||i&&i.getContainer()||n&&n.getContainer()||this.controlBox.parentElement},t.prototype.getControlBoxElement=function(){return this.controlBox},t.prototype.getDragElement=function(){return this._dragTarget},t.prototype.isMoveableElement=function(r){var n;return r&&(((n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"class"))||"").indexOf(Jn)>-1},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=this.targetGesto,a=this.controlGesto;return i&&ai(this)({inputEvent:r},n)?i.isFlag()||i.triggerDragStart(r):a&&this.isMoveableElement(n)&&(a.isFlag()||a.triggerDragStart(r)),this},t.prototype.hitTest=function(r){var n,i=this.state,a=i.target,o=i.pos1,s=i.pos2,u=i.pos3,l=i.pos4,p=i.targetClientRect;if(!a)return 0;if(Un(r)){var f=r.getBoundingClientRect();n={left:f.left,top:f.top,width:f.width,height:f.height}}else n=C({width:0,height:0},r);var c=n.left,d=n.top,h=n.width,g=n.height,v=wi([o,s,l,u],p),m=Di(Mo(v,[[c,d],[c+h,d],[c+h,d+g],[c,d+g]])),x=Di(v);return m&&x?Math.min(100,m/x*100):0},t.prototype.isInside=function(r,n){var i=this.state,a=i.target,o=i.pos1,s=i.pos2,u=i.pos3,l=i.pos4,p=i.targetClientRect;return!!a&&_n([r,n],wi([o,s,l,u],p))},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0);var a=this.props,o=!a.parentPosition&&!a.wrapperMoveable;o&&Qe(!0);var s=a.parentMoveable,u=this.state.target||a.target,l=this.getContainer(),p=s?s._rootContainer:this._rootContainer,f=Nn(this.controlBox,u,l,l,p||l,this._getRequestStyles());if(!u&&this._hasFirstTarget&&a.persistData){var c=Li(a.persistData);for(var d in c)f[d]=c[d]}o&&Qe(),this.updateState(f,!s&&i)},t.prototype.isDragging=function(r){var n,i,a=this.targetGesto,o=this.controlGesto;return a?.isFlag()?!r||!!(!((n=a.getEventData()[r])===null||n===void 0)&&n.isEventStart):!!o?.isFlag()&&(!r||!!(!((i=o.getEventData()[r])===null||i===void 0)&&i.isEventStart))},t.prototype.updateTarget=function(r){this.updateRect(r,!0)},t.prototype.getRect=function(){var r=this.state,n=Pe(this.state),i=T(n,4),a=i[0],o=i[1],s=i[2],u=i[3],l=nn(n),p=r.width,f=r.height,c=l.width,d=l.height,h=l.left,g=l.top,v=[r.left,r.top],m=St(v,r.origin);return{width:c,height:d,left:h,top:g,pos1:a,pos2:o,pos3:s,pos4:u,offsetWidth:p,offsetHeight:f,beforeOrigin:St(v,r.beforeOrigin),origin:m,transformOrigin:r.transformOrigin,rotation:this.getRotation()}},t.prototype.getManager=function(){return this},t.prototype.stopDrag=function(r){var n;r&&r!=="target"||(((n=this.targetGesto)==null?void 0:n.isIdle())===!1&&Bn(this,!1),n?.stop()),r&&r!=="control"||(((n=this.controlGesto)==null?void 0:n.isIdle())===!1&&Bn(this,!0),n?.stop())},t.prototype.getRotation=function(){var r=this.state;return function(n,i,a){var o=se(n,i)/Math.PI*180;return(o=a>=0?o:180-o)>=0?o:360+o}(r.pos1,r.pos2,r.direction)},t.prototype.request=function(r,n,i){n===void 0&&(n={});var a=this,o=a.props,s=o.parentMoveable||o.wrapperMoveable||a,u=s.props.ables,l=o.groupable,p=ue(u,function(m){return m.name===r});if(this.isDragging()||!p||!p.request)return{request:function(){return this},requestEnd:function(){return this}};var f=p.request(a),c=i||n.isInstant,d=f.isControl?"controlAbles":"targetAbles",h="".concat(l?"Group":"").concat(f.isControl?"Control":""),g=W([],T(s[d]),!1),v={request:function(m){return Sr(a,g,["drag"],h,"",C(C({},f.request(m)),{requestAble:r,isRequest:!0}),c),v},requestEnd:function(){return Sr(a,g,["drag"],h,"End",C(C({},f.requestEnd()),{requestAble:r,isRequest:!0}),c),v}};return Sr(a,g,["drag"],h,"Start",C(C({},f.requestStart(n)),{requestAble:r,isRequest:!0}),c),c?v.request(n).requestEnd():v},t.prototype.getMoveables=function(){return[this]},t.prototype.destroy=function(){this.componentWillUnmount()},t.prototype.updateRenderPoses=function(){var r=this.getState(),n=this.props,i=n.padding,a=r.originalBeforeOrigin,o=r.transformOrigin,s=r.allMatrix,u=r.is3d,l=r.pos1,p=r.pos2,f=r.pos3,c=r.pos4,d=r.left,h=r.top,g=r.isPersisted,v=n.zoom||1;if(!i&&v<=1)return r.renderPoses=[l,p,f,c],void(r.renderLines=[[l,p],[p,c],[c,f],[f,l]]);var m=Xa(i||{}),x=m.left,y=m.top,E=m.bottom,S=m.right,b=u?4:3,D=Ur(b,Ie((g?o:this.controlBox&&n.groupable?a:St(a,[d,h])).map(function(R){return-R}),b),s,Ie(o,b)),_=oe(D,l,[-x,-y],b),M=oe(D,p,[S,-y],b),P=oe(D,f,[-x,E],b),w=oe(D,c,[S,E],b);r.renderPoses=[_,M,P,w],r.renderLines=[[_,M],[M,w],[w,P],[P,_]];var O=v/2;r.renderLines=[[oe(D,l,[-x-O,-y],b),oe(D,p,[S+O,-y],b)],[oe(D,p,[S,-y-O],b),oe(D,c,[S,E+O],b)],[oe(D,c,[S+O,E],b),oe(D,f,[-x-O,E],b)],[oe(D,f,[-x,E+O],b),oe(D,l,[-x,-y-O],b)]]},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var r=this.props,n=r.target,i=r.container,a=r.parentMoveable,o=this.state,s=o.target,u=o.container;if(s||n){this.updateAbles();var l=!In(s,n);if(l||!In(u,i)){var p=i||this.controlBox;p&&this.unsetAbles(),this.updateState({target:n,container:i}),!a&&p&&this.updateRect("End",!1,!1),this._isPropTargetChanged=l}}},t.prototype.waitToChangeTarget=function(){return new Promise(function(){})},t.prototype.triggerEvent=function(r,n){var i=this.props;if(this._emitter.trigger(r,n),i.parentMoveable&&n.isRequest&&!n.isRequestChild)return i.parentMoveable.triggerEvent(r,n,!0);var a=i[r];return a&&a(n)},t.prototype.useCSS=function(r,n){var i=this.props.customStyledMap,a=r+n;return i[a]||(i[a]=ga(r,n)),i[a]},t.prototype.getState=function(){var r,n=this.props;(n.target||!((r=n.targets)===null||r===void 0)&&r.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,a=n.persistData,o=n.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&a){var s=Li(a);if(s)return this.updateState(s,!1),this.state}return this.state.isPersisted=!1,this.state},t.prototype.updateSelectors=function(){},t.prototype.unsetAbles=function(){var r=this;this.targetAbles.forEach(function(n){n.unset&&n.unset(r)})},t.prototype.updateAbles=function(r,n){r===void 0&&(r=this.props.ables),n===void 0&&(n="");var i=this.props.triggerAblesSimultaneously,a=this.getEnabledAbles(r),o="drag".concat(n,"Start"),s="pinch".concat(n,"Start"),u="drag".concat(n,"ControlStart"),l=Xr(a,[o,s],i),p=Xr(a,[u],i);this.enabledAbles=a,this.targetAbles=l,this.controlAbles=p},t.prototype.updateState=function(r,n){if(n){if(this.isUnmounted)return;this.setState(r)}else{var i=this.state;for(var a in r)i[a]=r[a]}},t.prototype.getEnabledAbles=function(r){r===void 0&&(r=this.props.ables);var n=this.props;return r.filter(function(i){return i&&(i.always&&n[i.name]!==!1||n[i.name])})},t.prototype.renderAbles=function(){var r,n,i,a,o=this,s=this.props.triggerAblesSimultaneously,u={createElement:Xt.createElement};return this.renderState={},(r=Ha(Xr(this.getEnabledAbles(),["render"],s).map(function(l){return(0,l.render)(o,u)||[]})).filter(function(l){return l}),n=function(l){return l.key},i=[],a={},r.forEach(function(l,p){var f=n(l,p,r),c=a[f];c||(c=[],a[f]=c,i.push(c)),c.push(l)}),i).map(function(l){return l[0]})},t.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},t.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce(function(r,n){var i,a,o=(a=(i=n.requestStyle)===null||i===void 0?void 0:i.call(n))!==null&&a!==void 0?a:[];return W(W([],T(r),!1),T(o),!1)},W([],T(this.props.requestStyles||[]),!1))},t.prototype._updateObserver=function(r){this._updateResizeObserver(r),this._updateMutationObserver(r)},t.prototype._updateEvents=function(){var r=this.targetAbles.length,n=this.controlAbles.length,i=this._dragTarget;(!r&&this.targetGesto||this._isTargetChanged(!0))&&(We(this,!1),this.updateState({gestos:{}})),n||We(this,!0),i&&r&&!this.targetGesto&&(this.targetGesto=ja(this,i,"")),!this.controlGesto&&n&&(this.controlGesto=La(this,"Control"))},t.prototype._updateTargets=function(){var r=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=r.dragArea,this._propTarget=r.target,this._originalDragTarget=r.dragTarget||r.target,this._dragTarget=Ze(this._originalDragTarget,!0)},t.prototype._renderLines=function(){var r=this.props,n=r.zoom,i=r.hideDefaultLines,a=r.hideChildMoveableDefaultLines,o=r.parentMoveable;if(i||o&&a)return[];var s=this.getState(),u={createElement:Xt.createElement};return s.renderLines.map(function(l,p){return Qn(u,"",l[0],l[1],n,"render-line-".concat(p))})},t.prototype._isTargetChanged=function(r){var n=this.props,i=n.dragTarget||n.target,a=this._prevOriginalDragTarget,o=this._prevDragArea,s=n.dragArea;return!s&&a!==i||(r||s)&&o!==s||this._prevPropTarget!=this._propTarget},t.prototype._updateNativeEvents=function(){var r=this,n=this.props.dragArea?this.areaElement:this.state.target,i=this.events,a=wr(i);if(this._isTargetChanged())for(var o in i){var s=i[o];s&&s.destroy(),i[o]=null}if(n){var u=this.enabledAbles;a.forEach(function(l){var p=Xr(u,[l]),f=p.length>0,c=i[l];f?(c||(c=new hs(n,r,l),i[l]=c),c.setAbles(p)):c&&(c.destroy(),i[l]=null)})}},t.prototype._checkUpdateRootContainer=function(){var r=this.props.rootContainer;!this._rootContainer&&r&&(this._rootContainer=Ze(r,!0))},t.prototype._checkUpdateViewContainer=function(){var r=this.props.viewContainer;!this._viewContainer&&r&&(this._viewContainer=Ze(r,!0)),this._viewContainer&&this._changeAbleViewClassNames(W(W([],T(this._getAbleViewClassNames()),!1),[this.isDragging()?ls:""],!1))},t.prototype._changeAbleViewClassNames=function(r){var n,i,a,o,s=this._viewContainer,u=(n=r.filter(Boolean),i=function(d){return d},a=[],o=[],n.forEach(function(d,h){var g=i(d,h,n),v=o.indexOf(g),m=a[v]||[];v===-1&&(o.push(g),a.push(m)),m.push(d)}),a).map(function(d){return T(d,1)[0]}),l=this._viewClassNames,p=ca(l,u),f=p.removed,c=p.added;f.forEach(function(d){oa(s,l[d])}),c.forEach(function(d){aa(s,u[d])}),this._viewClassNames=u},t.prototype._getAbleViewClassNames=function(){var r=this;return(this.getEnabledAbles().map(function(n){var i;return((i=n.viewClassName)===null||i===void 0?void 0:i.call(n,r))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},t.prototype._getAbleClassName=function(r){var n=this;r===void 0&&(r="");var i=this.getEnabledAbles(),a=this.targetGesto,o=this.controlGesto,s=a?.isFlag()?a.getEventData():{},u=o?.isFlag()?o.getEventData():{};return i.map(function(l){var p,f,c,d=l.name,h=((p=l.className)===null||p===void 0?void 0:p.call(l,n))||"";return(!((f=s[d])===null||f===void 0)&&f.isEventStart||!((c=u[d])===null||c===void 0)&&c.isEventStart)&&(h+=" ".concat(xt("".concat(d).concat(r,"-dragging")))),h.trim()}).filter(Boolean).join(" ")},t.prototype._updateResizeObserver=function(r){var n,i=this.props,a=i.target,o=Te(this.getControlBoxElement());if(o.ResizeObserver&&a&&i.useResizeObserver){if(r.target!==a||!this._reiszeObserver){var s=new o.ResizeObserver(this.checkUpdateRect);s.observe(a,{box:"border-box"}),this._reiszeObserver=s}}else(n=this._reiszeObserver)===null||n===void 0||n.disconnect()},t.prototype._updateMutationObserver=function(r){var n,i=this,a=this.props,o=a.target,s=Te(this.getControlBoxElement());if(s.MutationObserver&&o&&a.useMutationObserver){if(r.target!==o||!this._mutationObserver){var u=new s.MutationObserver(function(l){var p,f;try{for(var c=function(g){var v=typeof Symbol=="function"&&Symbol.iterator,m=v&&g[v],x=0;if(m)return m.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&x>=g.length&&(g=void 0),{value:g&&g[x++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),d=c.next();!d.done;d=c.next()){var h=d.value;h.type==="attributes"&&h.attributeName==="style"&&i.checkUpdateRect()}}catch(g){p={error:g}}finally{try{d&&!d.done&&(f=c.return)&&f.call(c)}finally{if(p)throw p.error}}});u.observe(o,{attributes:!0}),this._mutationObserver=u}}else(n=this._mutationObserver)===null||n===void 0||n.disconnect()},t.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:Aa,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},t}(Xt.PureComponent),Ua={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(e,t){var r,n=e.props,i=n.targets||[],a=e.getState(),o=a.left,s=a.top,u=a.isPersisted,l=n.zoom||1,p=e.renderGroupRects,f=((r=n.persistData)===null||r===void 0?void 0:r.children)||[];u?i=f.map(function(){return null}):f=[];var c=Wi(e,"parentPosition",[o,s],function(h){return h.join(",")}),d=Wi(e,"requestStyles",e.getRequestChildStyles(),function(h){return h.join(",")});return e.moveables=e.moveables.slice(0,i.length),W(W([],T(i.map(function(h,g){return t.createElement(er,{key:"moveable"+g,ref:ta(e,"moveables",g),target:h,origin:!1,requestStyles:d,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:e,parentPosition:[o,s],persistData:f[g],zoom:l})})),!1),T(Ha(p.map(function(h,g){var v=[h.pos1,h.pos2,h.pos3,h.pos4];return[[0,1],[1,3],[3,2],[2,0]].map(function(m,x){var y=T(m,2),E=y[0],S=y[1];return Qn(t,"",et(v[E],c),et(v[S],c),l,"group-rect-".concat(g,"-").concat(x))})}))),!1)}};function Ne(e){var t=e.originalDatas.draggable;return t||(e.originalDatas.draggable={},t=e.originalDatas.draggable),C(C({},e),{datas:t})}Mr("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(e,t){t.datas.inputTarget=t.inputEvent&&t.inputEvent.target},dragEnd:function(e,t){var r=e.props.target,n=t.inputEvent,i=t.inputTarget,a=!e.isMoveableElement(i)&&e.controlBox.contains(i);if(n&&i&&!t.isDrag&&!e.isMoveableElement(i)&&!a){var o=r.contains(i);nt(e,"onClick",mt(e,t,{isDouble:t.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:e.props.target,containsTarget:o}))}},dragGroupEnd:function(e,t){var r=t.inputEvent,n=t.inputTarget;if(r&&n&&!t.isDrag&&!e.isMoveableElement(n)&&t.datas.inputTarget!==n){var i=e.props.targets,a=i.indexOf(n),o=a>-1,s=!1;a===-1&&(s=(a=$e(i,function(u){return u.contains(n)}))>-1),nt(e,"onClickGroup",mt(e,t,{isDouble:t.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:o,containsTarget:s,moveableTarget:i[a]}))}},dragControlEnd:function(e,t){this.dragEnd(e,t)},dragGroupControlEnd:function(e,t){this.dragEnd(e,t)}}),Mr("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(e,t){var r=e.props,n=r.edgeDraggable;return n?Ma(t,"edgeDraggable",n,e.getState().renderPoses,r.zoom):[]},dragCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!(!n.edgeDraggable||!i)&&!n.draggable&&xe(i,xt("direction"))&&xe(i,xt("edge"))&&xe(i,xt("edgeDraggable"))},dragStart:function(e,t){return be.dragStart(e,Ne(t))},drag:function(e,t){return be.drag(e,Ne(t))},dragEnd:function(e,t){return be.dragEnd(e,Ne(t))},dragGroupCondition:function(e,t){var r,n=e.props,i=(r=t.inputEvent)===null||r===void 0?void 0:r.target;return!(!n.edgeDraggable||!i)&&!n.draggable&&xe(i,xt("direction"))&&xe(i,xt("line"))},dragGroupStart:function(e,t){return be.dragGroupStart(e,Ne(t))},dragGroup:function(e,t){return be.dragGroup(e,Ne(t))},dragGroupEnd:function(e,t){return be.dragGroupEnd(e,Ne(t))},unset:function(e){return be.unset(e)}});var ms={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]};function Vi(e,t){var r=T(e,3),n=r[0],i=r[1],a=r[2];return(n*t[0]+i*t[1]+a)/Math.sqrt(n*n+i*i)}function jr(e,t){var r=T(e,2),n=r[0],i=r[1];return-n*t[0]-i*t[1]}function Ui(e,t){return Math.max.apply(Math,W([],T(e.map(function(r){var n=T(r,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.max(i[t],a[t],o[t],s[t])})),!1))}function Zi(e,t){return Math.min.apply(Math,W([],T(e.map(function(r){var n=T(r,4),i=n[0],a=n[1],o=n[2],s=n[3];return Math.min(i[t],a[t],o[t],s[t])})),!1))}function Za(e,t){var r=t.map(function(n){if(Wt(n)){var i=Za(e,n),a=i.length;return a>1?i:a===1?i[0]:null}var o=ue(e,function(s){return s.manager.props.target===n});return o?(o.finded=!0,o.manager):null}).filter(Boolean);return r.length===1&&Wt(r[0])?r[0]:r}var bs=function(e){function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.differ=new pa,r.moveables=[],r.transformOrigin="50% 50%",r.renderGroupRects=[],r._targetGroups=[],r._hasFirstTargets=!1,r}return Pr(t,e),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this)},t.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){var a;i===void 0&&(i=!0);var o=this.state;if(this.controlBox&&!o.isPersisted){Qe(!0),this.moveables.forEach(function(X){X.updateRect(r,!1,!1)});var s=this.props,u=this.moveables,l=o.target||s.target,p=u.map(function(X){return{finded:!1,manager:X}}),f=this.props.targetGroups||[],c=Za(p,f),d=s.useDefaultGroupRotate;c.push.apply(c,W([],T(p.filter(function(X){return!X.finded}).map(function(X){return X.manager})),!1));var h=[],g=!n||r!==""&&s.updateGroup,v=s.defaultGroupRotate||0;if(!this._hasFirstTargets){var m=(a=s.persistData)===null||a===void 0?void 0:a.rotation;m!=null&&(v=m)}var x=function X(j,Q,pt){var H=j.map(function($){if(Wt($)){var it=X($,Q),ft=[it.pos1,it.pos2,it.pos3,it.pos4];return h.push(it),{poses:ft,rotation:it.rotation}}return{poses:Pe($.state),rotation:$.getRotation()}}),L=H.map(function($){return $.rotation}),J=0,Y=L[0],ht=L.every(function($){return Math.abs(Y-$)<.1});J=g?!d&&ht?Y:v:d||pt||!ht?Q:Y;var Pt=H.map(function($){return $.poses}),kt=function($,it){var ft,st,dt,Dt=[0,0],at=[0,0],gt=[0,0],ut=[0,0],Gt=0,jt=0;if(!$.length)return{pos1:Dt,pos2:at,pos3:gt,pos4:ut,minX:0,minY:0,maxX:0,maxY:0,width:Gt,height:jt,rotation:it};var Z=ct(it,ee);if(Z%90){var tt=Z/180*Math.PI,yt=Math.tan(tt),wt=-1/yt,ot=[Fn,Pi],vt=[[0,0],[0,0]],lt=[Fn,Pi],Mt=[[0,0],[0,0]];$.forEach(function(Qt){Qt.forEach(function(At){var me=Vi([-yt,1,0],At),pe=Vi([-wt,1,0],At);ot[0]>me&&(vt[0]=At,ot[0]=me),ot[1]<me&&(vt[1]=At,ot[1]=me),lt[0]>pe&&(Mt[0]=At,lt[0]=pe),lt[1]<pe&&(Mt[1]=At,lt[1]=pe)})});var Ft=T(vt,2),le=Ft[0],fe=Ft[1],ne=T(Mt,2),Et=ne[0],Rt=ne[1],Ht=[-yt,1,jr([-yt,1],le)],ie=[-yt,1,jr([-yt,1],fe)],Lt=[-wt,1,jr([-wt,1],Et)],ve=[-wt,1,jr([-wt,1],Rt)];ft=T([[Ht,Lt],[Ht,ve],[ie,Lt],[ie,ve]].map(function(Qt){var At=T(Qt,2);return Kn(At[0],At[1])[0]}),4),Dt=ft[0],at=ft[1],gt=ft[2],ut=ft[3],Gt=lt[1]-lt[0],jt=ot[1]-ot[0]}else{var Vt=Zi($,0),Ut=Zi($,1),ce=Ui($,0),Zt=Ui($,1);Dt=[Vt,Ut],at=[ce,Ut],gt=[Vt,Zt],ut=[ce,Zt],Gt=ce-Vt,jt=Zt-Ut,Z%180&&(Dt=(st=T([gt,Dt,ut,at],4))[0],at=st[1],gt=st[2],ut=st[3],Gt=Zt-Ut,jt=ce-Vt)}Z%360>180&&(Dt=(dt=T([ut,gt,at,Dt],4))[0],at=dt[1],gt=dt[2],ut=dt[3]);var qt=Ve([Dt,at,gt,ut]);return{pos1:Dt,pos2:at,pos3:gt,pos4:ut,width:Gt,height:jt,minX:qt.minX,minY:qt.minY,maxX:qt.maxX,maxY:qt.maxY,rotation:it}}(Pt,J);return kt}(c,this.rotation,!0);g&&(this.rotation=x.rotation,this.transformOrigin=s.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=f,this.renderGroupRects=h;var y=this.transformOrigin,E=this.rotation,S=this.scale,b=x.width,D=x.height,_=x.minX,M=x.minY,P=Ve(ss([[0,0],[b,0],[0,D],[b,D]],Na(y,b,D),this.rotation/180*Math.PI).result),w=P.minX,O=P.minY,R=" rotate(".concat(E,"deg)")+" scale(".concat(Ke(S[0]),", ").concat(Ke(S[1]),")"),z="translate(".concat(-w,"px, ").concat(-O,"px)").concat(R);this.controlBox.style.transform="translate3d(".concat(_,"px, ").concat(M,"px, ").concat(this.props.translateZ||0,")"),l.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(y,";")+"width:".concat(b,"px;height:").concat(D,"px;")+"transform: ".concat(z),o.width=b,o.height=D;var k=this.getContainer(),A=Nn(this.controlBox,l,this.controlBox,this.getContainer(),this._rootContainer||k,[]),B=[A.left,A.top],F=T(Pe(A),4),I=F[0],V=F[1],U=F[2],rt=F[3],K=Ve([I,V,U,rt]),q=[K.minX,K.minY],N=Ke(S[0]*S[1]);A.pos1=et(I,q),A.pos2=et(V,q),A.pos3=et(U,q),A.pos4=et(rt,q),A.left=_-A.left+q[0],A.top=M-A.top+q[1],A.origin=et(St(B,A.origin),q),A.beforeOrigin=et(St(B,A.beforeOrigin),q),A.originalBeforeOrigin=St(B,A.originalBeforeOrigin),A.transformOrigin=et(St(B,A.transformOrigin),q),l.style.transform="translate(".concat(-w-q[0],"px, ").concat(-O-q[1],"px)")+R,Qe(),this.updateState(C(C({},A),{posDelta:q,direction:N,beforeDirection:N}),i)}},t.prototype.getRect=function(){return C(C({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.triggerEvent=function(r,n,i){if(i||r.indexOf("Group")>-1)return e.prototype.triggerEvent.call(this,r,n);this._emitter.trigger(r,n)},t.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce(function(r,n){var i,a,o=(a=(i=n.requestChildStyle)===null||i===void 0?void 0:i.call(n))!==null&&a!==void 0?a:[];return W(W([],T(r),!1),T(o),!1)},[])},t.prototype.getMoveables=function(){return W([],T(this.moveables),!1)},t.prototype.updateAbles=function(){e.prototype.updateAbles.call(this,W(W([],T(this.props.ables),!1),[Ua],!1),"Group")},t.prototype._updateTargets=function(){e.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=Ze(this._originalDragTarget,!0)},t.prototype._updateEvents=function(){var r=this.state,n=this.props,i=this._prevDragTarget,a=n.dragTarget||this.areaElement,o=n.targets,s=this.differ.update(o),u=s.added,l=s.changed,p=s.removed,f=u.length||p.length;(f||this._prevOriginalDragTarget!==this._originalDragTarget)&&(We(this,!1),We(this,!0),this.updateState({gestos:{}})),i!==a&&(r.target=null),r.target||(r.target=this.areaElement,this.controlBox.style.display="block"),r.target&&(this.targetGesto||(this.targetGesto=ja(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=La(this,"GroupControl")));var c=!In(r.container,n.container);c&&(r.container=n.container),(c||f||this.transformOrigin!==(n.defaultGroupOrigin||"50% 50%")||l.length||o.length&&!Ya(this._targetGroups,n.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!f},t.prototype._updateObserver=function(){},t.defaultProps=C(C({},er.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(er),xs=function(e){function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.moveables=[],r}return Pr(t,e),t.prototype.render=function(){var r,n=this,i=this.props,a=i.cspNonce,o=i.cssStyled,s=i.persistData,u=i.targets||[],l=u.length,p=this.isUnmounted||!l,f=(r=s?.children)!==null&&r!==void 0?r:[];return p&&!l&&f.length?u=f.map(function(){return null}):p||(f=[]),Xt.createElement(o,{cspNonce:a,ref:ke(this,"controlBox"),className:xt("control-box")},u.map(function(c,d){var h,g,v=(g=(h=i.individualGroupableProps)===null||h===void 0?void 0:h.call(i,c,d))!==null&&g!==void 0?g:{};return Xt.createElement(er,C({key:"moveable"+d,ref:ta(n,"moveables",d)},i,v,{target:c,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:f[d]}))}))},t.prototype.componentDidMount=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.getTargets=function(){return this.props.targets},t.prototype.updateRect=function(r,n,i){i===void 0&&(i=!0),Qe(!0),this.moveables.forEach(function(a){a.updateRect(r,n,i)}),Qe()},t.prototype.getRect=function(){return C(C({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(r){return r.getRect()})})},t.prototype.request=function(r,n,i){n===void 0&&(n={});var a=this.moveables.map(function(s){return s.request(r,C(C({},n),{isInstant:!1}),!1)}),o={request:function(s){return a.forEach(function(u){return u.request(s)}),this},requestEnd:function(){return a.forEach(function(s){return s.requestEnd()}),this}};return i||n.isInstant?o.request(n).requestEnd():o},t.prototype.dragStart=function(r,n){n===void 0&&(n=r.target);var i=n,a=ue(this.moveables,function(o){var s=o.getTargets()[0],u=o.getControlBoxElement(),l=o.getDragElement();return!(!s||!l)&&(l===i||l.contains(i)||l!==s&&s===i||s.contains(i)||u===i||u.contains(i))});return a&&a.dragStart(r,n),this},t.prototype.hitTest=function(){return 0},t.prototype.isInside=function(){return!1},t.prototype.isDragging=function(){return!1},t.prototype.getDragElement=function(){return null},t.prototype.getMoveables=function(){return W([],T(this.moveables),!1)},t.prototype.updateRenderPoses=function(){},t.prototype.checkUpdate=function(){},t.prototype.triggerEvent=function(){},t.prototype.updateAbles=function(){},t.prototype._updateEvents=function(){},t.prototype._updateObserver=function(){},t}(er);function Ka(e,t){var r=[];return e.forEach(function(n){n&&(rr(n)?t[n]&&r.push.apply(r,W([],T(t[n]),!1)):Wt(n)?r.push.apply(r,W([],T(Ka(n,t)),!1)):r.push(n))}),r}function $a(e,t){var r=[];return e.forEach(function(n){n&&(rr(n)?t[n]&&r.push.apply(r,W([],T(t[n]),!1)):Wt(n)?r.push($a(n,t)):r.push(n))}),r}function Ja(e,t){return e.length!==t.length||e.some(function(r,n){var i=t[n];return!(!r&&!i)&&r!=i&&(!Wt(r)||!Wt(i)||Ja(r,i))})}var ys=function(e){function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.refTargets=[],i.selectorMap={},i._differ=new pa,i._elementTargets=[],i._tmpRefTargets=[],i._tmpSelectorMap={},i._onChangeTargets=null,i}var r,n;return Pr(t,e),t.makeStyled=function(){var i={};this.getTotalAbles().forEach(function(o){var s=o.css;s&&s.forEach(function(u){i[u]=!0})});var a=wr(i).join(`
`);this.defaultStyled=ga("div",function(o,s){return s.replace(/([^}{]*){/gm,function(u,l){return l.replace(/\.([^{,\s\d.]+)/g,"."+o+"$1")+"{"})}(Jn,Ho+a))},t.getTotalAbles=function(){return W([cs,Ua,ms,fs],T(this.defaultAbles),!1)},t.prototype.render=function(){var i,a=this.constructor;a.defaultStyled||a.makeStyled();var o=this.props,s=o.ables,u=o.props,l=function(_,M){var P={};for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&M.indexOf(w)<0&&(P[w]=_[w]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function"){var O=0;for(w=Object.getOwnPropertySymbols(_);O<w.length;O++)M.indexOf(w[O])<0&&Object.prototype.propertyIsEnumerable.call(_,w[O])&&(P[w[O]]=_[w[O]])}return P}(o,["ables","props"]),p=T(this._updateRefs(!0),2),f=p[0],c=p[1],d=Ka(f,c),h=d.length>1,g=W(W([],T(a.getTotalAbles()),!1),T(s||[]),!1),v=C(C(C({},l),u||{}),{ables:g,cssStyled:a.defaultStyled,customStyledMap:a.customStyledMap});this._elementTargets=d;var m=null,x=this.moveable,y=l.persistData;if(y?.children&&(h=!0),l.individualGroupable)return Xt.createElement(xs,C({key:"individual-group",ref:ke(this,"moveable")},v,{target:null,targets:d}));if(h){var E=$a(f,c);if(x&&!x.props.groupable&&!x.props.individualGroupable){var S=x.props.target;S&&d.indexOf(S)>-1&&(m=C({},x.state))}return Xt.createElement(bs,C({key:"group",ref:ke(this,"moveable")},v,(i=l.groupableProps)!==null&&i!==void 0?i:{},{target:null,targets:d,targetGroups:E,firstRenderState:m}))}var b=d[0];if(x&&(x.props.groupable||x.props.individualGroupable)){var D=ue(x.moveables||[],function(_){return _.props.target===b});D&&(m=C({},D.state))}return Xt.createElement(er,C({key:"single",ref:ke(this,"moveable")},v,{target:b,firstRenderState:m}))},t.prototype.componentDidMount=function(){this._checkChangeTargets()},t.prototype.componentDidUpdate=function(){this._checkChangeTargets()},t.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},t.prototype.getTargets=function(){var i,a;return(a=(i=this.moveable)===null||i===void 0?void 0:i.getTargets())!==null&&a!==void 0?a:[]},t.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},t.prototype.waitToChangeTarget=function(){var i,a=this;return this._onChangeTargets=function(){a._onChangeTargets=null,i()},new Promise(function(o){i=o})},t.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},t.prototype.getManager=function(){return this.moveable},t.prototype.getMoveables=function(){return this.moveable.getMoveables()},t.prototype.getDragElement=function(){return this.moveable.getDragElement()},t.prototype._updateRefs=function(i){var a=this.refTargets,o=qa(this.props.target||this.props.targets),s=typeof document<"u",u=Ja(a,o),l=this.selectorMap,p={};return this.refTargets.forEach(function f(c){rr(c)?l[c]?p[c]=l[c]:s&&(u=!0,p[c]=[].slice.call(document.querySelectorAll(c))):Wt(c)&&c.forEach(f)}),this._tmpRefTargets=o,this._tmpSelectorMap=p,[o,p,!i&&u]},t.prototype._checkChangeTargets=function(){var i,a,o;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),u=s.added,l=s.removed;(u.length||l.length)&&((a=(i=this.props).onChangeTargets)===null||a===void 0||a.call(i,{moveable:this.moveable,targets:this._elementTargets}),(o=this._onChangeTargets)===null||o===void 0||o.call(this));var p=T(this._updateRefs(),3),f=p[0],c=p[1],d=p[2];this.refTargets=f,this.selectorMap=c,d&&this.forceUpdate()},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(i,a,o,s){var u,l=arguments.length,p=l<3?a:s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(i,a,o,s);else for(var f=i.length-1;f>=0;f--)(u=i[f])&&(p=(l<3?u(p):l>3?u(a,o,p):u(a,o))||p);l>3&&p&&Object.defineProperty(a,o,p)}([(r=qo,n===void 0&&(n={}),function(i,a){r.forEach(function(o){var s=n[o]||o;s in i||(i[s]=function(){for(var u,l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var f=(u=this[a])[o].apply(u,l);return f===this[a]?this:f})})})],t.prototype,"moveable",void 0),t}(Xt.PureComponent);const Ds=(Ki=[be,Qo],xn=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Pr(t,e),t}(ys),xn.defaultAbles=Ki,xn);var Ki,xn;export{Ds as default};
